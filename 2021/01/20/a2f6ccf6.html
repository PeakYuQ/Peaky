<!DOCTYPE html><html lang="en"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="There is no description"><title>LayuiAdmin 文档 | NoteBook</title><link rel="stylesheet" type="text/css" href="/peaky/css/style.css?v=1.0.0"><link rel="stylesheet" type="text/css" href="/peaky/css/dark.css?v=1.0.0"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/normalize.css/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/pure-min.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/peaky/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/peaky/favicon.ico"><link rel="apple-touch-icon" href="/peaky/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/peaky/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/peaky/atom.xml"><div class="darkmode-toggle">🌓</div><script>var prefersDarkMode = window.matchMedia('(prefers-color-scheme: dark)');
var toggle = document.querySelector('.darkmode-toggle');
var html = document.querySelector('html');

html.dataset.dark = localStorage.dark || prefersDarkMode.matches;

toggle.addEventListener('click', () => {
localStorage.dark = !(html.dataset.dark == 'true');
html.dataset.dark = localStorage.dark;
});</script><meta name="generator" content="Hexo 6.0.0"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">LayuiAdmin 文档</h1><a id="logo" href="/peaky/.">NoteBook</a><p class="description">Always believe that something wonderful is about to hanppen!</p></div><div id="nav-menu"><a class="current" href="/peaky/."><i class="fa fa-home"> 首页</i></a><a href="/peaky/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/peaky/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">LayuiAdmin 文档</h1><div class="post-meta">2021-01-20<span> | </span><span class="category"><a href="/peaky/categories/%E5%AD%A6%E4%B9%A0/">学习</a></span><script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span><span class="post-time"><span class="post-meta-item-text"> | </span><span class="post-meta-item-icon"><i class="fa fa-keyboard-o"></i><span class="post-count"> 7.4k</span><span class="post-meta-item-text"> Words</span></span></span><span class="post-time"> | <span class="post-meta-item-icon"><i class="fa fa-clock-o"></i><span class="post-count"> 30</span><span class="post-meta-item-text"> Minutes</span></span></span></div><a class="disqus-comment-count" href="/peaky/2021/01/20/a2f6ccf6.html#vcomment"><span class="valine-comment-count" data-xid="/peaky/2021/01/20/a2f6ccf6.html"></span><span> Comment</span></a><div class="post-content"><p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/niuben/p/11038846.html">layuiAdmin std v1.x 【iframe版】开发者文档</a></p>
<h1 id="题外"><a href="#题外" class="headerlink" title="题外"></a><strong>题外</strong></h1><ul>
<li>该文档适用于 layuiAdmin 专业版（单页面），阅读之前请务必确认是否与你使用的版本对应。</li>
<li>熟练掌握 layuiAdmin 的前提是熟练掌握 layui，因此除了本篇文档， layui 的文档 也是必不可少的存在。</li>
<li><a target="_blank" rel="noopener" href="https://www.kancloud.cn/dawn-only/layui">看云上的文档</a></li>
</ul>
<hr>
<blockquote>
<p>layuiAdmin.std（iframe 版） 是完全基于 layui 架构而成的通用型后台管理模板系统，采用传统的 iframe 多页面开发模式，可更快速直接地开发网页后台应用程序，无需过多地学习成本，简单高效，撸起袖子直接干。</p>
</blockquote>
<span id="more"></span>

<h1 id="快速上手"><a href="#快速上手" class="headerlink" title="快速上手"></a><strong>快速上手</strong></h1><h3 id="部署"><a href="#部署" class="headerlink" title="部署"></a><strong>部署</strong></h3><ol>
<li>解压文件后，将 layuiAdmin 完整放置在任意目录</li>
<li>通过本地 web 服务器去访问 .&#x2F;start&#x2F;index.html 即可运行 Demo</li>
</ol>
<blockquote>
<p>由于 layuiAdmin 可采用前后端分离开发模式，因此你无需将其放置在你的服务端 MVC 框架中，你只需要给 layuiAdmin 主入口页面（我们也称之为：宿主页面）进行访问解析，它即可全权完成自身路由的跳转和视图的呈现，而数据层则完全通过服务端提供的异步接口来完成。</p>
</blockquote>
<h3 id="目录说明"><a href="#目录说明" class="headerlink" title="目录说明"></a><strong>目录说明</strong></h3><ul>
<li><p>src&#x2F;</p>
<p>layuiAdmin 源代码，通常用于开发环境（如本地），推荐你在本地开发时，将 .&#x2F;start&#x2F;index.html 中的 layui.css 和 layui.js 的引入路径由 dist 改为 src 目录。</p>
<ul>
<li>src&#x2F;controller&#x2F;：存放 JS 业务模块，即对视图进行事件等交互性处理</li>
<li>src&#x2F;lib&#x2F;：layuiAdmin 的核心模块，一般不推荐修改</li>
<li>src&#x2F;style&#x2F;：存放样式，其中 admin.css是核心样式</li>
<li>src&#x2F;views&#x2F;：存放视图文件。其中 layout.html 是整个框架结构的承载，一般不推荐做大量改动。</li>
<li>src&#x2F;config.js：layuiAdmin 的全局配置文件，可随意修改。</li>
<li>src&#x2F;index.js：layuiAdmin 的入口模块，一般不推荐修改</li>
</ul>
</li>
<li><p>dist&#x2F;<br>通过 gulp 将 layuiAdmin src 目录的源代码进行构建后生成的目录（即：将 JS 和 CSS 文件进行了压缩等处理），通常用于线上环境。关于 gulp 的使用，下文也有介绍。</p>
</li>
<li><p>start&#x2F;<br>存放 layuiAdmin 的入口页面、模拟接口数据、layui</p>
</li>
</ul>
<h3 id="宿主页面"><a href="#宿主页面" class="headerlink" title="宿主页面"></a><strong>宿主页面</strong></h3><p>你所看到的 start&#x2F;index.html 是我们提供好的宿主页面，它是整个单页面的承载，所有的界面都是在这一个页面中完成跳转和渲染的。事实上，宿主页面可以放在任何地方，但是要注意修改里面的<code>&lt;link&gt; &lt;script&gt;</code>的 src 和 layui.config 中 base 的路径。</p>
<h3 id="全局配置"><a href="#全局配置" class="headerlink" title="全局配置"></a><strong>全局配置</strong></h3><p>当你已经顺利在本地预览了 layuiAdmin 后，你一定迫不及待关注更深层的结构。打开 src 目录，你将看到 config.js，里面存储着所有的默认配置。你可以按照实际需求选择性修改，下面是 layuiAdmin 默认提供的配置：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">layui.<span class="title function_">define</span>([<span class="string">&#x27;laytpl&#x27;</span>, <span class="string">&#x27;layer&#x27;</span>, <span class="string">&#x27;element&#x27;</span>, <span class="string">&#x27;util&#x27;</span>], <span class="keyword">function</span>(<span class="params"><span class="built_in">exports</span></span>)&#123;</span><br><span class="line">  <span class="built_in">exports</span>(<span class="string">&#x27;setter&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">container</span>: <span class="string">&#x27;LAY_app&#x27;</span> <span class="comment">//容器ID</span></span><br><span class="line">    ,<span class="attr">base</span>: layui.<span class="property">cache</span>.<span class="property">base</span> <span class="comment">//记录layuiAdmin文件夹所在路径</span></span><br><span class="line">    ,<span class="attr">views</span>: layui.<span class="property">cache</span>.<span class="property">base</span> + <span class="string">&#x27;views/&#x27;</span> <span class="comment">//视图所在目录</span></span><br><span class="line">    ,<span class="attr">entry</span>: <span class="string">&#x27;index&#x27;</span> <span class="comment">//默认视图文件名</span></span><br><span class="line">    ,<span class="attr">engine</span>: <span class="string">&#x27;.html&#x27;</span> <span class="comment">//视图文件后缀名</span></span><br><span class="line">    ,<span class="attr">pageTabs</span>: <span class="literal">false</span> <span class="comment">//是否开启页面选项卡功能。单页版不推荐开启</span></span><br><span class="line">    </span><br><span class="line">    ,<span class="attr">name</span>: <span class="string">&#x27;layuiAdmin Pro&#x27;</span></span><br><span class="line">    ,<span class="attr">tableName</span>: <span class="string">&#x27;layuiAdmin&#x27;</span> <span class="comment">//本地存储表名</span></span><br><span class="line">    ,<span class="attr">MOD_NAME</span>: <span class="string">&#x27;admin&#x27;</span> <span class="comment">//模块事件名</span></span><br><span class="line">    </span><br><span class="line">    ,<span class="attr">debug</span>: <span class="literal">true</span> <span class="comment">//是否开启调试模式。如开启，接口异常时会抛出异常 URL 等信息</span></span><br><span class="line">    </span><br><span class="line">    ,<span class="attr">interceptor</span>: <span class="literal">false</span> <span class="comment">//是否开启未登入拦截</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//自定义请求字段</span></span><br><span class="line">    ,<span class="attr">request</span>: &#123;</span><br><span class="line">      <span class="attr">tokenName</span>: <span class="string">&#x27;access_token&#x27;</span> <span class="comment">//自动携带 token 的字段名。可设置 false 不携带。</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//自定义响应字段</span></span><br><span class="line">    ,<span class="attr">response</span>: &#123;</span><br><span class="line">      <span class="attr">statusName</span>: <span class="string">&#x27;code&#x27;</span> <span class="comment">//数据状态的字段名称</span></span><br><span class="line">      ,<span class="attr">statusCode</span>: &#123;</span><br><span class="line">        <span class="attr">ok</span>: <span class="number">0</span> <span class="comment">//数据状态一切正常的状态码</span></span><br><span class="line">        ,<span class="attr">logout</span>: <span class="number">1001</span> <span class="comment">//登录状态失效的状态码</span></span><br><span class="line">      &#125;</span><br><span class="line">      ,<span class="attr">msgName</span>: <span class="string">&#x27;msg&#x27;</span> <span class="comment">//状态信息的字段名称</span></span><br><span class="line">      ,<span class="attr">dataName</span>: <span class="string">&#x27;data&#x27;</span> <span class="comment">//数据详情的字段名称</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//独立页面路由，可随意添加（无需写参数）</span></span><br><span class="line">    ,<span class="attr">indPage</span>: [</span><br><span class="line">      <span class="string">&#x27;/user/login&#x27;</span> <span class="comment">//登入页</span></span><br><span class="line">      ,<span class="string">&#x27;/user/reg&#x27;</span> <span class="comment">//注册页</span></span><br><span class="line">      ,<span class="string">&#x27;/user/forget&#x27;</span> <span class="comment">//找回密码</span></span><br><span class="line">      ,<span class="string">&#x27;/template/tips/test&#x27;</span> <span class="comment">//独立页的一个测试 demo</span></span><br><span class="line">    ]</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//扩展的第三方模块</span></span><br><span class="line">    ,<span class="attr">extend</span>: [</span><br><span class="line">      <span class="string">&#x27;echarts&#x27;</span>, <span class="comment">//echarts 核心包</span></span><br><span class="line">      <span class="string">&#x27;echartsTheme&#x27;</span> <span class="comment">//echarts 主题</span></span><br><span class="line">    ]</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//主题配置</span></span><br><span class="line">    ,<span class="attr">theme</span>: &#123;</span><br><span class="line">      <span class="comment">//配色方案，如果用户未设置主题，第一个将作为默认</span></span><br><span class="line">      <span class="attr">color</span>: [&#123;</span><br><span class="line">        <span class="attr">main</span>: <span class="string">&#x27;#20222A&#x27;</span> <span class="comment">//主题色</span></span><br><span class="line">        ,<span class="attr">selected</span>: <span class="string">&#x27;#009688&#x27;</span> <span class="comment">//选中色</span></span><br><span class="line">        ,<span class="attr">logo</span>: <span class="string">&#x27;&#x27;</span> <span class="comment">//logo区域背景色</span></span><br><span class="line">        ,<span class="attr">header</span>: <span class="string">&#x27;&#x27;</span> <span class="comment">//头部区域背景色</span></span><br><span class="line">        ,<span class="attr">alias</span>: <span class="string">&#x27;default&#x27;</span> <span class="comment">//默认别名</span></span><br><span class="line">      &#125;] <span class="comment">//为了减少篇幅，更多主题此处不做列举，可直接参考 config.js</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">//初始的颜色索引，对应上面的配色方案数组索引</span></span><br><span class="line">      <span class="comment">//如果本地已经有主题色记录，则以本地记录为优先，除非清除 localStorage（步骤：F12呼出调试工具→Aplication→Local Storage→选中页面地址→layuiAdmin→再点上面的X）</span></span><br><span class="line">      <span class="comment">// 1.0 正式版开始新增</span></span><br><span class="line">      ,<span class="attr">initColorIndex</span>: <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="侧边菜单"><a href="#侧边菜单" class="headerlink" title="侧边菜单"></a><strong>侧边菜单</strong></h3><ul>
<li>在 start&#x2F;json&#x2F;menu.js 文件中，我们放置了默认的侧边菜单数据，你可以去随意改动它。</li>
<li>如果你需要动态加载菜单，你需要将 views&#x2F;layout.html 中的对应地址改成你的真实接口地址<br>侧边菜单最多可支持到三级。无论你采用静态的菜单还是动态的，菜单的数据格式都必须是一段合法的 JSON，且必须符合以下规范：</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;code&quot;</span>: <span class="number">0</span> <span class="comment">//状态码，key 名可以通过 config.js 去重新配置</span></span><br><span class="line">  ,<span class="string">&quot;msg&quot;</span>: <span class="string">&quot;&quot;</span> <span class="comment">//提示信息</span></span><br><span class="line">  ,<span class="string">&quot;data&quot;</span>: [&#123; <span class="comment">//菜单数据，key名可以通过 config.js 去重新配置</span></span><br><span class="line">    <span class="string">&quot;name&quot;</span>: <span class="string">&quot;component&quot;</span> <span class="comment">//一级菜单名称（与视图的文件夹名称和路由路径对应）</span></span><br><span class="line">    ,<span class="string">&quot;title&quot;</span>: <span class="string">&quot;组件&quot;</span> <span class="comment">//一级菜单标题</span></span><br><span class="line">    ,<span class="string">&quot;icon&quot;</span>: <span class="string">&quot;layui-icon-component&quot;</span> <span class="comment">//一级菜单图标样式</span></span><br><span class="line">    ,<span class="string">&quot;jump&quot;</span>: <span class="string">&#x27;&#x27;</span> <span class="comment">//自定义一级菜单路由地址，默认按照 name 解析。一旦设置，将优先按照 jump 设定的路由跳转</span></span><br><span class="line">    ,<span class="string">&quot;spread&quot;</span>: <span class="literal">true</span> <span class="comment">//是否默认展子菜单（1.0.0-beta9 新增）</span></span><br><span class="line">    ,<span class="string">&quot;list&quot;</span>: [&#123; <span class="comment">//二级菜单</span></span><br><span class="line">      <span class="string">&quot;name&quot;</span>: <span class="string">&quot;grid&quot;</span> <span class="comment">//二级菜单名称（与视图的文件夹名称和路由路径对应）</span></span><br><span class="line">      ,<span class="string">&quot;title&quot;</span>: <span class="string">&quot;栅格&quot;</span> <span class="comment">//二级菜单标题</span></span><br><span class="line">      ,<span class="string">&quot;jump&quot;</span>: <span class="string">&#x27;&#x27;</span>  <span class="comment">//自定义二级菜单路由地址</span></span><br><span class="line">      ,<span class="string">&quot;spread&quot;</span>: <span class="literal">true</span> <span class="comment">//是否默认展子菜单（1.0.0-beta9 新增）</span></span><br><span class="line">      ,<span class="string">&quot;list&quot;</span>: [&#123; <span class="comment">//三级菜单</span></span><br><span class="line">        <span class="string">&quot;name&quot;</span>: <span class="string">&quot;list&quot;</span> <span class="comment">//三级菜单名（与视图中最终的文件名和路由对应），如：component/grid/list</span></span><br><span class="line">        ,<span class="string">&quot;title&quot;</span>: <span class="string">&quot;等比例列表排列&quot;</span> <span class="comment">//三级菜单标题</span></span><br><span class="line">      &#125;,&#123;</span><br><span class="line">        <span class="string">&quot;name&quot;</span>: <span class="string">&quot;mobile&quot;</span></span><br><span class="line">        ,<span class="string">&quot;title&quot;</span>: <span class="string">&quot;按移动端排列&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>TIPS：实际运用时，切勿出现上述中的注释，否则将不是合法的 JSON ，会出现解析错误。<br>需要注意的是以下几点：</p>
</blockquote>
<ol>
<li><p>当任意级菜单有子菜单，点击该菜单都只是收缩和展开操作，而并不会跳转，只有没有子菜单的菜单才被允许跳转。</p>
</li>
<li><p>菜单的路由地址默认是按照菜单层级的 name 来设定的。</p>
<p>我们假设一级菜单的 name 是：a，二级菜单的是：b，三级菜单的 name 是 c，那么：</p>
<ul>
<li>三级菜单最终的路由地址就是：<code>/a/b/c</code></li>
<li>如果二级菜单没有三级菜单，那么二级菜单就是最终路由，地址就是：<code>/a/b/</code></li>
<li>如果一级菜单没有二级菜单，那么一级菜单就是最终路由，地址就是：<code>/a/</code></li>
</ul>
</li>
<li><p>但如果你设置了 参数 jump，那么就会优先读取 jump 设定的路由地址，如：<code>&quot;jump&quot;: &quot;/user/set&quot;</code></p>
</li>
</ol>
<hr>
<h1 id="路由"><a href="#路由" class="headerlink" title="路由"></a>路由</h1><p>layuiAdmin 的路由是采用 <code>location.hash</code> 的机制，即路由地址是放在 <code>./#/</code> 后面，并通过 layui 自带的方法：<code>layui.router()</code> 来进行解析。每一个路由都对应一个真实存在的视图文件，且路由地址和视图文件的路径是一致的（相对 <code>views</code>目录）。因此，你不再需要通过配置服务端的路由去访问一个页面，也无需在 layuiAdmin 内部代码中去定义路由，而是直接通过 layuiAdmin 的前端路由去访问，即可匹配相应目录的视图，从而呈现出页面结果。</p>
<h3 id="路由规则"><a href="#路由规则" class="headerlink" title="路由规则"></a><strong>路由规则</strong></h3><blockquote>
<p>.&#x2F;#&#x2F;path1&#x2F;path2&#x2F;path3&#x2F;key1&#x3D;value1&#x2F;key2&#x3D;value2…</p>
</blockquote>
<p>一个实际的示例：</p>
<blockquote>
<p>.&#x2F;#&#x2F;user&#x2F;set<br>.&#x2F;#&#x2F;user&#x2F;set&#x2F;uid&#x3D;123&#x2F;type&#x3D;1#xxx（下面将以这个为例继续讲解）</p>
</blockquote>
<p>当你需要对路由结构进行解析时，你只需要通过 layui 内置的方法 layui.router() 即可完成。如上面的路由解析出来的结果是：</p>
<blockquote>
<p>{<br>path: [‘user’,’set’]<br>,search: {uid: 123, type: 1}<br>,href: ‘user&#x2F;set&#x2F;uid&#x3D;123&#x2F;type&#x3D;1’<br>,hash: ‘xxx’<br>}</p>
</blockquote>
<p>可以看到，不同的结构会自动归纳到相应的参数中，其中：</p>
<blockquote>
<ul>
<li>path：存储的是路由的目录结构</li>
<li>search：存储的是路由的参数部分</li>
<li>href：存储的是 layuiAdmin 的完整路由地址</li>
<li>hash：存储的是 layuiAdmin 自身的锚记，跟系统自带的 location.hash 有点类似</li>
</ul>
</blockquote>
<p>通过<code>layui.router()</code> 得到路由对象后，你就可以对页面进行个性化操作、异步参数传值等等。如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//在 JS 中获取路由参数</span></span><br><span class="line"><span class="keyword">var</span> router = layui.<span class="title function_">router</span>();</span><br><span class="line">admin.<span class="title function_">req</span>(&#123;</span><br><span class="line">  <span class="attr">url</span>: <span class="string">&#x27;xxx&#x27;</span></span><br><span class="line">  ,<span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">uid</span>: router.<span class="property">search</span>.<span class="property">uid</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--  在动态模板中获取路由参数 --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/html&quot;</span> <span class="attr">template</span> <span class="attr">lay-url</span>=<span class="string">&quot;./xxx/?uid=&#123;&#123; layui.router().search.uid &#125;&#125;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  …</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">&lt;!-- 或 --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/html&quot;</span> <span class="attr">template</span> <span class="attr">lay-url</span>=<span class="string">&quot;./xxx/&quot;</span> <span class="attr">lay-data</span>=<span class="string">&quot;&#123;uid:&#x27;&#123;&#123; layui.router().search.uid &#125;&#125;&#x27;&#125;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  …</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<h3 id="路由跳转"><a href="#路由跳转" class="headerlink" title="路由跳转"></a><strong>路由跳转</strong></h3><p>通过上文的路由规则，你已经大致清楚了 layuiAdmin 路由的基本原理和解析方法。那么如何完成路由的跳转呢？</p>
<ol>
<li>在视图文件的 HTML 代码中，通过对任意元素设定<code>lay-href=&quot;/user/set/uid=123/type=1&quot;</code>，好处是：任意元素都可以触发跳转。缺点是：只能在浏览器当前选项卡完成跳转（注意：不是 layuiAdmin 的选项卡）</li>
<li>直接对 a 标签设定 href，如： <code>&lt;a href=&quot;#/user/set&quot;&gt;text&lt;/a&gt;</code> 。好处是：你可以通过设定<code>target=&quot;_blank&quot;</code>来打开一个浏览器新选项卡。缺点是：只能设置 a 标签，且前面必须加 &#x2F;#&#x2F;</li>
<li>在 JS 代码中，还可通过 <code>location.hash = &#39;/user/set&#39;</code>; 来跳转。前面无需加 #，它会自动追加。</li>
</ol>
<h3 id="路由结尾"><a href="#路由结尾" class="headerlink" title="路由结尾"></a><strong>路由结尾</strong></h3><p>在路由结尾部分出现的 &#x2F; 与不出现，是两个完全不同的路由。比如下面这个：</p>
<ol>
<li>user&#x2F;set<br>读取的视图文件是：.views&#x2F;user&#x2F;set.html</li>
<li>user&#x2F;set&#x2F;<br>读取的视图文件是：.&#x2F;views&#x2F;user&#x2F;set&#x2F;index.html （TIPS：这里的 index.html 即是目录下的默认主视图，下文会有讲解）</li>
</ol>
<p>因此一定要注意结尾处的 &#x2F;，避免视图读取错误。</p>
<h1 id="视图"><a href="#视图" class="headerlink" title="视图"></a>视图</h1><p>这或许是你应用 layuiAdmin 时的主要焦点，在开发过程中，你的大部分精力都可能会聚焦在这里。它取代了服务端 MVC 架构中的 view 层，使得应用开发变得更具扩展性。因此如果你采用 layuiAdmin 的 SPA（单页应用）模式，请务必要抛弃服务端渲染视图的思想，让页面的控制权限重新回归到前端吧！</p>
<blockquote>
<p><strong>views</strong>目录存放的正是视图文件，你可以在该目录添加任意的新目录和新文件，通过对应的路由即可访问。</p>
</blockquote>
<p>注意：如果是单页面模式，视图文件通常是一段 HTML 碎片，而不能是一个完整的 html 代码结构。</p>
<h3 id="视图与路由的关系"><a href="#视图与路由的关系" class="headerlink" title="视图与路由的关系"></a><strong>视图与路由的关系</strong></h3><p>每一个视图文件，都对应一个路由。其中<code>index.html</code>是默认文件（你也可以通过 <code>config.js</code> 去重新定义）。视图文件的所在目录决定了路由的访问地址，如：</p>
<table>
<thead>
<tr>
<th>视图路径</th>
<th>对应的路由地址</th>
</tr>
</thead>
<tbody><tr>
<td>.&#x2F;views&#x2F;user&#x2F;index.html</td>
<td>&#x2F;user&#x2F;</td>
</tr>
<tr>
<td>.&#x2F;views&#x2F;user.html</td>
<td>&#x2F;user</td>
</tr>
<tr>
<td>.&#x2F;views&#x2F;user&#x2F;set&#x2F;index.html</td>
<td>&#x2F;user&#x2F;set&#x2F;</td>
</tr>
<tr>
<td>.&#x2F;views&#x2F;user&#x2F;set.html</td>
<td>&#x2F;user&#x2F;set</td>
</tr>
<tr>
<td>.&#x2F;views&#x2F;user&#x2F;set&#x2F;base.html</td>
<td>&#x2F;user&#x2F;set&#x2F;base</td>
</tr>
</tbody></table>
<p>通过上述的表格列举的对应关系，可以总结出：</p>
<ul>
<li>当视图文件是 index.html，那么路由地址就是它的上级目录（相对 views），以 <code>/</code> 结尾</li>
<li>当视图文件不是 index.html，那么路由地址就是它的上级目录+视图文件名，不以 <code>/</code> 结尾</li>
</ul>
<blockquote>
<p>值得注意的是：路由路径并非最多只能三级，它可以无限极。但对应的视图也必须存放在相应的层级目录下</p>
</blockquote>
<h3 id="视图中加载-JS-模块"><a href="#视图中加载-JS-模块" class="headerlink" title="视图中加载 JS 模块"></a><strong>视图中加载 JS 模块</strong></h3><p>在视图文件中，除了写 HTML，也可以写 JavaScript 代码。如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=“<span class="variable constant_">LAY</span>-demo-hello”&gt;<span class="title class_">Hello</span> layuiAdmin&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">layui.<span class="title function_">use</span>(<span class="string">&#x27;admin&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">var</span> $ = layui.<span class="property">jquery</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  admin.<span class="title function_">popup</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">content</span>: $(<span class="string">&#x27;#LAY-demo-hello&#x27;</span>).<span class="title function_">html</span>()</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>如果该视图对应的 JS 代码量太大，我们更推荐你在 <code>controller</code>目录下新增一个业务模块，并在视图中直接 <code>layui.use</code> 去加载该模块。下面以控制台主页 <code>index.html</code>为例：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;html区域&lt;div&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//加载 controller 目录下的对应模块</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">/*</span></span></span></span><br><span class="line"><span class="comment"><span class="language-javascript"><span class="language-xml">  小贴士：</span></span></span></span><br><span class="line"><span class="comment"><span class="language-javascript"><span class="language-xml">    这里 console 模块对应 的 console.js 并不会重复加载，</span></span></span></span><br><span class="line"><span class="comment"><span class="language-javascript"><span class="language-xml">    然而该页面的视图可能会重新插入到容器，那如何保证脚本能重新控制视图呢？有两种方式：</span></span></span></span><br><span class="line"><span class="comment"><span class="language-javascript"><span class="language-xml">      1): 借助 layui.factory 方法获取 console 模块的工厂（回调函数）给 layui.use</span></span></span></span><br><span class="line"><span class="comment"><span class="language-javascript"><span class="language-xml">      2): 直接在 layui.use 方法的回调中书写业务代码，即:</span></span></span></span><br><span class="line"><span class="comment"><span class="language-javascript"><span class="language-xml">          layui.use(&#x27;console&#x27;, function()&#123; </span></span></span></span><br><span class="line"><span class="comment"><span class="language-javascript"><span class="language-xml">            //同 console.js 中的 layui.define 回调中的代码 </span></span></span></span><br><span class="line"><span class="comment"><span class="language-javascript"><span class="language-xml">          &#125;);</span></span></span></span><br><span class="line"><span class="comment"><span class="language-javascript"><span class="language-xml">          </span></span></span></span><br><span class="line"><span class="comment"><span class="language-javascript"><span class="language-xml">  这里我们采用的是方式1。其它很多视图中采用的其实都是方式2，因为更简单些，也减少了一个请求数。</span></span></span></span><br><span class="line"><span class="comment"><span class="language-javascript"><span class="language-xml">  </span></span></span></span><br><span class="line"><span class="comment"><span class="language-javascript"><span class="language-xml">*/</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">layui.<span class="title function_">use</span>(<span class="string">&#x27;console&#x27;</span>, layui.<span class="title function_">factory</span>(<span class="string">&#x27;console&#x27;</span>));</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>当视图被渲染后，layui.factory 返回的函数也会被执行，从而保证在不重复加载 JS 模块文件的前提下，保证脚本能重复执行。</p>
<hr>
<h1 id="动态模板"><a href="#动态模板" class="headerlink" title="动态模板"></a><strong>动态模板</strong></h1><p>layuiAdmin 的视图是一个“动静结合”的载体，除了常规的静态模板，你当然还可以在视图中存放动态模板，因此它可谓是焦点中的焦点。</p>
<h3 id="定义模板"><a href="#定义模板" class="headerlink" title="定义模板"></a><strong>定义模板</strong></h3><p>在视图文件中，通过下述规则定义模板：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">&quot;text/html&quot;</span> template&gt;</span><br><span class="line">  &lt;!-- 动态模板碎片 --&gt;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>下面是一个简单的例子：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">&quot;text/html&quot;</span> template&gt;</span><br><span class="line">  当前 layuiAdmin 的版本是：&#123;&#123; layui.<span class="property">admin</span>.<span class="property">v</span> &#125;&#125;</span><br><span class="line">  路由地址：&#123;&#123; layui.<span class="title function_">router</span>().<span class="property">href</span> &#125;&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>在不对动态模板设定数据接口地址的情况下，它能读取到全局对象。但更多时候，一个动态模板应该是对应一个接口地址，如下所示：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">&quot;text/html&quot;</span> template lay-url=<span class="string">&quot;接口地址&quot;</span>&gt;</span><br><span class="line">    我叫：&#123;&#123; d.<span class="property">data</span>.<span class="property">username</span> &#125;&#125;</span><br><span class="line">    &#123;&#123;# <span class="keyword">if</span>(d.<span class="property">data</span>.<span class="property">sex</span> === <span class="string">&#x27;男&#x27;</span>)&#123; &#125;&#125;</span><br><span class="line">        公的</span><br><span class="line">    &#123;&#123;# &#125; <span class="keyword">else</span> &#123; &#125;&#125;</span><br><span class="line">        母的</span><br><span class="line">    &#123;&#123;# &#125; &#125;&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>模板中的 <code>d</code> 对应的是你接口返回的 json 转化后的一维对象，如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;code&quot;</span>: <span class="number">0</span></span><br><span class="line">  ,<span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;username&quot;</span>: <span class="string">&quot;贤心&quot;</span></span><br><span class="line">    ,<span class="string">&quot;sex&quot;</span>: <span class="string">&quot;男&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>那么，上述动态模板最终输出的结果就是：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">我叫：贤心</span><br><span class="line">公的</span><br></pre></td></tr></table></figure>

<h3 id="模板基础属性"><a href="#模板基础属性" class="headerlink" title="模板基础属性"></a><strong>模板基础属性</strong></h3><p>动态模板支持以下基础属性</p>
<ul>
<li>lay-url<br>用于绑定模板的数据接口地址，支持动态模板解析，如：</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">&quot;text/html&quot;</span> template lay-url=<span class="string">&quot;https://api.xxx.com?id=&#123;&#123; layui.router().search.id &#125;&#125;&quot;</span>&gt;</span><br><span class="line">  &lt;!-- 动态模板碎片 --&gt;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>lay-type<br>用于设定模板的接口请求类型（默认：get），如：</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">&quot;text/html&quot;</span> template lay-url=<span class="string">&quot;接口地址&quot;</span> lay-type=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">  &lt;!-- 动态模板碎片 --&gt;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>lay-data<br>用于定义接口请求的参数，其值是一个 JavaScript object 对象，同样支持动态模板解析，如：</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">&quot;text/html&quot;</span> template lay-url=<span class="string">&quot;接口地址&quot;</span> lay-data=<span class="string">&quot;&#123;id: &#x27;&#123;&#123; layui.router().search.id &#125;&#125;&#x27;, type: 1&#125;&quot;</span>&gt;</span><br><span class="line">  &lt;!-- 动态模板碎片 --&gt;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>lay-headers<br>用户定义接口请求的 Request Headers 参数，用法与 lay-data 的完全类似，支持动态模板解析。</li>
<li>lay-done<br>接口请求完毕并完成视图渲染的回调脚本，里面支持写任意的 JavaScript 语句。事实上它是一个封闭的函数作用域，通过给 Function 实例返回的函数传递一个参数 d，用于得到接口返回的数据：</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">&quot;text/html&quot;</span> template lay-url=<span class="string">&quot;接口地址&quot;</span> lay-done=<span class="string">&quot;console.log(d);&quot;</span>&gt;</span><br><span class="line">  &lt;!-- 动态模板碎片 --&gt;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>很多时候，你在动态模板中可能会放入一些类似于 layui 的 form 元素，而有些控件需要执行 form.render() 才会显示，这时，你可以对 lay-done 赋值一个全局函数，如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">&quot;text/html&quot;</span> template lay-url=<span class="string">&quot;接口地址&quot;</span> lay-done=<span class="string">&quot;layui.data.done(d);&quot;</span>&gt;</span><br><span class="line">   <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-form&quot;</span> <span class="attr">lay-filter</span>=<span class="string">&quot;LAY-filter-demo-form&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">     <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">title</span>=<span class="string">&quot;复选框&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">&lt;!--  注意：别看眼花了，下面可不是动态模板，而是 <span class="variable constant_">JS</span> 脚本区域 --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">layui.<span class="property">data</span>.<span class="property">done</span> = <span class="keyword">function</span>(<span class="params">d</span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  layui.<span class="title function_">use</span>([<span class="string">&#x27;form&#x27;</span>], <span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">var</span> form = layui.<span class="property">form</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">     form.<span class="title function_">render</span>(<span class="literal">null</span>, <span class="string">&#x27;LAY-filter-demo-form&#x27;</span>); <span class="comment">//渲染该模板下的动态表单</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>TIPS：</p>
<blockquote>
<p>如果模板渲染完毕需要处理过多的交互，我们强烈推荐你采用上述的方式定义一个全局函数赋值给 lay-done，会极大地减少维护成本。<br>无需担心该全局函数的冲突问题，该函数是一次性的。其它页面即便声明了一个同样的函数，也只是用于新的视图，丝毫不会对之前的视图造成任何影响。<br>layui.data.done 中的 done 可以随意命名，但需与 lay-done 的赋值对应上。</p>
</blockquote>
<p>模板语法</p>
<blockquote>
<p>动态模板基于 layui 的 laytpl 模块，详细语法可见：<br><a target="_blank" rel="noopener" href="http://www.layui.com/doc/modules/laytpl.html#syntax">http://www.layui.com/doc/modules/laytpl.html#syntax</a></p>
</blockquote>
<hr>
<h1 id="登录与接口鉴权"><a href="#登录与接口鉴权" class="headerlink" title="登录与接口鉴权"></a><strong>登录与接口鉴权</strong></h1><p>由于 layuiAdmin 接管了视图层，所以不必避免可能会与服务端分开部署，这时你有必要了解一下 layuiAdmin 默认提供的：从 登录 到 接口鉴权，再到 注销 的整个流程。</p>
<h3 id="登录拦截器"><a href="#登录拦截器" class="headerlink" title="登录拦截器"></a><strong>登录拦截器</strong></h3><p>进入登入页面登入成功后，会在 localStorage 的本地表中写入一个字段。如： access_token （名称可以在 config.js 自定义）。拦截器判断没有 access_token 时，则会跳转到登入页。尽管可以通过伪造一个假的 access_token 绕过视图层的拦截，但在请求接口时，会自动带上 access_token，服务端应再次做一层校验。</p>
<h3 id="流程"><a href="#流程" class="headerlink" title="流程"></a><strong>流程</strong></h3><ol>
<li>打开 <code>config.js</code> ，将 <code>interceptor</code>参数设置为 <code>true</code>（该参数为 1.0.0-beta6 开始新增）。那么，当其未检查到 <code>access_token</code>值时，会强制跳转到登录页面，以获取 access_token。</li>
<li>打开登录对应的视图文件 <code>views/user/login.html</code>，在代码最下面，你将看到一段已经写好的代码，你需要的是将接口地址改为服务端的真实接口，并返回 <code>access_token</code>值。</li>
<li>layuiAdmin 会将服务端返回的 <code>access_token</code>值进行本地存储，这时你会发现 layuiAdmin 不再强制跳转到登录页面。并在后面每次请求服务端接口时，都会自动在参数和 <code>Request Headers</code> 中带上 <code>access_token</code>，以便服务端进行鉴权。</li>
<li>若鉴权成功，顺利返回数据；若鉴权失败，服务端的 <code>code</code>应返回 <code>1001</code>（可在 config.js 自定义） ， layuiAdmin 将会自动清空本地无效 token 并跳转到登入页。</li>
<li>退出登录：重新打开 <code>controller/common.js</code>，搜索 <code>logout</code>，配上注销接口即可。</li>
<li></li>
</ol>
<blockquote>
<p>如果是在其它场景请求的接口，如：<code>table.render()</code>，那么你需要获取本地存储的 token 赋值给接口参数，如下：</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//设置全局 table 实例的 token（这样一来，所有 table 实例均会有效）</span></span><br><span class="line">table.<span class="title function_">set</span>(&#123;</span><br><span class="line">  <span class="attr">headers</span>: &#123; <span class="comment">//通过 request 头传递</span></span><br><span class="line">    <span class="attr">access_token</span>: layui.<span class="title function_">data</span>(<span class="string">&#x27;layuiAdmin&#x27;</span>).<span class="property">access_token</span></span><br><span class="line">  &#125;</span><br><span class="line">  ,<span class="attr">where</span>: &#123; <span class="comment">//通过参数传递</span></span><br><span class="line">    <span class="attr">access_token</span>: layui.<span class="title function_">data</span>(<span class="string">&#x27;layuiAdmin&#x27;</span>).<span class="property">access_token</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"><span class="comment">//设置单个 table 实例的 token</span></span><br><span class="line">table.<span class="title function_">render</span>(&#123;</span><br><span class="line">  <span class="attr">elem</span>: <span class="string">&#x27;#xxxx&#x27;</span></span><br><span class="line">  ,<span class="attr">url</span>: <span class="string">&#x27;url&#x27;</span></span><br><span class="line">  ,<span class="attr">where</span>: &#123;</span><br><span class="line">    <span class="attr">access_token</span>: layui.<span class="title function_">data</span>(<span class="string">&#x27;layuiAdmin&#x27;</span>).<span class="property">access_token</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//,headers: &#123;&#125;</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>事实上，layuiAdmin 的所有 Ajax 请求都是采用 <code>admin.req(options)</code>，它会自动传递 <code>access_token</code>，因此推荐你在 JS 执行 Ajax 请求时直接使用它。其中参数 *options *和 <code>$.ajax(options)</code> 的参数完全一样。</p>
<h3 id="接口鉴权"><a href="#接口鉴权" class="headerlink" title="接口鉴权"></a><strong>接口鉴权</strong></h3><p>我们推荐服务端遵循 <strong>JWT</strong>（JSON Web Token） 标准进行鉴权。对 JWT 不甚了解的同学，可以去搜索一些相关资料，会极大地增加应用的可扩展性。当然，你也可以直接采用传统的 cookie &#x2F; session 机制。</p>
<hr>
<h1 id="基础方法"><a href="#基础方法" class="headerlink" title="基础方法"></a><strong>基础方法</strong></h1><ul>
<li><strong>config 模块</strong></li>
</ul>
<blockquote>
<p>你可以在任何地方通过 layui.setter 得到 config.js 中的配置信息</p>
</blockquote>
<ul>
<li><strong>admin 模块</strong></li>
</ul>
<blockquote>
<p>var admin &#x3D; layui.admin;</p>
</blockquote>
<ul>
<li><strong>admin.req(options)</strong><br>Ajax 请求，用法同 $.ajax(options)，只是该方法会进行错误处理和 token 的自动传递</li>
<li>admin.screen()<br>获取屏幕类型，根据当前屏幕大小，返回 0 - 3 的值<br>0: 低于768px的屏幕<br>1：768px到992px之间的屏幕<br>2：992px到1200px之间的屏幕<br>3：高于1200px的屏幕</li>
<li><strong>admin.exit()</strong><br>清除本地 token，并跳转到登入页</li>
<li><strong>admin.sideFlexible(status)</strong><br>侧边伸缩。status 为 null：收缩；status为 “spread”：展开</li>
<li><strong>admin.on(eventName, callback)</strong><br>事件监听，下文会有讲解</li>
<li><strong>admin.popup(options)</strong><br>弹出一个 layuiAdmin 主题风格的 layer 层，参数 options 跟 layer.open(options) 完全相同</li>
<li><strong>admin.popupRight(options)</strong><br>在屏幕右侧呼出一个面板层。options 同上。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">admin.<span class="title function_">popupRight</span>(&#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="string">&#x27;LAY-popup-right-new1&#x27;</span> <span class="comment">//定义唯一ID，防止重复弹出</span></span><br><span class="line">  ,<span class="attr">success</span>: <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="comment">//将 views 目录下的某视图文件内容渲染给该面板</span></span><br><span class="line">    layui.<span class="title function_">view</span>(<span class="variable language_">this</span>.<span class="property">id</span>).<span class="title function_">render</span>(<span class="string">&#x27;视图文件所在路径&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>admin.resize(callback)</strong><br>窗口 resize 事件处理，我们推荐你使用该方法取代 jQuery 的 resize 事件，以避免多页面标签下可能存在的冲突。</li>
<li><strong>admin.fullScreen()</strong><br>全屏</li>
<li><strong>admin.exitScreen()</strong><br>退出全屏</li>
<li><strong>admin.events</strong><ul>
<li><strong>admin.events.refresh()</strong><br>刷新当前右侧区域</li>
<li><strong>admin.events.closeThisTabs()</strong><br>关闭当前标签页</li>
<li><strong>admin.events.closeOtherTabs()</strong><br>关闭其它标签页</li>
<li><strong>admin.events.closeAllTabs()</strong><br>关闭全部标签页</li>
</ul>
</li>
<li><strong>view 模块</strong></li>
</ul>
<blockquote>
<p>var view &#x3D; layui.view;</p>
</blockquote>
<ul>
<li><strong>view(id)</strong><br>获取指定容器，并返回一些视图渲染的方法，如：</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//渲染视图，viewPath 即为视图路径</span></span><br><span class="line"><span class="title function_">view</span>(<span class="string">&#x27;id&#x27;</span>).<span class="title function_">render</span>(viewPath).<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="comment">//视图文件请求完毕，视图内容渲染前的回调</span></span><br><span class="line">&#125;).<span class="title function_">done</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">   <span class="comment">//视图文件请求完毕和内容渲染完毕的回调</span></span><br><span class="line">&#125;); </span><br><span class="line"></span><br><span class="line"><span class="comment">//直接向容器插入 html，tpl 为 模板字符；data 是传入的数据。该方法会自动完成动态模板解析</span></span><br><span class="line"><span class="title function_">view</span>(<span class="string">&#x27;id&#x27;</span>).<span class="title function_">send</span>(tpl, data); </span><br></pre></td></tr></table></figure>

<p>另外，<code>render</code>方法支持动态传参，以用于视图内容接受。如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">admin.<span class="title function_">popup</span>(&#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="string">&#x27;LAY-popup-test1&#x27;</span></span><br><span class="line">  ,<span class="attr">success</span>: <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="title function_">view</span>(<span class="variable language_">this</span>.<span class="property">id</span>).<span class="title function_">render</span>(<span class="string">&#x27;视图文件所在路径&#x27;</span>, &#123;</span><br><span class="line">       <span class="attr">id</span>: <span class="number">123</span> <span class="comment">//这里的 id 值你可以在一些事件中动态获取（如 table 模块的编辑）</span></span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--那么，在视图文件中，你可以在动态模板中通过 &#123;&#123; [d.params.xxx](http://d.params.xxx/) &#125;&#125; 得到传入的参数，如：--&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">&quot;text/html&quot;</span> template lay-url=<span class="string">&quot;http://api.com?id=&#123;&#123; d.params.id &#125;&#125;&quot;</span>&gt;</span><br><span class="line">  配置了接口的动态模板，且接口动态获取了 render 传入的参数：&#123;&#123; d.<span class="property">params</span>.<span class="property">id</span> &#125;&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/html&quot;</span> <span class="attr">template</span>&gt;</span><span class="language-handlebars"><span class="language-xml"></span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">  也可以直接获取：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">name</span>=<span class="string">&quot;id&quot;</span> <span class="attr">value</span>=<span class="string">&quot;</span></span></span><span class="template-variable">&#123;&#123; <span class="name">d.params.id</span> &#125;&#125;</span><span class="language-xml"><span class="tag"><span class="string">&quot;</span>&gt;</span></span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml"></span></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p><strong>而如果是在 JS 语句中去获取模板传递过来的变量，可以借助动态模板的 lay-done 属性去实现，如:</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">&quot;text/html&quot;</span> template lay-done=<span class="string">&quot;layui.data.sendParams(d.params)&quot;</span>&gt;</span><br><span class="line">  </span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>然后在 JS 语句中通过执行动态模板 lay-done 中对应的方法得到对应的参数值：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="comment">//定义一个 lay-done 对应的全局方法，以供动态模板执行</span></span><br><span class="line">layui.<span class="property">data</span>.<span class="property">sendParams</span> = <span class="keyword">function</span>(<span class="params">params</span>)&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(params.<span class="property">id</span>) <span class="comment">//得到传递过来的 id 参数（或其他参数）值</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment">//通过得到的参数值，做一些你想做的事</span></span><br><span class="line">  <span class="comment">//…</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">//若需用到 layui 组件，layui.use 需写在该全局方法里面，如：</span></span><br><span class="line">  layui.<span class="title function_">use</span>([<span class="string">&#x27;table&#x27;</span>], <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">var</span> table = layui.<span class="property">table</span>;</span><br><span class="line">    table.<span class="title function_">render</span>(&#123;</span><br><span class="line">      <span class="attr">elem</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">      ,<span class="attr">url</span>: <span class="string">&#x27;url?id=&#x27;</span>+ params.<span class="property">id</span></span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意：上述实现需保证 layuiAdmin 为 1.2.0+&#96;</p>
</blockquote>
<p>总之，驾驭好<code>view().render().done(callback)</code> 对您的项目开发至关重要。</p>
<hr>
<h1 id="ID唯一性"><a href="#ID唯一性" class="headerlink" title="ID唯一性"></a><strong>ID唯一性</strong></h1><p>如果你开启了标签页功能，请务必注意 ID 的冲突，尤其是在你自己绑定事件的情况。ID 的命令可以遵循以下规则来规避冲突：</p>
<blockquote>
<p>LAY-路由-任意名</p>
</blockquote>
<p>以消息中心页面为例，假设它的路由为：<code>/app/message/</code>，那么 ID 应该命名为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;button class=&quot;layui-btn&quot; id=&quot;LAY-app-message-del&quot;&gt;删除&lt;/button&gt;</span><br></pre></td></tr></table></figure>

<hr>
<h1 id="实用组件"><a href="#实用组件" class="headerlink" title="实用组件"></a><strong>实用组件</strong></h1><h3 id="Hover-提示层"><a href="#Hover-提示层" class="headerlink" title="Hover 提示层"></a><strong>Hover 提示层</strong></h3><p>通过对元素设置 lay-tips&#x3D;”提示内容” 来开启一个 hover 提示，如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;i <span class="keyword">class</span>=<span class="string">&quot;layui-icon layui-icon-tips&quot;</span> lay-tips=<span class="string">&quot;要支持的噢&quot;</span> lay-offset=<span class="string">&quot;5&quot;</span>&gt;&lt;/i&gt;</span><br></pre></td></tr></table></figure>

<p>其中<code>lay-offset</code>用于定于水平偏移距离（单位px），以调整箭头让其对准元素</p>
<hr>
<h1 id="事件监听"><a href="#事件监听" class="headerlink" title="事件监听"></a><strong>事件监听</strong></h1><ul>
<li><strong>hash</strong><br>监听路由地址改变</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 下述中的 xxx 可随意定义，不可与已经定义的 hash 事件同名，否则会覆盖上一事件</span></span><br><span class="line">admin.<span class="title function_">on</span>(<span class="string">&#x27;hash(xxx)&#x27;</span>, <span class="keyword">function</span>(<span class="params">router</span>)&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(router); <span class="comment">//得到路由信息</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>side</strong><br>监听侧边伸缩</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 下述中的 xxx 可随意定义，不可与已经定义的 side 事件同名，否则会覆盖上一事件</span></span><br><span class="line">admin.<span class="title function_">on</span>(<span class="string">&#x27;side(xxx)&#x27;</span>, <span class="keyword">function</span>(<span class="params">obj</span>)&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(obj.<span class="property">status</span>); <span class="comment">//得到伸缩状态：spread 为展开状态，其它值为收缩状态</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<hr>
<h1 id="兼容性"><a href="#兼容性" class="headerlink" title="兼容性"></a><strong>兼容性</strong></h1><p>layuiAdmin 使用到了 layui 的栅格系统，而栅格则是基于浏览器的媒体查询。ie8、9不支持。<br>所以要在宿主页面（如 start&#x2F;index.html ）加上下面这段保证兼容：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 让<span class="title class_">IE8</span>/<span class="number">9</span>支持媒体查询，从而兼容栅格 --&gt;</span><br><span class="line">&lt;!--[<span class="keyword">if</span> lt <span class="variable constant_">IE</span> <span class="number">9</span>]&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.staticfile.org/html5shiv/r29/html5.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.staticfile.org/respond.js/1.4.2/respond.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;![endif]--&gt;  </span><br></pre></td></tr></table></figure>

<hr>
<h1 id="缓存问题"><a href="#缓存问题" class="headerlink" title="缓存问题"></a><strong>缓存问题</strong></h1><p>由于单页面版本的视图文件和静态资源模块都是动态加载的，所以可能存在浏览器的本地缓存问题，事实上我们也考虑到这个，因此，为了避免改动后的文件未及时生效，你只需在入口页面（默认为<code>start/index.html</code>）中，找到 <code>layui.config</code> ，修改其 <code>version</code>的值即可。</p>
<p>我们推荐你分场景来更新缓存：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">* 场景一：如果项目是在本地开发。你可以设置 version 为动态毫秒数，如：</span><br><span class="line"><span class="attr">version</span>: <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getTime</span>() <span class="comment">//这样你每次刷新页面，都会更新一次缓存</span></span><br><span class="line">* 场景二：如果项目是在线上运行。建议你手工更新 version，如：</span><br><span class="line"><span class="attr">version</span>: <span class="string">&#x27;1.0.0&#x27;</span> <span class="comment">//每次发布项目时，跟着改动下该属性值即可更新静态资源的缓存</span></span><br></pre></td></tr></table></figure>

<hr>
<h1 id="升级事项"><a href="#升级事项" class="headerlink" title="升级事项"></a><strong>升级事项</strong></h1><p>从官网更新资源包后，除了 src 和 dist 目录需要注意一下，其它目录和文件均可覆盖，下面以 src 为例（dist 由于是 src 构建后生成的目录，所以本质是和 src 一样的）<br><strong>src 目录下可以直接覆盖的有：</strong></p>
<blockquote>
<ul>
<li>src&#x2F;lib&#x2F;</li>
<li>src&#x2F;style&#x2F;</li>
<li>src&#x2F;index.js</li>
</ul>
</blockquote>
<p><strong>需要灵活调配的有：</strong></p>
<blockquote>
<ul>
<li>src&#x2F;controller&#x2F;</li>
<li>src&#x2F;views&#x2F;</li>
<li>src&#x2F;config.js</li>
</ul>
</blockquote>
<p>如果没有改动默认配置，事实上 config.js 也可以覆盖升级<br>开发过程中，建议同时运行两个 layuiAdmin 。一个是已经实际运用的，一个是 layuiAdmin 本身的 Demo。以便从 Demo 中获取参考和提取示例。</p>
<hr>
<h1 id="源码构建"><a href="#源码构建" class="headerlink" title="源码构建"></a><strong>源码构建</strong></h1><blockquote>
<p>当你在 src 目录完成开发后，你可通过 gulp 对 src 源码进行自动化构建，以生成用于线上环境的 dist 目录。并在入口页面中的 layui.config 的 base 参数指向 dist。</p>
</blockquote>
<p>在资源包中根目录下看到的 gulpfile.js 是 layuiAdmin 写好的任务脚本，package.json 是任务配置文件，你只需按照以下步骤：</p>
<ol>
<li>step1：确保你的电脑已经安装好了 Node.js，如果未安装，可去官网下载安装</li>
<li>step2: 命令行安装 gulp：npm install gulp -g</li>
<li>step3：切换到 layuiAdmin 项目根目录（即 gulpfile.js 所在目录），命令行安装任务所依赖的包：npm install</li>
</ol>
<p><strong>安装完成后，后续只需直接执行命令：gulp 即可完成 src 到 dist 目录的构建</strong></p>
<p><a target="_blank" rel="noopener" href="https://fengfeng.lanzoux.com/iYTvgkmgf5i">下载LayuiAdmin</a></p>
</div><div class="tags"><a href="/peaky/tags/%E7%BC%96%E7%A8%8B/"><i class="fa fa-tag"></i>编程</a></div><div class="post-nav"><a class="pre" href="/peaky/2021/01/23/44737761.html">小米手机刷机入门指北（小白向）</a><a class="next" href="/peaky/2021/01/20/23128346.html">如何检索文献</a></div><div id="vcomment"></div><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//cdn.jsdelivr.net/gh/AshinWang/SimpleValine@v0.1/SimpleValine.min.js"></script><script>var notify = 'false' == 'true' ? true : false;
var verify = 'false' == 'true' ? true : false;
var GUEST_INFO = ['nick','mail','link'];
var guest_info = 'nick,mail,link'.split(',').filter(function(item){
  return GUEST_INFO.indexOf(item) > -1
});
guest_info = guest_info.length == 0 ? GUEST_INFO :guest_info;
window.valine = new Valine({
  el:'#vcomment',
  notify:notify,
  verify:verify,
  appId:'c2tSICknvMNwQOvqeqh8wYoi-9Nh9j0Va',
  appKey:'geSzJMrX46ogsQR590PTiGPF',
  placeholder:'留下你的足迹~',
  avatar:'mm',
  guest_info:guest_info,
  pageSize:'10'
})
</script></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><div class="search-form"><input id="local-search-input" placeholder="Search" type="text" name="q" results="0"/><div id="local-search-result"></div></div></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> Categories</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/peaky/categories/Linux/">Linux</a></li><li class="category-list-item"><a class="category-list-link" href="/peaky/categories/MIUI/">MIUI</a></li><li class="category-list-item"><a class="category-list-link" href="/peaky/categories/MarkDown/">MarkDown</a></li><li class="category-list-item"><a class="category-list-link" href="/peaky/categories/RL/">RL</a></li><li class="category-list-item"><a class="category-list-link" href="/peaky/categories/python/">python</a></li><li class="category-list-item"><a class="category-list-link" href="/peaky/categories/%E5%AD%A6%E4%B9%A0/">学习</a></li><li class="category-list-item"><a class="category-list-link" href="/peaky/categories/%E5%AF%BC%E8%88%AA/">导航</a></li><li class="category-list-item"><a class="category-list-link" href="/peaky/categories/%E6%95%99%E7%A8%8B/">教程</a></li><li class="category-list-item"><a class="category-list-link" href="/peaky/categories/%E7%94%B5%E8%84%91/">电脑</a></li><li class="category-list-item"><a class="category-list-link" href="/peaky/categories/%E7%BC%96%E7%A8%8B/">编程</a></li><li class="category-list-item"><a class="category-list-link" href="/peaky/categories/%E8%BD%AF%E4%BB%B6/">软件</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> Tags</i></div><div class="tagcloud"><a href="/peaky/tags/%E6%B5%8F%E8%A7%88%E5%99%A8/" style="font-size: 15px;">浏览器</a> <a href="/peaky/tags/Hexo/" style="font-size: 15px;">Hexo</a> <a href="/peaky/tags/%E6%95%99%E7%A8%8B/" style="font-size: 15px;">教程</a> <a href="/peaky/tags/Linux/" style="font-size: 15px;">Linux</a> <a href="/peaky/tags/%E5%AD%A6%E4%B9%A0/" style="font-size: 15px;">学习</a> <a href="/peaky/tags/MIUI/" style="font-size: 15px;">MIUI</a> <a href="/peaky/tags/MarkDown/" style="font-size: 15px;">MarkDown</a> <a href="/peaky/tags/%E8%AF%AD%E6%B3%95/" style="font-size: 15px;">语法</a> <a href="/peaky/tags/python/" style="font-size: 15px;">python</a> <a href="/peaky/tags/RL/" style="font-size: 15px;">RL</a> <a href="/peaky/tags/%E7%BC%96%E7%A8%8B/" style="font-size: 15px;">编程</a> <a href="/peaky/tags/%E5%AF%BC%E8%88%AA/" style="font-size: 15px;">导航</a> <a href="/peaky/tags/%E8%BD%AF%E4%BB%B6/" style="font-size: 15px;">软件</a> <a href="/peaky/tags/%E6%97%A5%E5%B8%B8/" style="font-size: 15px;">日常</a> <a href="/peaky/tags/%E7%94%B5%E8%84%91/" style="font-size: 15px;">电脑</a> <a href="/peaky/tags/springboot/" style="font-size: 15px;">springboot</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> Recent</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/peaky/2022/03/01/8d39085b.html">Linux部署git与Nodejs</a></li><li class="post-list-item"><a class="post-list-link" href="/peaky/2021/08/27/87d44b9d.html">MIUI教程</a></li><li class="post-list-item"><a class="post-list-link" href="/peaky/2021/06/01/9211474f.html">linux commd</a></li><li class="post-list-item"><a class="post-list-link" href="/peaky/2021/05/05/a54293f2.html">Springboot笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/peaky/2021/03/15/217f21be.html">DRL笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/peaky/2021/03/01/514027fa.html">Hexo部署到阿里云OSS上</a></li><li class="post-list-item"><a class="post-list-link" href="/peaky/2021/01/28/ef00c80b.html">LayUI入门</a></li><li class="post-list-item"><a class="post-list-link" href="/peaky/2021/01/23/44737761.html">小米手机刷机入门指北（小白向）</a></li><li class="post-list-item"><a class="post-list-link" href="/peaky/2021/01/20/a2f6ccf6.html">LayuiAdmin 文档</a></li><li class="post-list-item"><a class="post-list-link" href="/peaky/2021/01/20/23128346.html">如何检索文献</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> Links</i></div><ul></ul><a href="http://www.example1.com/" title="相关链接" target="_blank">相关链接</a><ul></ul><a href="http://www.example2.com/" title="相关链接" target="_blank">相关链接</a><ul></ul><a href="http://www.example3.com/" title="相关链接" target="_blank">相关链接</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2022 <a href="/peaky/." rel="nofollow">NoteBook.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/peaky/js/totop.js?v=1.0.0" async></script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/peaky/js/fancybox.js?v=1.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.css"><link rel="stylesheet" type="text/css" href="/peaky/css/search.css?v=1.0.0"><script type="text/javascript" src="/peaky/js/search.js?v=1.0.0"></script><script>var search_path = 'search.xml';
if (search_path.length == 0) {
   search_path = 'search.xml';
}
var path = '/peaky/' + search_path;
searchFunc(path, 'local-search-input', 'local-search-result');
</script><script type="text/javascript" src="/peaky/js/codeblock-resizer.js?v=1.0.0"></script><script type="text/javascript" src="/peaky/js/smartresize.js?v=1.0.0"></script></div></body></html>