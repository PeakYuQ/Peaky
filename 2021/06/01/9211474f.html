<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="There is no description"><title>常用的一些命令 | NoteBook</title><link rel="stylesheet" type="text/css" href="/peaky/css/style.css?v=1.0.0"><link rel="stylesheet" type="text/css" href="/peaky/css/dark.css?v=1.0.0"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/normalize.css/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/pure-min.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/peaky/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/peaky/favicon.ico"><link rel="apple-touch-icon" href="/peaky/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/peaky/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/peaky/atom.xml"><div class="darkmode-toggle">🌓</div><script>var prefersDarkMode = window.matchMedia('(prefers-color-scheme: dark)');
var toggle = document.querySelector('.darkmode-toggle');
var html = document.querySelector('html');

html.dataset.dark = localStorage.dark || prefersDarkMode.matches;

toggle.addEventListener('click', () => {
localStorage.dark = !(html.dataset.dark == 'true');
html.dataset.dark = localStorage.dark;
});</script><meta name="generator" content="Hexo 6.0.0"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">常用的一些命令</h1><a id="logo" href="/peaky/.">NoteBook</a><p class="description">Always believe that something wonderful is about to hanppen!</p></div><div id="nav-menu"><a class="current" href="/peaky/."><i class="fa fa-home"> 首页</i></a><a href="/peaky/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/peaky/message/"><i class="fa fa-comments"> 留言</i></a><a href="/peaky/daily/"><i class="fa fa-user"> 日迹</i></a><a href="/peaky/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">常用的一些命令</h1><div class="post-meta">2021-06-01<span> | </span><span class="category"><a href="/peaky/categories/Linux/">Linux</a></span><script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> 阅读</span></span><span class="post-time"><span class="post-meta-item-text"> | </span><span class="post-meta-item-icon"><i class="fa fa-keyboard-o"></i><span class="post-count"> 17.6k</span><span class="post-meta-item-text"> 字</span></span></span><span class="post-time"> | <span class="post-meta-item-icon"><i class="fa fa-clock-o"></i><span class="post-count"> 94</span><span class="post-meta-item-text"> 分钟</span></span></span></div><a class="disqus-comment-count" href="/peaky/2021/06/01/9211474f.html#vcomment"><span class="valine-comment-count" data-xid="/peaky/2021/06/01/9211474f.html"></span><span> 条评论</span></a><div class="post-content"><blockquote>
<p>record all common commands</p>
</blockquote>
<span id="more"></span>









<h4 id="Windows-安装-typora"><a href="#Windows-安装-typora" class="headerlink" title="Windows 安装 typora"></a>Windows 安装 typora</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">需要下载安装包文件</span><br><span class="line">1. 安装文件版本 0.9.78 安装</span><br><span class="line">https://fengfeng.lanzouj.com/i9xo1vi</span><br><span class="line">2. 升级文件版本0.11.18 安装</span><br><span class="line">https://fengfeng.lanzouj.com/itJ7R07nrytg</span><br><span class="line"></span><br><span class="line">如果提示过期无法使用则重新下载2安装覆盖即可</span><br><span class="line"></span><br><span class="line">3. 更换主题</span><br><span class="line">https://fengfeng.lanzouj.com/i8HBb07s8isf</span><br><span class="line">解压 将upc.css放到theme目录下重启应用即可</span><br><span class="line"></span><br></pre></td></tr></table></figure>



















<h4 id="Linux-安装-screen-命令"><a href="#Linux-安装-screen-命令" class="headerlink" title="Linux 安装 screen 命令"></a>Linux 安装 screen 命令</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">No match <span class="keyword">for</span> argument: screen</span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">未配置yum源</span></span><br><span class="line"></span><br><span class="line">sudo yum install epel-release </span><br><span class="line"></span><br><span class="line">sudo yum install screen</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">2 利用screen 命令 ，重起一个新的screen.</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">新screen的名字，可以任起</span></span><br><span class="line"></span><br><span class="line">screen -S name </span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">3 开始训练.</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">4 可以断开terminal，此时训练不受影响</span> </span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">恢复</span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">1 启动terminal，查看存在的screen的命令.</span></span><br><span class="line"></span><br><span class="line">screen -ls</span><br><span class="line"></span><br><span class="line">screen -r 30362</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">2 断开当前的screen.</span></span><br><span class="line">按 Ctrl + A， 然后 K 键 然后 y 键</span><br><span class="line"></span><br></pre></td></tr></table></figure>





































<h4 id="Linux-安装-jupyter-lab"><a href="#Linux-安装-jupyter-lab" class="headerlink" title="Linux 安装 jupyter lab"></a>Linux 安装 jupyter lab</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">1. 安装miniconda  创建conda 环境</span><br><span class="line">2. 进入conda环境 安装依赖</span><br><span class="line">conda install -c conda-forge jupyterlab</span><br><span class="line"><span class="meta"># </span><span class="language-bash">or pip install jupyterlab</span></span><br><span class="line"></span><br><span class="line">3. 开放一个端口 比如8889 启动jypyter lab           </span><br><span class="line"><span class="meta"># </span><span class="language-bash">sudo firewall-cmd --zone=public --add-port=8889/tcp --permanent</span></span><br><span class="line">jupyter-lab --ip 0.0.0.0 --port 8889 --no-browser</span><br><span class="line"></span><br><span class="line">4. 设置一个screen 来保持jupyter的运行</span><br><span class="line">screen -S jupyter</span><br><span class="line">jupyter-lab --ip 0.0.0.0 --port 8889 --no-browser</span><br><span class="line"></span><br><span class="line">退出就可以了</span><br><span class="line"></span><br><span class="line">5. 添加内核</span><br><span class="line"><span class="meta">#</span><span class="language-bash">在新conda环境里面</span></span><br><span class="line">conda install ipykernel</span><br><span class="line"><span class="meta">#</span><span class="language-bash">然后</span></span><br><span class="line">python -m ipykernel install --user --name 环境名称 --display-name &quot;前端展示的名称&quot;</span><br><span class="line"><span class="meta">#</span><span class="language-bash">exp：</span></span><br><span class="line">python -m ipykernel install --user --name pytorch --display-name &quot;Python 3 (pytorch)&quot;</span><br><span class="line"><span class="meta">#</span><span class="language-bash">然后重启jupyter服务就可以了</span></span><br></pre></td></tr></table></figure>

<p>进阶 -端口转发</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line">import socket</span><br><span class="line">import threading</span><br><span class="line">import sys,getopt</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="language-bash"><span class="comment"># 这个代码是用来做端口转发的 emmm 你问有什么用？没用，删了他吧 (摊手</span></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">错误</span></span><br><span class="line">def l_w(s):</span><br><span class="line">   print(&quot;[!] &#123;&#125;&quot;.format(s))</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">信息</span></span><br><span class="line">def l_i(s):</span><br><span class="line">   print(&quot;[+] &#123;&#125;&quot;.format(s))</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">毁灭性错误</span></span><br><span class="line">def l_a(s):</span><br><span class="line">   print(&quot;[-] &#123;&#125;&quot;.format(s))</span><br><span class="line">   exit()</span><br><span class="line"></span><br><span class="line">def help():</span><br><span class="line">   print(&quot;&quot;&quot;</span><br><span class="line">      -h 提供帮助，就是你看到的这个</span><br><span class="line">      -s 指定监听的本地ip，默认为 127.0.0.1</span><br><span class="line">      -l 指定监听的端口号，必须指定</span><br><span class="line">      -d 指定转发的目的主机，默认为 127.0.0.1</span><br><span class="line">      -p 指定转发的目的端口，必须指定</span><br><span class="line"></span><br><span class="line">         本程序具有超级牛力！ moo~~ moo~~~</span><br><span class="line">   &quot;&quot;&quot;)</span><br><span class="line">   exit()</span><br><span class="line"></span><br><span class="line">s_host = &quot;0.0.0.0&quot;</span><br><span class="line"><span class="meta">#</span><span class="language-bash">s_port = 20000</span></span><br><span class="line">s_port = 10001</span><br><span class="line">d_host = &quot;192.168.1.101&quot;</span><br><span class="line"><span class="meta">#</span><span class="language-bash">d_host = <span class="string">&quot;192.168.1.102&quot;</span></span></span><br><span class="line">d_port = 8889</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">将来自s套接字的数据转发到d套接字(函数名 forward)</span></span><br><span class="line">def fw(s,d):</span><br><span class="line">   try:</span><br><span class="line">      while True:</span><br><span class="line">         buf = s.recv(4096)</span><br><span class="line">         l_i(&quot;&#123;&#125; ====&gt; &#123;&#125; &#123;&#125; 字节&quot;.format(s.getpeername(),d.getpeername(),len(buf)))</span><br><span class="line">         if(len(buf) == 0):</span><br><span class="line">            l_w(&quot;&#123;&#125; 断开连接&quot;.format(s.getpeername()))</span><br><span class="line">            return</span><br><span class="line">         d.send(buf)</span><br><span class="line">   except:</span><br><span class="line">      return</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">处理请求，每一个连接对应一个 (函数名 request thread)</span></span><br><span class="line">def rt(request_socket):</span><br><span class="line">   des_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line">   try:</span><br><span class="line">      des_socket.connect((d_host,int(d_port)))</span><br><span class="line">   except Exception as e:</span><br><span class="line">      l_a(&quot;连接目标 &#123;&#125;:&#123;&#125; 失败！err: &#123;&#125;&quot;.format(d_host,d_port,str(e)))</span><br><span class="line">   threading.Thread(target=fw,args=(request_socket,des_socket)).start()</span><br><span class="line">   fw(des_socket,request_socket)</span><br><span class="line"></span><br><span class="line">l_i(&quot;这个程序由 Startu 开发 o_o | ^_^ ~~~&quot;)</span><br><span class="line"><span class="meta"># </span><span class="language-bash">获取参数</span></span><br><span class="line">try:</span><br><span class="line">   opts,args = getopt.getopt(sys.argv[1:],&quot;hs:l:d:p:&quot;)</span><br><span class="line">except getopt.GetoptError:</span><br><span class="line">   l_w(&quot;参数不正确&quot;)</span><br><span class="line">   help()</span><br><span class="line">for opt,arg in opts:</span><br><span class="line">      if opt == &#x27;-h&#x27;:</span><br><span class="line">         help()</span><br><span class="line">      elif opt == &#x27;-s&#x27;:</span><br><span class="line">         s_host = arg</span><br><span class="line">      elif opt == &#x27;-l&#x27;:</span><br><span class="line">         s_port = arg</span><br><span class="line">      elif opt == &#x27;-d&#x27;:</span><br><span class="line">         d_host = arg</span><br><span class="line">      elif opt == &#x27;-p&#x27;:</span><br><span class="line">         d_port = arg</span><br><span class="line">if s_host == &quot;127.0.0.1&quot;:</span><br><span class="line">   l_w(&quot;将会监听: 127.0.0.1&quot;)    # 因为可能你不想绑定 127.0.0.1 所以作出提示 (也许是0.0.0.0呢)</span><br><span class="line">if s_port == 0 or d_port == 0:</span><br><span class="line">   l_a(&quot;没有指定端口号或指定为0 通过 -h 参数看帮助&quot;)</span><br><span class="line"></span><br><span class="line">l_i(&quot;监听 &#123;&#125;:&#123;&#125;&quot;.format(s_host,s_port))</span><br><span class="line">l_i(&quot;将会连接 &#123;&#125;:&#123;&#125;&quot;.format(d_host,d_port))</span><br><span class="line"></span><br><span class="line">server_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line">try:</span><br><span class="line">   server_socket.bind((s_host,int(s_port)))</span><br><span class="line">except Exception as e:</span><br><span class="line">   l_a(&quot;绑定 &#123;&#125;:&#123;&#125; 端口失败 &#123;&#125;&quot;.format(s_host,s_port,str(e)))</span><br><span class="line">server_socket.listen(50)      # 应该同时连接不会超过 50 个吧...</span><br><span class="line">l_i(&quot;准备就绪&quot;)</span><br><span class="line">while True:</span><br><span class="line">   request_socket,addr = server_socket.accept()</span><br><span class="line">   l_i(&quot;&#123;&#125; 已连接&quot;.format(request_socket.getpeername()))</span><br><span class="line">   threading.Thread(target=rt,args=(request_socket,)).start()</span><br></pre></td></tr></table></figure>

<p>进阶 -使用</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">1. 提交任务 开启jupyterlab </span><br><span class="line"></span><br><span class="line">jupyter-lab --ip 0.0.0.0 --port 8888 --no-browser</span><br><span class="line"></span><br><span class="line">2. 运行端口转发 访问对应端口即可</span><br></pre></td></tr></table></figure>

















































<h4 id="如何更改linux下目录所属用户和用户组"><a href="#如何更改linux下目录所属用户和用户组" class="headerlink" title="如何更改linux下目录所属用户和用户组"></a>如何更改linux下目录所属用户和用户组</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">1、更改目录所属的用户必须位于(/etc/passwd)目录下；</span><br><span class="line">执行 chown [-R] 所属用户名 目录名</span><br><span class="line">例: chown cx-root test</span><br><span class="line">2、更改目录所属用户组必须位于(/etc/group)目录下；</span><br><span class="line">执行 chgrp [-R] 所属用户组 目录名</span><br><span class="line">例: chgrp -R cx-root test_dir</span><br><span class="line">3、同时更改文件或目录的所有者和用户组</span><br><span class="line">执行 chown [-R] 所属用户:所属用户组 文件或者目录名</span><br><span class="line">例: chown -R cx-root:cx-root test_dir</span><br></pre></td></tr></table></figure>

















<h4 id="ZIP"><a href="#ZIP" class="headerlink" title="ZIP"></a>ZIP</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">1、把/home目录下面的data目录压缩为data.zip</span></span><br><span class="line">zip -r data.zip data #压缩data目录</span><br><span class="line"><span class="meta">#</span><span class="language-bash">2、把/home目录下面的data.zip解压到databak目录里面</span></span><br><span class="line">unzip data.zip -d databak</span><br><span class="line"><span class="meta">#</span><span class="language-bash">3、把/home目录下面的a文件夹和3.txt压缩成为a123.zip</span></span><br><span class="line">zip -r a123.zip a 3.txt</span><br><span class="line"><span class="meta">#</span><span class="language-bash">4、把/home目录下面的t.zip直接解压到/home目录里面</span></span><br><span class="line">unzip t.zip</span><br><span class="line"><span class="meta">#</span><span class="language-bash">5、把/home目录下面的a1.zip、a2.zip、a3.zip同时解压到/home目录里面</span></span><br><span class="line">unzip a*.zip</span><br><span class="line"><span class="meta">#</span><span class="language-bash">6、把/home目录下面w.zip里面的所有文件解压到第一级目录</span></span><br><span class="line">unzip -j wt.zip</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">linux tar.gz命令是一个常见的文件解压缩命令，那么它具体用法是怎样的呢?下面由学习啦小编为大家整理了linux tar.gz命令的相关知识，希望对大家有帮助!</span><br><span class="line"></span><br><span class="line">1.linux tar.gz压缩命令：</span><br><span class="line"></span><br><span class="line">命令格式：tar -zcvf 压缩文件名.tar.gz 被压缩文件名</span><br><span class="line"></span><br><span class="line">可先切换到当前目录下。压缩文件名和被压缩文件名都可加入路径。</span><br><span class="line"></span><br><span class="line">2.linux tar.gz解压命令：</span><br><span class="line"></span><br><span class="line">命令格式：tar -zxvf 压缩文件名.tar.gz</span><br><span class="line"></span><br><span class="line">解压缩后的文件只能放在当前的目录</span><br><span class="line"></span><br><span class="line">3.补充：其他linux tar解压缩命令</span><br><span class="line"></span><br><span class="line">压缩</span><br><span class="line"></span><br><span class="line">tar –cvf jpg.tar *.jpg //将目录里所有jpg文件打包成tar.jpg</span><br><span class="line"></span><br><span class="line">tar –czf jpg.tar.gz *.jpg //将目录里所有jpg文件打包成jpg.tar后，并且将其用gzip压缩，生成一个gzip压缩过的包，命名为jpg.tar.gz</span><br><span class="line"></span><br><span class="line">tar –cjf jpg.tar.bz2 *.jpg //将目录里所有jpg文件打包成jpg.tar后，并且将其用bzip2压缩，生成一个bzip2压缩过的包，命名为jpg.tar.bz2</span><br><span class="line"></span><br><span class="line">tar –cZf jpg.tar.Z *.jpg //将目录里所有jpg文件打包成jpg.tar后，并且将其用compress压缩，生成一个umcompress压缩过的包，命名为jpg.tar.Z</span><br><span class="line"></span><br><span class="line">rar a jpg.rar *.jpg //rar格式的压缩，需要先下载rar for Linux</span><br><span class="line"></span><br><span class="line">zip jpg.zip *.jpg //zip格式的压缩，需要先下载zip for linux</span><br><span class="line"></span><br><span class="line">解压</span><br><span class="line"></span><br><span class="line">tar –xvf file.tar //解压 tar包</span><br><span class="line"></span><br><span class="line">tar -xzvf file.tar.gz //解压tar.gz</span><br><span class="line"></span><br><span class="line">tar -xjvf file.tar.bz2 //解压 tar.bz2</span><br><span class="line"></span><br><span class="line">tar –xZvf file.tar.Z //解压tar.Z</span><br><span class="line"></span><br><span class="line">unrar e file.rar //解压rar</span><br><span class="line"></span><br><span class="line">unzip file.zip //解压zip</span><br></pre></td></tr></table></figure>









<h4 id="Linux-clash"><a href="#Linux-clash" class="headerlink" title="Linux clash"></a>Linux clash</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">GitHub：https://github.com/bannedbook/fanqiang/wiki</span><br><span class="line">Github: https://git.io/v2free</span><br><span class="line">机场：https://cdn.v2free.net/user </span><br><span class="line">每天签到送400M免费流量</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>配置Linux 环境</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">下载 clash：https://github.com/Dreamacro/clash/releases</span><br><span class="line"><span class="meta"># </span><span class="language-bash">我下载amd64 版本</span></span><br><span class="line">wget -O clash.gz https://github.com/Dreamacro/clash/releases/download/v1.10.6/clash-linux-amd64-v1.10.6.gz</span><br><span class="line"><span class="meta"># </span><span class="language-bash">解压到当前文件夹</span></span><br><span class="line">gzip -f clash.gz -d </span><br><span class="line"><span class="meta"># </span><span class="language-bash">授权可执行权限</span></span><br><span class="line">chmod +x clash</span><br><span class="line"><span class="meta"># </span><span class="language-bash">初始化执行 clash</span></span><br><span class="line">./clash</span><br><span class="line"><span class="meta"># </span><span class="language-bash">初始化执行 clash 会默认在 ~/.config/clash/ 目录下生成配置文件和全球IP地址库：config.yaml 和 Country.mmdb</span></span><br><span class="line"></span><br><span class="line">下载 clash 配置文件</span><br><span class="line">wget -U &quot;Mozilla/6.0&quot; -O ~/.config/clash/config.yaml  你的Clash订阅链接网址</span><br><span class="line">./clash &amp; exit</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">开放端口访问 clash 默认 http 端口默认监听 7890 , socks5 端口默认监听 7891</span></span><br><span class="line"></span><br><span class="line">设置代理 ip 和端口号</span><br></pre></td></tr></table></figure>





<h4 id="Linux-开启网络控制台-RockyLinux"><a href="#Linux-开启网络控制台-RockyLinux" class="headerlink" title="Linux 开启网络控制台 RockyLinux"></a>Linux 开启网络控制台 RockyLinux</h4><p><code>Activate the web console with: systemctl enable --now cockpit.socket</code></p>
<h4 id="Linux-安装chrome"><a href="#Linux-安装chrome" class="headerlink" title="Linux 安装chrome"></a>Linux 安装chrome</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># </span><span class="language-bash">获取安装包</span></span><br><span class="line"></span><br><span class="line">wget https://dl.google.com/linux/direct/google-chrome-stable_current_x86_64.rpm</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">安装几个依赖</span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">yum install -y lsb</span> </span><br><span class="line"><span class="meta"># </span><span class="language-bash">yum install -y libXScrnSaver</span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">yum install liberation-fonts</span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">yum install vulkan</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">本地安装</span></span><br><span class="line">yum localinstall google-chrome-stable_current_x86_64.rpm</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">打开google</span></span><br><span class="line">google-chrome</span><br><span class="line"></span><br><span class="line">用户名：xiaozhenniaini@gmail.com</span><br><span class="line">密码：3wnCFk5Kw4s6</span><br></pre></td></tr></table></figure>

















































<h4 id="Linux-添加新的硬盘分区"><a href="#Linux-添加新的硬盘分区" class="headerlink" title="Linux 添加新的硬盘分区"></a>Linux 添加新的硬盘分区</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">添加硬盘后 查看分区</span></span><br><span class="line"></span><br><span class="line">lsblk   -f </span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">此时只有sdb，因为没有分区，所有没有sdb1</span></span><br></pre></td></tr></table></figure>

<p><img src="https://pic-20201016.oss-cn-qingdao.aliyuncs.com/img/image-20220624191031061.png" alt="image-20220624191031061"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">fdisk   /dev/sdb</span><br><span class="line"></span><br><span class="line">				1：fdisk   /dev/sdb</span><br><span class="line"></span><br><span class="line">                2：Command（m  for  help）:m</span><br><span class="line"></span><br><span class="line">                3：Command（m  for  help）：n（add  a  new  partition）</span><br><span class="line"></span><br><span class="line">                4：Command   action：e：extend（扩展分区）p（primary  partition）（1-4）可输入p</span><br><span class="line"></span><br><span class="line">                5：partition   number（1-4）输入1</span><br><span class="line"></span><br><span class="line">                6：然后Command（m  for  help）:w（写入磁盘并退出）</span><br><span class="line">                </span><br><span class="line"><span class="meta">#</span><span class="language-bash">添加分区后 查看分区</span></span><br><span class="line"></span><br><span class="line">lsblk   -f </span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">但通过lsblk   -f只能看到sdb1，看不到对应的uuid，不能正常使用，需要格式化</span></span><br></pre></td></tr></table></figure>

<p><img src="https://pic-20201016.oss-cn-qingdao.aliyuncs.com/img/image-20220624191231645.png" alt="image-20220624191231645"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="language-bash">格式化</span></span><br><span class="line">mkfs   -t   ext4   /dev/sdb1</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">挂载分区</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">在配置文件 /etc/fstab下最后一行输入一下内容，这里将分区/dev/sdb1挂到 /home/data目录下</span></span><br><span class="line"></span><br><span class="line">/dev/sdb1 /home/data ext4 defaults 0 0</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">保存</span></span><br><span class="line"></span><br><span class="line">mount -a</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">挂载成功</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">如果不想挂载想直接加入扩展分区</span></span><br><span class="line">vgscan</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">得到rl分区</span></span><br><span class="line">vgextend rl /dev/sdb1</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">扩展想扩展的分区</span></span><br><span class="line"></span><br><span class="line">lvextend -L +180G /dev/mapper/rl-root</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">重新识别分区</span></span><br><span class="line"></span><br><span class="line">xfs_growfs /dev/mapper/rl-root</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">查看</span></span><br><span class="line">df -h</span><br><span class="line"></span><br></pre></td></tr></table></figure>





























<h4 id="Python-实现进度条"><a href="#Python-实现进度条" class="headerlink" title="Python 实现进度条"></a>Python 实现进度条</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># pip install tqdm</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 在进行迭代训练时使用trange即可</span></span><br><span class="line"><span class="keyword">from</span> tqdm <span class="keyword">import</span> trange</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> trange(<span class="number">10</span>): </span><br><span class="line">    time.sleep(<span class="number">1</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>



























<h4 id="Linux配置Samba共享磁盘"><a href="#Linux配置Samba共享磁盘" class="headerlink" title="Linux配置Samba共享磁盘"></a>Linux配置Samba共享磁盘</h4><p>1 安装Samba服务</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="language-bash">前期工作 关闭防火墙 关闭Selinux</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">关闭防火墙</span></span><br><span class="line">sudo systemctl stop firewalld.service</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">禁止自启动</span></span><br><span class="line">sudo systemctl disable firewalld.service</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">关闭Selinux 设置为 SELINUX=disabled</span></span><br><span class="line">sudo vi /etc/sysconfig/selinux</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">centos</span></span><br><span class="line">sudo yum -y install samba samba-common samba-client</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">查看samba服务状态，启动服务</span></span><br><span class="line">service smb status 		//查看samba服务状态</span><br><span class="line">service smb start		//启动samba服务</span><br><span class="line">service smb restart		//重启samba服务</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">设置开机启动</span></span><br><span class="line">sudo systemctl enable smb.service</span><br><span class="line">sudo systemctl start smb</span><br></pre></td></tr></table></figure>

<p>2 配置文件</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># </span><span class="language-bash">备份配置文件</span></span><br><span class="line">cp /etc/samba/smb.conf /etc/samba/smb.conf.bak</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">编辑</span></span><br><span class="line">sudo vim  /etc/samba/smb.conf</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">找到cups options = raw 下面加上</span></span><br><span class="line">map to guest = Bad User</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">在最后一行加</span></span><br><span class="line"></span><br><span class="line">[disk]</span><br><span class="line">        path = /home/peak/disk</span><br><span class="line">        public = yes</span><br><span class="line">        writable = yes</span><br><span class="line">        browseable = yes</span><br><span class="line">        guest ok = yes</span><br><span class="line">        valid users = peak</span><br><span class="line">        available = yes</span><br></pre></td></tr></table></figure>

<p>3 创建访问用户</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo smbpasswd -a peak   </span><br><span class="line"></span><br><span class="line">sudo reboot</span><br></pre></td></tr></table></figure>







































<h4 id="Linux中crontab-定时任务找不到命令问题"><a href="#Linux中crontab-定时任务找不到命令问题" class="headerlink" title="Linux中crontab 定时任务找不到命令问题"></a>Linux中crontab 定时任务找不到命令问题</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">crontab 定时任务找不到命令问题</span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"><span class="meta">#</span><span class="language-bash"><span class="comment">### Environments ####</span></span></span><br><span class="line">. ~/.bash_profile</span><br><span class="line">. /etc/profile</span><br><span class="line"><span class="meta">#</span><span class="language-bash"><span class="comment">#####################</span></span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">下面是要执行的脚本文件，以及参数</span></span><br><span class="line">绝对路径最好</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">要执行的脚本一定要有执行权限。</span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">例如：要执行的脚本名称为：myShell.sh</span></span><br><span class="line">chmod 777 myShell.sh</span><br></pre></td></tr></table></figure>













































<h4 id="查看GPU显卡并发送给微信"><a href="#查看GPU显卡并发送给微信" class="headerlink" title="查看GPU显卡并发送给微信"></a>查看GPU显卡并发送给微信</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># encoding:utf-8</span></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line">title1 = sys.argv[<span class="number">1</span>]</span><br><span class="line">txt1 = sys.argv[<span class="number">2</span>]</span><br><span class="line">title2 = sys.argv[<span class="number">3</span>]</span><br><span class="line">txt2 = sys.argv[<span class="number">4</span>]</span><br><span class="line"></span><br><span class="line">Secret = <span class="string">&quot;Aly-JNu9VttOcY3wKx8m76IjqfzNtUJ98web-aQns4o&quot;</span></span><br><span class="line">corpid = <span class="string">&#x27;ww41560323f54f5b7b&#x27;</span></span><br><span class="line">url = <span class="string">&#x27;https://qyapi.weixin.qq.com/cgi-bin/gettoken?corpid=&#123;&#125;&amp;corpsecret=&#123;&#125;&#x27;</span></span><br><span class="line">getr = requests.get(url=url.<span class="built_in">format</span>(corpid, Secret))</span><br><span class="line">access_token = getr.json().get(<span class="string">&#x27;access_token&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 推送信息</span></span><br><span class="line"><span class="comment"># 微信推送</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">weChatPush</span>(<span class="params">title,txt</span>):</span><br><span class="line">    <span class="comment">#print(access_token)</span></span><br><span class="line">    data = &#123;</span><br><span class="line">            <span class="string">&quot;touser&quot;</span>: <span class="string">&quot;@all&quot;</span>,</span><br><span class="line">            <span class="string">&quot;msgtype&quot;</span>: <span class="string">&quot;text&quot;</span>,</span><br><span class="line">            <span class="string">&quot;agentid&quot;</span>: <span class="number">1000005</span>,</span><br><span class="line">            <span class="string">&quot;text&quot;</span>: &#123;</span><br><span class="line">                <span class="string">&quot;content&quot;</span>: title+ <span class="string">&quot;:\n&quot;</span> + txt</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="string">&quot;safe&quot;</span>: <span class="number">0</span>,</span><br><span class="line">            &#125;</span><br><span class="line">    c = requests.post(url=<span class="string">&quot;https://qyapi.weixin.qq.com/cgi-bin/message/send?access_token=&#123;&#125;&quot;</span>.<span class="built_in">format</span>(access_token),data=json.dumps(data))</span><br><span class="line">    <span class="comment">#print(c.json)</span></span><br><span class="line"><span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line"> 	weChatPush(title1,txt1)</span><br><span class="line">	weChatPush(title2,txt2)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看显卡命令</span></span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line">sleep <span class="number">1</span></span><br><span class="line">/apps/jhinno/unischeduler/<span class="built_in">bin</span>/jsub &lt;/hpcfiles/users/qyf/workDir/sub1.sh</span><br><span class="line"></span><br><span class="line">sleep <span class="number">5</span></span><br><span class="line"></span><br><span class="line">a=$(ls | grep output)</span><br><span class="line">gpu1=$(cat $a | grep -A <span class="number">30</span> <span class="string">&#x27;The output&#x27;</span>)</span><br><span class="line">wx1=$(cat $a | grep  <span class="string">&#x27;MiB&#x27;</span>)</span><br><span class="line"></span><br><span class="line">echo <span class="string">&quot;*******************************************&quot;</span></span><br><span class="line">echo <span class="string">&quot;****************GPU01**********************&quot;</span></span><br><span class="line">echo <span class="string">&quot;*******************************************&quot;</span></span><br><span class="line">echo <span class="string">&quot;$gpu1&quot;</span></span><br><span class="line">echo <span class="string">&quot;*******************************************&quot;</span></span><br><span class="line">echo <span class="string">&quot;*******************************************&quot;</span></span><br><span class="line"></span><br><span class="line">rm output.*</span><br><span class="line">rm error.*</span><br><span class="line"></span><br><span class="line">/apps/jhinno/unischeduler/<span class="built_in">bin</span>/jsub &lt;/hpcfiles/users/qyf/workDir/sub2.sh</span><br><span class="line"></span><br><span class="line">sleep <span class="number">5</span></span><br><span class="line"></span><br><span class="line">c=$(ls | grep output)</span><br><span class="line">gpu2=$(cat $c | grep -A <span class="number">30</span> <span class="string">&#x27;The output&#x27;</span>)</span><br><span class="line">wx2=$(cat $c | grep  <span class="string">&#x27;MiB&#x27;</span>)</span><br><span class="line"></span><br><span class="line">echo <span class="string">&quot;*******************************************&quot;</span></span><br><span class="line">echo <span class="string">&quot;****************GPU02**********************&quot;</span></span><br><span class="line">echo <span class="string">&quot;*******************************************&quot;</span></span><br><span class="line">echo <span class="string">&quot;$gpu2&quot;</span></span><br><span class="line">echo <span class="string">&quot;*******************************************&quot;</span></span><br><span class="line">echo <span class="string">&quot;*******************************************&quot;</span></span><br><span class="line"></span><br><span class="line">rm output.*</span><br><span class="line">rm error.*</span><br><span class="line"></span><br><span class="line">/apps/software/anaconda3/<span class="built_in">bin</span>/python /hpcfiles/users/qyf/workDir/Mess.py <span class="string">&quot;GPU01 Info&quot;</span> <span class="string">&quot;$wx1&quot;</span> <span class="string">&quot;GPU02 Info&quot;</span> <span class="string">&quot;$wx2&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#!/bin/sh</span></span><br><span class="line"><span class="comment">#JSUB -q normal</span></span><br><span class="line"><span class="comment">#JSUB -n 1</span></span><br><span class="line"><span class="comment">#JSUB -m gpu01</span></span><br><span class="line"><span class="comment">#JSUB -e error.%J</span></span><br><span class="line"><span class="comment">#JSUB -o output.%J</span></span><br><span class="line"><span class="comment">#JSUB -J check_task</span></span><br><span class="line">nvidia-smi</span><br><span class="line"></span><br><span class="line">* * * * * bash /hpcfiles/users/qyf/workDir/checkGpu.sh &gt;&gt; /hpcfiles/users/qyf/workDir/GPU.log &amp;</span><br><span class="line"><span class="number">0</span> * * * * bash /hpcfiles/users/qyf/workDir/checkGpu.sh &gt;&gt; /hpcfiles/users/qyf/workDir/GPU.log &amp;</span><br></pre></td></tr></table></figure>



<h4 id="20220628改进版本"><a href="#20220628改进版本" class="headerlink" title="20220628改进版本"></a>20220628改进版本</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">checkGpu.sh</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">gpu1=$(cat /hpcfiles/users/qyf/gpuInfo/gpu01Hour.log | grep  &#x27;MiB&#x27;)</span><br><span class="line">gpu2=$(cat /hpcfiles/users/qyf/gpuInfo/gpu02Hour.log | grep  &#x27;MiB&#x27;)</span><br><span class="line"></span><br><span class="line">/apps/software/anaconda3/bin/python /hpcfiles/users/qyf/gpuInfo/Mess.py &quot;GPU01 Info&quot; &quot;$gpu1&quot; &quot;GPU02 Info&quot; &quot;$gpu2&quot;</span><br><span class="line"></span><br><span class="line">0 * * * * bash /hpcfiles/users/qyf/gpuInfo/checkGpu.sh</span><br></pre></td></tr></table></figure>

























<h4 id="python传入参数"><a href="#python传入参数" class="headerlink" title="python传入参数"></a>python传入参数</h4><p> 使用<code>sys.argv</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">python     script.py    <span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>    <span class="number">10</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">gpus = sys.argv[<span class="number">1</span>]</span><br><span class="line">batch_size = sys.argv[<span class="number">2</span>]</span><br><span class="line"><span class="built_in">print</span>(gpus)</span><br><span class="line"><span class="built_in">print</span>(batch_size)</span><br></pre></td></tr></table></figure>



















<h4 id="Bash"><a href="#Bash" class="headerlink" title="Bash"></a>Bash</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line">rm error.*</span><br><span class="line">rm output.*</span><br><span class="line">jsub -q normal -n 1 -e error.%J -o output.%J -J my_job -m gpu01 nvidia-smi</span><br><span class="line">sleep 1</span><br><span class="line"><span class="meta"># </span><span class="language-bash">a是后面命令返回得结果</span></span><br><span class="line">a=$(ls | grep output)</span><br><span class="line"><span class="meta"># </span><span class="language-bash">b中调用<span class="variable">$a</span></span></span><br><span class="line">b=$(cat $a | grep -A 30 &#x27;The output&#x27;)</span><br><span class="line">echo &quot;*******************************************&quot;</span><br><span class="line">echo &quot;****************GPU01**********************&quot;</span><br><span class="line">echo &quot;*******************************************&quot;</span><br><span class="line"><span class="meta"># </span><span class="language-bash">输出b</span></span><br><span class="line">echo &quot;$b&quot;</span><br><span class="line">echo &quot;*******************************************&quot;</span><br><span class="line">echo &quot;*******************************************&quot;</span><br><span class="line">rm output.*</span><br><span class="line">rm error.*</span><br><span class="line">jsub -q normal -n 1 -e error.%J -o output.%J -J my_job -m gpu02 nvidia-smi</span><br><span class="line">sleep 1</span><br><span class="line">c=$(ls | grep output)</span><br><span class="line">d=$(cat $c | grep -A 30 &#x27;The output&#x27;)</span><br><span class="line">echo &quot;*******************************************&quot;</span><br><span class="line">echo &quot;****************GPU02**********************&quot;</span><br><span class="line">echo &quot;*******************************************&quot;</span><br><span class="line">echo &quot;$d&quot;</span><br><span class="line">echo &quot;*******************************************&quot;</span><br><span class="line">echo &quot;*******************************************&quot;</span><br><span class="line">rm output.*</span><br><span class="line">rm error.*</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

























<h4 id="为最小化安装linux配置VNC桌面"><a href="#为最小化安装linux配置VNC桌面" class="headerlink" title="为最小化安装linux配置VNC桌面"></a>为最小化安装linux配置VNC桌面</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># </span><span class="language-bash">环境说明 CentOS 8</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">$ </span><span class="language-bash"><span class="built_in">cat</span> /etc/centos-release</span></span><br><span class="line">Rocky Linux release 8.6 (Green Obsidian)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>1 安装桌面</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># </span><span class="language-bash">需要root权限</span></span><br><span class="line">sudo dnf groupinstall &quot;workstation&quot;</span><br><span class="line"><span class="meta"># </span><span class="language-bash">耗时较长</span> </span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">安装桌面</span> </span><br><span class="line">sudo dnf groupinstall &quot;Server with GUI&quot;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>2 设置默认启动桌面</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># </span><span class="language-bash">设置后需要重启服务器</span></span><br><span class="line">sudo systemctl set-default graphical</span><br><span class="line"></span><br><span class="line">sudo reboot</span><br></pre></td></tr></table></figure>

<p>3 安装VNC</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># </span><span class="language-bash">yum 安装VNC service</span></span><br><span class="line">sudo dnf install tigervnc-server tigervnc-server-module</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p>4 添加用户</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"># </span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash">sudo vim /etc/tigervnc/vncserver.users</span></span><br><span class="line"></span><br><span class="line">:1=username </span><br><span class="line"><span class="meta"># </span><span class="language-bash">:1表示5901端口 username表示用户名</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>5 拷贝模板</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo cp /usr/lib/systemd/system/vncserver@.service /etc/systemd/system/vncserver@.service</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">@1.service表示为：1端口创建</span> </span><br><span class="line"><span class="meta"># </span><span class="language-bash">如果多用户，则@2.service</span></span><br></pre></td></tr></table></figure>

<p>6 设置密码</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vncpasswd</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">设置密码后 Would you like to enter a view-only password (y/n)? 输入n 意思是只读？ 当然要操控所以用 n</span></span><br></pre></td></tr></table></figure>



<p>7 设置开机启动</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># </span><span class="language-bash">:1对应1用户</span></span><br><span class="line">sudo systemctl enable vncserver@:1.service</span><br><span class="line"><span class="meta">#</span><span class="language-bash">启动</span></span><br><span class="line">sudo systemctl start vncserver@:1.service</span><br></pre></td></tr></table></figure>

<p>8 设置防火墙</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># </span><span class="language-bash">配置后需要reload</span></span><br><span class="line">sudo firewall-cmd --permanent --add-service vnc-server</span><br><span class="line"></span><br><span class="line">sudo firewall-cmd --reload</span><br></pre></td></tr></table></figure>

<p>9 测试</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl start vncserver@:1.service</span><br><span class="line">sudo systemctl status vncserver@:1.service</span><br></pre></td></tr></table></figure>

<p>10 连接</p>
<h2 id="配置vnc"><a href="#配置vnc" class="headerlink" title="配置vnc"></a>配置vnc</h2><p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/xuanbjut/p/14289178.html">https://www.cnblogs.com/xuanbjut/p/14289178.html</a></p>
<p>添加用户</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/tigervnc/vncserver.users</span><br><span class="line"></span><br><span class="line">:1=qyf   #对应5901端口</span><br></pre></td></tr></table></figure>

<p>拷贝模板</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo cp /usr/lib/systemd/system/vncserver@.service /etc/systemd/system/vncserver@1.service</span><br><span class="line"><span class="meta"># </span><span class="language-bash">@1.service 对应：1用户</span></span><br></pre></td></tr></table></figure>

<p>设置密码</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">vncpasswd</span><br><span class="line"></span><br><span class="line">sudo systemctl start vncserver@:1  #对应：1用户</span><br><span class="line"></span><br><span class="line">设置开机启动</span><br><span class="line">sudo systemctl enable vncserver@:1</span><br></pre></td></tr></table></figure>

<p>开启服务</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl start vncserver@:1</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">sudo systemctl start vncserver@:1.service</span></span><br></pre></td></tr></table></figure>

<p>查看端口</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo netstat -tulpn | grep vnc</span><br></pre></td></tr></table></figure>

<p>配置防火墙</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo firewall-cmd --permanent --add-service vnc-server</span><br><span class="line">sudo firewall-cmd --reload</span><br></pre></td></tr></table></figure>







<h4 id="配置青龙面板后-执行python脚本"><a href="#配置青龙面板后-执行python脚本" class="headerlink" title="配置青龙面板后 执行python脚本"></a>配置青龙面板后 执行python脚本</h4><p>1 进入青龙内部</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># </span><span class="language-bash">进入docker</span></span><br><span class="line">docker exec -it qinglong bash</span><br></pre></td></tr></table></figure>

<p>2 安装依赖</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># </span><span class="language-bash">安装 一些看不懂的依赖</span></span><br><span class="line">apk add --no-cache gcc g++ python python-dev py-pip mysql-dev linux-headers libffi-dev openssl-dev</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">安装 脚本 例如dailycheckin签到</span></span><br><span class="line">pip3 install dailycheckin --upgrade</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="language-bash"><span class="comment"># 失败时</span></span></span><br><span class="line">apk add --no-cache --virtual .build-deps gcc musl-dev python2-dev python3-dev libffi libffi-dev openssl openssl-dev</span><br><span class="line">pip3 install pip setuptools --upgrade</span><br><span class="line">pip3 install cryptography~=3.2.1</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>3 执行其他脚本时</p>
<p>将脚本文件放在 &#x2F;ql&#x2F;scripts&#x2F;目录下，比如&#x2F;ql&#x2F;scripts&#x2F;config.json</p>
<p>4 执行命令</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">task everphoto.py</span><br><span class="line"></span><br><span class="line">15 8 * * *</span><br></pre></td></tr></table></figure>



<h4 id="签到文件"><a href="#签到文件" class="headerlink" title="签到文件"></a>签到文件</h4><h5 id="时光相册"><a href="#时光相册" class="headerlink" title="时光相册"></a>时光相册</h5><p>来源：<a target="_blank" rel="noopener" href="https://github.com/ICE99125/everphoto_checkin">https://github.com/ICE99125/everphoto_checkin</a></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># encoding:utf-8</span></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> hashlib</span><br><span class="line"><span class="keyword">import</span> requests <span class="keyword">as</span> req</span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line"><span class="comment">#import Demjson</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 时光相册签到领空间</span></span><br><span class="line"><span class="comment"># 登录信息 账户，密码</span></span><br><span class="line"><span class="comment"># fork in github : https://github.com/ICE99125/everphoto_checkin</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 用户登录信息</span></span><br><span class="line">config = &#123;</span><br><span class="line">    <span class="string">&quot;multi&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">&quot;account&quot;</span>: <span class="string">&quot;17156087896&quot;</span>,</span><br><span class="line">            <span class="string">&quot;password&quot;</span>: <span class="string">&quot;abc211314&quot;</span>,</span><br><span class="line">            <span class="string">&quot;push&quot;</span>: <span class="string">&quot;&quot;</span>, <span class="comment"># together 为 True 时失效, 不写不推送</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">&quot;account&quot;</span>: <span class="string">&quot;17806275268&quot;</span>,</span><br><span class="line">            <span class="string">&quot;password&quot;</span>: <span class="string">&quot;abc211314&quot;</span>,</span><br><span class="line">            <span class="string">&quot;push&quot;</span>: <span class="string">&quot;&quot;</span>, <span class="comment"># together 为 True 时失效, 不写不推送</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment"># &#123;</span></span><br><span class="line">        <span class="comment">#     &quot;account&quot;: &quot;123&quot;,</span></span><br><span class="line">        <span class="comment">#     &quot;password&quot;: &quot;123&quot;,</span></span><br><span class="line">        <span class="comment">#     &quot;push&quot;: &quot;pushplus&quot;,</span></span><br><span class="line">        <span class="comment"># &#125;,</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;together&quot;</span>: <span class="literal">False</span>, <span class="comment"># 是否合并发送结果, 不写或 True 时合并发送</span></span><br><span class="line">    <span class="string">&quot;push&quot;</span>: <span class="string">&quot;&quot;</span>, <span class="comment"># 推送类型, together 为 True 或者不写时必须有, 否则不推送</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 推送信息</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">weChatPush</span>(<span class="params">txt</span>):</span><br><span class="line">    Secret = <span class="string">&quot;GuabRMpWYTIeIkk_Dc-sX5LJi59M_7JfCk9KJrtn8Bs&quot;</span></span><br><span class="line">    corpid = <span class="string">&#x27;ww41560323f54f5b7b&#x27;</span></span><br><span class="line">    url = <span class="string">&#x27;https://qyapi.weixin.qq.com/cgi-bin/gettoken?corpid=&#123;&#125;&amp;corpsecret=&#123;&#125;&#x27;</span></span><br><span class="line">    getr = requests.get(url=url.<span class="built_in">format</span>(corpid, Secret))</span><br><span class="line">    access_token = getr.json().get(<span class="string">&#x27;access_token&#x27;</span>)</span><br><span class="line">    data = &#123;</span><br><span class="line">            <span class="string">&quot;touser&quot;</span>: <span class="string">&quot;@all&quot;</span>,</span><br><span class="line">            <span class="string">&quot;msgtype&quot;</span>: <span class="string">&quot;text&quot;</span>,</span><br><span class="line">            <span class="string">&quot;agentid&quot;</span>: <span class="number">1000003</span>,</span><br><span class="line">            <span class="string">&quot;text&quot;</span>: &#123;</span><br><span class="line">                <span class="string">&quot;content&quot;</span>: <span class="string">&quot;时光相册签到信息：\n\n&quot;</span> + txt</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="string">&quot;safe&quot;</span>: <span class="number">0</span>,</span><br><span class="line">            &#125;</span><br><span class="line">    requests.post(url=<span class="string">&quot;https://qyapi.weixin.qq.com/cgi-bin/message/send?access_token=&#123;&#125;&quot;</span>.<span class="built_in">format</span>(access_token),data=json.dumps(data))</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 返回状态信息</span></span><br><span class="line"><span class="comment">#if res[&quot;status&quot;]: </span></span><br><span class="line"><span class="comment">#             return [</span></span><br><span class="line"><span class="comment">#                 &#123;</span></span><br><span class="line"><span class="comment">#                     &quot;h4&quot;: &#123;</span></span><br><span class="line"><span class="comment">#                         &quot;content&quot;: f&quot;账号: &#123;res[&#x27;account&#x27;]&#125;&quot;,</span></span><br><span class="line"><span class="comment">#                     &#125;</span></span><br><span class="line"><span class="comment">#                 &#125;,</span></span><br><span class="line"><span class="comment">#                 &#123;</span></span><br><span class="line"><span class="comment">#                     &quot;h4&quot;: &#123;</span></span><br><span class="line"><span class="comment">#                         &quot;content&quot;: f&quot;用户名: &#123;res[&#x27;name&#x27;]&#125;&quot;,</span></span><br><span class="line"><span class="comment">#                     &#125;</span></span><br><span class="line"><span class="comment">#                 &#125;,</span></span><br><span class="line"><span class="comment">#                 &#123;</span></span><br><span class="line"><span class="comment">#                     &quot;txt&quot;: &#123;</span></span><br><span class="line"><span class="comment">#                         &quot;content&quot;: res[&quot;message&quot;],</span></span><br><span class="line"><span class="comment">#                     &#125;,</span></span><br><span class="line"><span class="comment">#                     &quot;table&quot;: &#123;</span></span><br><span class="line"><span class="comment">#                         &quot;content&quot;: [</span></span><br><span class="line"><span class="comment">#                             (&quot;描述&quot;, &quot;内容&quot;),</span></span><br><span class="line"><span class="comment">#                             (&quot;今日获得&quot;, f&quot;&#123;res[&#x27;reward&#x27;]&#125;M&quot;),</span></span><br><span class="line"><span class="comment">#                             (&quot;明日获得&quot;, f&quot;&#123;res[&#x27;tomorrow&#x27;]&#125;M&quot;),</span></span><br><span class="line"><span class="comment">#                             (&quot;总共获得&quot;, f&quot;&#123;res[&#x27;total&#x27;]&#125;M&quot;),</span></span><br><span class="line"><span class="comment">#                             (&quot;连续签到&quot;, f&quot;&#123;res[&#x27;continuity&#x27;]&#125;天&quot;),</span></span><br><span class="line"><span class="comment">#                             (&quot;注册时间&quot;, f&quot;&#123;res[&#x27;created&#x27;]&#125;&quot;),</span></span><br><span class="line"><span class="comment">#                             (&quot;注册天数&quot;, f&quot;&#123;res[&#x27;day&#x27;]&#125;天&quot;),</span></span><br><span class="line"><span class="comment">#                         ]</span></span><br><span class="line"><span class="comment">#                     &#125;,</span></span><br><span class="line"><span class="comment">#                 &#125;,</span></span><br><span class="line"><span class="comment">#             ]</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">handler</span>(<span class="params">fn</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">inner</span>(<span class="params">*args, **kwargs</span>):</span><br><span class="line">        res = fn(*args, **kwargs)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> res[<span class="string">&quot;status&quot;</span>]: </span><br><span class="line">            <span class="keyword">return</span> [</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="string">&quot;h4&quot;</span>: &#123;</span><br><span class="line">                        <span class="string">&quot;content&quot;</span>: <span class="string">f&quot;账号: <span class="subst">&#123;res[<span class="string">&#x27;account&#x27;</span>]&#125;</span>&quot;</span>,</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="string">&quot;txt&quot;</span>: &#123;</span><br><span class="line">                        <span class="string">&quot;content&quot;</span>: res[<span class="string">&quot;message&quot;</span>],</span><br><span class="line">                    &#125;,</span><br><span class="line">                    <span class="string">&quot;table&quot;</span>: &#123;</span><br><span class="line">                        <span class="string">&quot;content&quot;</span>: [</span><br><span class="line">                            (<span class="string">&quot;今日获得&quot;</span>, <span class="string">f&quot;<span class="subst">&#123;res[<span class="string">&#x27;reward&#x27;</span>]&#125;</span>M&quot;</span>),</span><br><span class="line">                            (<span class="string">&quot;明日获得&quot;</span>, <span class="string">f&quot;<span class="subst">&#123;res[<span class="string">&#x27;tomorrow&#x27;</span>]&#125;</span>M&quot;</span>),</span><br><span class="line">                            (<span class="string">&quot;总共获得&quot;</span>, <span class="string">f&quot;<span class="subst">&#123;res[<span class="string">&#x27;total&#x27;</span>]&#125;</span>M&quot;</span>),</span><br><span class="line">                            (<span class="string">&quot;连续签到&quot;</span>, <span class="string">f&quot;<span class="subst">&#123;res[<span class="string">&#x27;continuity&#x27;</span>]&#125;</span>天&quot;</span>),</span><br><span class="line">                        ]</span><br><span class="line">                    &#125;,</span><br><span class="line">                &#125;,</span><br><span class="line">            ]</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="comment"># 登录失败 or 签到失败</span></span><br><span class="line">            <span class="keyword">return</span> [</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="string">&quot;h4&quot;</span>: &#123;</span><br><span class="line">                        <span class="string">&quot;content&quot;</span>: <span class="string">f&quot;账号: <span class="subst">&#123;res[<span class="string">&#x27;account&#x27;</span>]&#125;</span>&quot;</span>,</span><br><span class="line">                    &#125;,</span><br><span class="line">                    <span class="string">&quot;txt&quot;</span>: &#123;</span><br><span class="line">                        <span class="string">&quot;content&quot;</span>: res[<span class="string">&quot;message&quot;</span>],</span><br><span class="line">                    &#125;,</span><br><span class="line">                &#125;</span><br><span class="line">            ]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> inner</span><br><span class="line"></span><br><span class="line"><span class="comment"># 日期字符串格式化</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">dateTime_format</span>(<span class="params">dt: <span class="built_in">str</span></span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        dl = datetime.strptime(dt, <span class="string">&quot;%Y-%m-%dT%H:%M:%S+08:00&quot;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> dl.strftime(<span class="string">&quot;%Y-%m-%d %H:%M:%S&quot;</span>)</span><br><span class="line">    <span class="keyword">except</span> ValueError <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;格式化日期时出错, 原因: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Everphoto</span>:</span><br><span class="line">    <span class="comment"># 登录地址</span></span><br><span class="line">    LOGIN_URL = <span class="string">&quot;https://web.everphoto.cn/api/auth&quot;</span></span><br><span class="line">    <span class="comment"># 签到地址</span></span><br><span class="line">    CHECKIN_URL = <span class="string">&quot;https://openapi.everphoto.cn/sf/3/v4/PostCheckIn&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, account: <span class="built_in">str</span>, password: <span class="built_in">str</span></span>) -&gt; <span class="literal">None</span>:</span><br><span class="line">        self.__account = account</span><br><span class="line">        self.__password = password</span><br><span class="line">        self.headers = &#123;</span><br><span class="line">            <span class="string">&quot;user-agent&quot;</span>: <span class="string">&quot;EverPhoto/4.5.0 (Android;4050002;MuMu;23;dev)&quot;</span>,</span><br><span class="line">            <span class="string">&quot;application&quot;</span>: <span class="string">&quot;tc.everphoto&quot;</span>,</span><br><span class="line">        &#125;</span><br><span class="line">        self.userInfo = &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 获取 md5 加密后的密码</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_pwd_md5</span>(<span class="params">self</span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">        salt = <span class="string">&quot;tc.everphoto.&quot;</span></span><br><span class="line">        pwd = salt + self.__password</span><br><span class="line">        md5 = hashlib.md5(pwd.encode())</span><br><span class="line">        <span class="keyword">return</span> md5.hexdigest()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 登陆</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">login</span>(<span class="params">self, country_code: <span class="built_in">str</span> = <span class="string">&quot;+86&quot;</span></span>):</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            data = &#123;</span><br><span class="line">                <span class="string">&quot;mobile&quot;</span>: <span class="string">f&quot;<span class="subst">&#123;country_code&#125;</span><span class="subst">&#123;self.__account&#125;</span>&quot;</span>,</span><br><span class="line">                <span class="string">&quot;password&quot;</span>: self.get_pwd_md5(),</span><br><span class="line">            &#125;</span><br><span class="line">            res = req.post(</span><br><span class="line">                Everphoto.LOGIN_URL,</span><br><span class="line">                data=data,</span><br><span class="line">                headers=self.headers,</span><br><span class="line">            ).json()</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> res.get(<span class="string">&quot;code&quot;</span>) == <span class="number">0</span>:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;🎉 登录账号 <span class="subst">&#123;self.__account&#125;</span> 成功&quot;</span>)</span><br><span class="line">                </span><br><span class="line">                data = res.get(<span class="string">&quot;data&quot;</span>)</span><br><span class="line"></span><br><span class="line">                self.headers.update(&#123;<span class="string">&quot;authorization&quot;</span>: <span class="string">f&quot;Bearer <span class="subst">&#123;data[<span class="string">&#x27;token&#x27;</span>]&#125;</span>&quot;</span>&#125;)</span><br><span class="line">                self.userInfo.update(&#123;</span><br><span class="line">                    <span class="string">&quot;account&quot;</span>: self.__account, <span class="comment"># 账号</span></span><br><span class="line">                    <span class="string">&quot;name&quot;</span>: data[<span class="string">&quot;user_profile&quot;</span>][<span class="string">&quot;name&quot;</span>], <span class="comment"># 用户名</span></span><br><span class="line">                    <span class="string">&quot;vip&quot;</span>: data[<span class="string">&quot;user_profile&quot;</span>].get(<span class="string">&quot;vip_level&quot;</span>), <span class="comment"># vip等级</span></span><br><span class="line">                    <span class="string">&quot;created&quot;</span>: dateTime_format(data[<span class="string">&quot;user_profile&quot;</span>][<span class="string">&quot;created_at&quot;</span>]), <span class="comment"># 创建时间</span></span><br><span class="line">                    <span class="string">&quot;day&quot;</span>: data[<span class="string">&quot;user_profile&quot;</span>][<span class="string">&quot;days_from_created&quot;</span>], <span class="comment"># 注册时长</span></span><br><span class="line">                &#125;)</span><br><span class="line">                <span class="keyword">return</span> &#123;</span><br><span class="line">                    <span class="string">&quot;status&quot;</span>: <span class="literal">True</span></span><br><span class="line">                &#125;</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">raise</span> Exception(res.get(<span class="string">&quot;message&quot;</span>))</span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;😭 登录账号 <span class="subst">&#123;self.__account&#125;</span> 时出现错误, 原因: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> &#123;</span><br><span class="line">                <span class="string">&quot;status&quot;</span>: <span class="literal">False</span>,</span><br><span class="line">                <span class="string">&quot;message&quot;</span>: e,</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 签到</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">checkin</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            headers = &#123;</span><br><span class="line">                <span class="string">&quot;content-type&quot;</span>: <span class="string">&quot;application/json&quot;</span>,</span><br><span class="line">                <span class="string">&quot;host&quot;</span>: <span class="string">&quot;openapi.everphoto.cn&quot;</span>,</span><br><span class="line">                <span class="string">&quot;connection&quot;</span>: <span class="string">&quot;Keep-Alive&quot;</span>,</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            headers.update(self.headers)</span><br><span class="line">            </span><br><span class="line">            res = req.post(</span><br><span class="line">                Everphoto.CHECKIN_URL,</span><br><span class="line">                headers=headers,</span><br><span class="line">            ).json()</span><br><span class="line"></span><br><span class="line">            code = res.get(<span class="string">&#x27;code&#x27;</span>)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> code == <span class="number">0</span>:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;🎉 账号 <span class="subst">&#123;self.__account&#125;</span> 签到成功&quot;</span>)</span><br><span class="line"></span><br><span class="line">                data = res.get(<span class="string">&#x27;data&#x27;</span>)</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> data.get(<span class="string">&quot;checkin_result&quot;</span>) <span class="keyword">is</span> <span class="literal">True</span>:</span><br><span class="line">                    rwd = data[<span class="string">&quot;reward&quot;</span>] / (<span class="number">1024</span> * <span class="number">1024</span>)  <span class="comment"># 今日获得</span></span><br><span class="line">                    msg = <span class="string">&quot;签到成功&quot;</span></span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    rwd = <span class="number">0</span></span><br><span class="line">                    msg = <span class="string">&quot;今日已签到&quot;</span></span><br><span class="line"></span><br><span class="line">                <span class="keyword">return</span> &#123;</span><br><span class="line">                    <span class="string">&quot;status&quot;</span>: <span class="literal">True</span>,</span><br><span class="line">                    <span class="string">&quot;reward&quot;</span>: rwd,</span><br><span class="line">                    <span class="string">&quot;message&quot;</span>: msg,</span><br><span class="line">                    <span class="string">&quot;continuity&quot;</span>: data.get(<span class="string">&quot;continuity&quot;</span>), <span class="comment"># 连续签到天数</span></span><br><span class="line">                    <span class="string">&quot;total&quot;</span>: data.get(<span class="string">&quot;total_reward&quot;</span>) / (<span class="number">1024</span> * <span class="number">1024</span>), <span class="comment"># 总计获得</span></span><br><span class="line">                    <span class="string">&quot;tomorrow&quot;</span>: data.get(<span class="string">&quot;tomorrow_reward&quot;</span>) / (<span class="number">1024</span> * <span class="number">1024</span>), <span class="comment"># 明日可获得</span></span><br><span class="line">                &#125;</span><br><span class="line">            <span class="keyword">elif</span> code == <span class="number">20104</span>:</span><br><span class="line">                <span class="comment"># 未登录</span></span><br><span class="line">                <span class="keyword">raise</span> Exception(res.get(<span class="string">&#x27;message&#x27;</span>))</span><br><span class="line">            <span class="keyword">elif</span> code == <span class="number">30001</span>:</span><br><span class="line">                <span class="comment"># 服务器内部错误?</span></span><br><span class="line">                <span class="keyword">raise</span> Exception(res.get(<span class="string">&#x27;message&#x27;</span>))</span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;账号 <span class="subst">&#123;self.__account&#125;</span> 签到时出现错误, 原因: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> &#123;</span><br><span class="line">                <span class="string">&quot;status&quot;</span>: <span class="literal">False</span>,</span><br><span class="line">                <span class="string">&quot;message&quot;</span>: <span class="string">f&quot;签到失败, 原因: <span class="subst">&#123;e&#125;</span>&quot;</span>,</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">    @handler</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">start</span>(<span class="params">self</span>):</span><br><span class="line">        r = self.login()</span><br><span class="line">        <span class="keyword">if</span> r[<span class="string">&quot;status&quot;</span>]:</span><br><span class="line">            res = self.checkin()</span><br><span class="line">            </span><br><span class="line">            result = &#123;&#125;</span><br><span class="line">            result.update(self.userInfo)</span><br><span class="line">            result.update(res)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> result</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> &#123;</span><br><span class="line">                <span class="string">&quot;status&quot;</span>: <span class="literal">False</span>,</span><br><span class="line">                <span class="string">&quot;message&quot;</span>: <span class="string">f&quot;登录失败, 原因: <span class="subst">&#123;r[<span class="string">&#x27;message&#x27;</span>]&#125;</span>&quot;</span>,</span><br><span class="line">                <span class="string">&quot;account&quot;</span>: self.__account,</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>(<span class="params">*arg</span>):</span><br><span class="line">    together = config.get(<span class="string">&quot;together&quot;</span>)</span><br><span class="line">    <span class="built_in">type</span> = config.get(<span class="string">&quot;push&quot;</span>)</span><br><span class="line">    multi = config.get(<span class="string">&quot;multi&quot;</span>)</span><br><span class="line">    txt = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    msg_list = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> multi:</span><br><span class="line">        b = Everphoto(i[<span class="string">&quot;account&quot;</span>], i[<span class="string">&#x27;password&#x27;</span>])</span><br><span class="line">        res = b.start()</span><br><span class="line">        msg_list.extend(res)</span><br><span class="line">        </span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> msg_list:</span><br><span class="line">        <span class="keyword">if</span> <span class="string">&#x27;h4&#x27;</span> <span class="keyword">in</span> i:</span><br><span class="line">            txt =txt + i[<span class="string">&#x27;h4&#x27;</span>][<span class="string">&#x27;content&#x27;</span>]+ <span class="string">&#x27;\n&#x27;</span></span><br><span class="line">        <span class="keyword">if</span> <span class="string">&#x27;txt&#x27;</span> <span class="keyword">in</span> i:</span><br><span class="line">            txt =txt + i[<span class="string">&#x27;txt&#x27;</span>][<span class="string">&#x27;content&#x27;</span>]+ <span class="string">&#x27;\n&#x27;</span></span><br><span class="line">        <span class="keyword">if</span> <span class="string">&#x27;table&#x27;</span> <span class="keyword">in</span> i:</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> i[<span class="string">&#x27;table&#x27;</span>][<span class="string">&#x27;content&#x27;</span>]:</span><br><span class="line">                txt =txt + j[<span class="number">0</span>]+<span class="string">&#x27;:&#x27;</span>+ j[<span class="number">1</span>]+<span class="string">&#x27;\n&#x27;</span></span><br><span class="line">    weChatPush(txt)</span><br><span class="line">    <span class="comment">#print(txt)</span></span><br><span class="line">      </span><br><span class="line">   </span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">  main()</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="UPC"><a href="#UPC" class="headerlink" title="UPC"></a>UPC</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># -*- coding: utf8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"><span class="keyword">import</span> requests, time, json, configparser, random, os</span><br><span class="line"></span><br><span class="line"><span class="comment"># 模拟包头</span></span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/63.0.3239.132 Safari/537.36&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;X-Requested-With&#x27;</span>: <span class="string">&#x27;XMLHttpRequest&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取当前的时间</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_time</span>():</span><br><span class="line">    <span class="keyword">return</span> time.strftime(<span class="string">&#x27;%Y%m%d&#x27;</span>, time.localtime(time.time()))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 帐号密码信息读取</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">getUserInfo</span>():</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        usernames = (<span class="string">&#x27;Z20070031&#x27;</span>, )</span><br><span class="line">        passwords = (<span class="string">&#x27;Qyf9999.&#x27;</span>, )</span><br><span class="line">        emails = (<span class="string">&#x27;1490316377@qq.com&#x27;</span>, )</span><br><span class="line"></span><br><span class="line">        <span class="comment">#print(&#x27;get userdata success&#x27;)</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">list</span>(<span class="built_in">zip</span>(usernames, passwords, emails))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;get userdata failed\n %s&#x27;</span> % e)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 帐号密码信息读取</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">getSMTPInfo</span>():</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        user = <span class="string">&#x27;1490316377@qq.com&#x27;</span></span><br><span class="line">        password = <span class="string">&#x27;uujoaixwfcdkhdca&#x27;</span></span><br><span class="line">        host = <span class="string">&#x27;smtp.qq.com&#x27;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">#print(&#x27;get SMTP info success&#x27;)</span></span><br><span class="line">        <span class="keyword">return</span> user, password, host</span><br><span class="line"></span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;get userdata failed\n %s&#x27;</span> % e)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 登录并获取old_info</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">login</span>(<span class="params">userdata</span>):</span><br><span class="line">    login_url = <span class="string">&quot;https://app.upc.edu.cn/uc/wap/login/check&quot;</span></span><br><span class="line">    session = requests.session()</span><br><span class="line">    response = session.post(login_url, headers=headers, data=userdata, timeout=<span class="number">20</span>)</span><br><span class="line">    response.encoding = <span class="string">&quot;UTF-8&quot;</span></span><br><span class="line">    <span class="comment"># print(response.text,&#x27;\n&#x27;)</span></span><br><span class="line">    info_url = <span class="string">&quot;https://app.upc.edu.cn/ncov/wap/default/index&quot;</span></span><br><span class="line">    html_info = session.get(info_url, headers=headers, timeout=<span class="number">20</span>)</span><br><span class="line">    html_info.encoding = <span class="string">&quot;UTF-8&quot;</span></span><br><span class="line">    <span class="keyword">return</span> session, html_info.text</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 企业号推送</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">weChatPush</span>(<span class="params">txt</span>):</span><br><span class="line">    Secret = <span class="string">&quot;GuabRMpWYTIeIkk_Dc-sX5LJi59M_7JfCk9KJrtn8Bs&quot;</span></span><br><span class="line">    corpid = <span class="string">&#x27;ww41560323f54f5b7b&#x27;</span></span><br><span class="line">    url = <span class="string">&#x27;https://qyapi.weixin.qq.com/cgi-bin/gettoken?corpid=&#123;&#125;&amp;corpsecret=&#123;&#125;&#x27;</span></span><br><span class="line">    getr = requests.get(url=url.<span class="built_in">format</span>(corpid, Secret))</span><br><span class="line">    access_token = getr.json().get(<span class="string">&#x27;access_token&#x27;</span>)</span><br><span class="line">    data = &#123;</span><br><span class="line">        <span class="string">&quot;touser&quot;</span>: <span class="string">&quot;@all&quot;</span>,</span><br><span class="line">        <span class="string">&quot;msgtype&quot;</span>: <span class="string">&quot;text&quot;</span>,</span><br><span class="line">        <span class="string">&quot;agentid&quot;</span>: <span class="number">1000003</span>,</span><br><span class="line">        <span class="string">&quot;text&quot;</span>: &#123;</span><br><span class="line">            <span class="string">&quot;content&quot;</span>: <span class="string">&quot;疫情防控\n&quot;</span> + txt</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">&quot;safe&quot;</span>: <span class="number">0</span>,</span><br><span class="line">    &#125;</span><br><span class="line">    requests.post(url=<span class="string">&quot;https://qyapi.weixin.qq.com/cgi-bin/message/send?access_token=&#123;&#125;&quot;</span>.<span class="built_in">format</span>(access_token),</span><br><span class="line">                  data=json.dumps(data))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">save_info</span>(<span class="params">session, info</span>):</span><br><span class="line">    save_url = <span class="string">&quot;https://app.upc.edu.cn/ncov/wap/default/save&quot;</span></span><br><span class="line">    save_response = session.post(url=save_url, data=info, headers=headers, timeout=<span class="number">20</span>)</span><br><span class="line">    save_response.encoding = <span class="string">&quot;UTF-8&quot;</span></span><br><span class="line">    <span class="keyword">return</span> save_response.text</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">process</span>(<span class="params">userdata, email_address</span>):</span><br><span class="line">    <span class="comment"># 登录返回old_info</span></span><br><span class="line">    session, html = login(userdata)</span><br><span class="line">    <span class="comment"># print(html)</span></span><br><span class="line">    old_info = json.loads(html)[<span class="string">&#x27;d&#x27;</span>][<span class="string">&#x27;oldInfo&#x27;</span>]</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 获取当前日期</span></span><br><span class="line">    today_date = get_time()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 重构old_info</span></span><br><span class="line">    old_info[<span class="string">&#x27;date&#x27;</span>] = today_date</span><br><span class="line">    <span class="comment"># print(old_info)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 提交信息，对应的接口为save</span></span><br><span class="line">    save_res = save_info(session, old_info)</span><br><span class="line">    <span class="built_in">print</span>(userdata.get(<span class="string">&quot;username&quot;</span>))</span><br><span class="line">    <span class="built_in">print</span>(<span class="built_in">str</span>(json.loads(save_res)[<span class="string">&#x27;m&#x27;</span>]))</span><br><span class="line">    session.close()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> email_address:</span><br><span class="line">        <span class="comment"># 结束后发送邮件</span></span><br><span class="line">        <span class="keyword">if</span> json.loads(save_res)[<span class="string">&#x27;m&#x27;</span>] == <span class="string">&#x27;操作成功&#x27;</span>:</span><br><span class="line">            <span class="comment">#send_email(&quot;信息填报成功！&quot;, &quot;账号：&quot; + userdata.get(&quot;username&quot;) + &quot;\n结果：&quot; + str(json.loads(save_res)[&#x27;m&#x27;]),</span></span><br><span class="line">            <span class="comment">#           email_address)</span></span><br><span class="line">            <span class="keyword">if</span> (userdata.get(<span class="string">&quot;username&quot;</span>) == <span class="string">&#x27;Z20070031&#x27;</span>):</span><br><span class="line">                weChatPush(<span class="string">&quot;信息填报成功！\n账号：&quot;</span> + userdata.get(<span class="string">&quot;username&quot;</span>))</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="comment">#send_email(&quot;信息填报失败！可能是已经提交过了！&quot;,</span></span><br><span class="line">            <span class="comment">#           &quot;账号：&quot; + userdata.get(&quot;username&quot;) + &quot;\n&quot; + str(json.loads(save_res)[&#x27;m&#x27;]) + &quot;\n请看今天第一个邮件或手动签到！&quot;,</span></span><br><span class="line">            <span class="comment">#           email_address)</span></span><br><span class="line">            <span class="keyword">if</span> (userdata.get(<span class="string">&quot;username&quot;</span>) == <span class="string">&#x27;Z20070031&#x27;</span>):</span><br><span class="line">                weChatPush(<span class="string">&quot;信息填报失败！\n账号：&quot;</span> + userdata.get(<span class="string">&quot;username&quot;</span>) + <span class="string">&quot;\n请看今天第一条信息或手动签到！&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    <span class="comment"># 获取用户信息</span></span><br><span class="line">    userinfos = getUserInfo()</span><br><span class="line">    <span class="built_in">print</span>(time.strftime(<span class="string">&#x27;%Y-%m-%d %H:%M:%S&#x27;</span>, time.localtime(time.time())))</span><br><span class="line">    time.sleep(random.randint(<span class="number">300</span>, <span class="number">500</span>))</span><br><span class="line">    <span class="built_in">print</span>(time.strftime(<span class="string">&#x27;%Y-%m-%d %H:%M:%S&#x27;</span>, time.localtime(time.time())))</span><br><span class="line">    <span class="keyword">for</span> user <span class="keyword">in</span> userinfos:</span><br><span class="line">        user_data = &#123;</span><br><span class="line">            <span class="string">&#x27;username&#x27;</span>: user[<span class="number">0</span>],</span><br><span class="line">            <span class="string">&#x27;password&#x27;</span>: user[<span class="number">1</span>]</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        process(user_data, user[<span class="number">2</span>])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h5 id="网易云音乐"><a href="#网易云音乐" class="headerlink" title="网易云音乐"></a>网易云音乐</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br><span class="line">780</span><br><span class="line">781</span><br><span class="line">782</span><br><span class="line">783</span><br><span class="line">784</span><br><span class="line">785</span><br><span class="line">786</span><br><span class="line">787</span><br><span class="line">788</span><br><span class="line">789</span><br><span class="line">790</span><br><span class="line">791</span><br><span class="line">792</span><br><span class="line">793</span><br><span class="line">794</span><br><span class="line">795</span><br><span class="line">796</span><br><span class="line">797</span><br><span class="line">798</span><br><span class="line">799</span><br><span class="line">800</span><br><span class="line">801</span><br><span class="line">802</span><br><span class="line">803</span><br><span class="line">804</span><br><span class="line">805</span><br><span class="line">806</span><br><span class="line">807</span><br><span class="line">808</span><br><span class="line">809</span><br><span class="line">810</span><br><span class="line">811</span><br><span class="line">812</span><br><span class="line">813</span><br><span class="line">814</span><br><span class="line">815</span><br><span class="line">816</span><br><span class="line">817</span><br><span class="line">818</span><br><span class="line">819</span><br><span class="line">820</span><br><span class="line">821</span><br><span class="line">822</span><br><span class="line">823</span><br><span class="line">824</span><br><span class="line">825</span><br><span class="line">826</span><br><span class="line">827</span><br><span class="line">828</span><br><span class="line">829</span><br><span class="line">830</span><br><span class="line">831</span><br><span class="line">832</span><br><span class="line">833</span><br><span class="line">834</span><br><span class="line">835</span><br><span class="line">836</span><br><span class="line">837</span><br><span class="line">838</span><br><span class="line">839</span><br><span class="line">840</span><br><span class="line">841</span><br><span class="line">842</span><br><span class="line">843</span><br><span class="line">844</span><br><span class="line">845</span><br><span class="line">846</span><br><span class="line">847</span><br><span class="line">848</span><br><span class="line">849</span><br><span class="line">850</span><br><span class="line">851</span><br><span class="line">852</span><br><span class="line">853</span><br><span class="line">854</span><br><span class="line">855</span><br><span class="line">856</span><br><span class="line">857</span><br><span class="line">858</span><br><span class="line">859</span><br><span class="line">860</span><br><span class="line">861</span><br><span class="line">862</span><br><span class="line">863</span><br><span class="line">864</span><br><span class="line">865</span><br><span class="line">866</span><br><span class="line">867</span><br><span class="line">868</span><br><span class="line">869</span><br><span class="line">870</span><br><span class="line">871</span><br><span class="line">872</span><br><span class="line">873</span><br><span class="line">874</span><br><span class="line">875</span><br><span class="line">876</span><br><span class="line">877</span><br><span class="line">878</span><br><span class="line">879</span><br><span class="line">880</span><br><span class="line">881</span><br><span class="line">882</span><br><span class="line">883</span><br><span class="line">884</span><br><span class="line">885</span><br><span class="line">886</span><br><span class="line">887</span><br><span class="line">888</span><br><span class="line">889</span><br><span class="line">890</span><br><span class="line">891</span><br><span class="line">892</span><br><span class="line">893</span><br><span class="line">894</span><br><span class="line">895</span><br><span class="line">896</span><br><span class="line">897</span><br><span class="line">898</span><br><span class="line">899</span><br><span class="line">900</span><br><span class="line">901</span><br><span class="line">902</span><br><span class="line">903</span><br><span class="line">904</span><br><span class="line">905</span><br><span class="line">906</span><br><span class="line">907</span><br><span class="line">908</span><br><span class="line">909</span><br><span class="line">910</span><br><span class="line">911</span><br><span class="line">912</span><br><span class="line">913</span><br><span class="line">914</span><br><span class="line">915</span><br><span class="line">916</span><br><span class="line">917</span><br><span class="line">918</span><br><span class="line">919</span><br><span class="line">920</span><br><span class="line">921</span><br><span class="line">922</span><br><span class="line">923</span><br><span class="line">924</span><br><span class="line">925</span><br><span class="line">926</span><br><span class="line">927</span><br><span class="line">928</span><br><span class="line">929</span><br><span class="line">930</span><br><span class="line">931</span><br><span class="line">932</span><br><span class="line">933</span><br><span class="line">934</span><br><span class="line">935</span><br><span class="line">936</span><br><span class="line">937</span><br><span class="line">938</span><br><span class="line">939</span><br><span class="line">940</span><br><span class="line">941</span><br><span class="line">942</span><br><span class="line">943</span><br><span class="line">944</span><br><span class="line">945</span><br><span class="line">946</span><br><span class="line">947</span><br><span class="line">948</span><br><span class="line">949</span><br><span class="line">950</span><br><span class="line">951</span><br><span class="line">952</span><br><span class="line">953</span><br><span class="line">954</span><br><span class="line">955</span><br><span class="line">956</span><br><span class="line">957</span><br><span class="line">958</span><br><span class="line">959</span><br><span class="line">960</span><br><span class="line">961</span><br><span class="line">962</span><br><span class="line">963</span><br><span class="line">964</span><br><span class="line">965</span><br><span class="line">966</span><br><span class="line">967</span><br><span class="line">968</span><br><span class="line">969</span><br><span class="line">970</span><br><span class="line">971</span><br><span class="line">972</span><br><span class="line">973</span><br><span class="line">974</span><br><span class="line">975</span><br><span class="line">976</span><br><span class="line">977</span><br><span class="line">978</span><br><span class="line">979</span><br><span class="line">980</span><br><span class="line">981</span><br><span class="line">982</span><br><span class="line">983</span><br><span class="line">984</span><br><span class="line">985</span><br><span class="line">986</span><br><span class="line">987</span><br><span class="line">988</span><br><span class="line">989</span><br><span class="line">990</span><br><span class="line">991</span><br><span class="line">992</span><br><span class="line">993</span><br><span class="line">994</span><br><span class="line">995</span><br><span class="line">996</span><br><span class="line">997</span><br><span class="line">998</span><br><span class="line">999</span><br><span class="line">1000</span><br><span class="line">1001</span><br><span class="line">1002</span><br><span class="line">1003</span><br><span class="line">1004</span><br><span class="line">1005</span><br><span class="line">1006</span><br><span class="line">1007</span><br><span class="line">1008</span><br><span class="line">1009</span><br><span class="line">1010</span><br><span class="line">1011</span><br><span class="line">1012</span><br><span class="line">1013</span><br><span class="line">1014</span><br><span class="line">1015</span><br><span class="line">1016</span><br><span class="line">1017</span><br><span class="line">1018</span><br><span class="line">1019</span><br><span class="line">1020</span><br><span class="line">1021</span><br><span class="line">1022</span><br><span class="line">1023</span><br><span class="line">1024</span><br><span class="line">1025</span><br><span class="line">1026</span><br><span class="line">1027</span><br><span class="line">1028</span><br><span class="line">1029</span><br><span class="line">1030</span><br><span class="line">1031</span><br><span class="line">1032</span><br><span class="line">1033</span><br><span class="line">1034</span><br><span class="line">1035</span><br><span class="line">1036</span><br><span class="line">1037</span><br><span class="line">1038</span><br><span class="line">1039</span><br><span class="line">1040</span><br><span class="line">1041</span><br><span class="line">1042</span><br><span class="line">1043</span><br><span class="line">1044</span><br><span class="line">1045</span><br><span class="line">1046</span><br><span class="line">1047</span><br><span class="line">1048</span><br><span class="line">1049</span><br><span class="line">1050</span><br><span class="line">1051</span><br><span class="line">1052</span><br><span class="line">1053</span><br><span class="line">1054</span><br><span class="line">1055</span><br><span class="line">1056</span><br><span class="line">1057</span><br><span class="line">1058</span><br><span class="line">1059</span><br><span class="line">1060</span><br><span class="line">1061</span><br><span class="line">1062</span><br><span class="line">1063</span><br><span class="line">1064</span><br><span class="line">1065</span><br><span class="line">1066</span><br><span class="line">1067</span><br><span class="line">1068</span><br><span class="line">1069</span><br><span class="line">1070</span><br><span class="line">1071</span><br><span class="line">1072</span><br><span class="line">1073</span><br><span class="line">1074</span><br><span class="line">1075</span><br><span class="line">1076</span><br><span class="line">1077</span><br><span class="line">1078</span><br><span class="line">1079</span><br><span class="line">1080</span><br><span class="line">1081</span><br><span class="line">1082</span><br><span class="line">1083</span><br><span class="line">1084</span><br><span class="line">1085</span><br><span class="line">1086</span><br><span class="line">1087</span><br><span class="line">1088</span><br><span class="line">1089</span><br><span class="line">1090</span><br><span class="line">1091</span><br><span class="line">1092</span><br><span class="line">1093</span><br><span class="line">1094</span><br><span class="line">1095</span><br><span class="line">1096</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># 需要在docke内导入几个包</span></span><br><span class="line"><span class="comment"># from Crypto.Cipher import AES</span></span><br><span class="line"><span class="comment"># from future.builtins import int, pow</span></span><br><span class="line"><span class="comment"># pip3 install future</span></span><br><span class="line"><span class="comment"># pip3 install pycrypto</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># coding: utf-8</span></span><br><span class="line"><span class="keyword">from</span> __future__ <span class="keyword">import</span> print_function, unicode_literals, division, absolute_import</span><br><span class="line"><span class="keyword">import</span> random, hashlib, math, re</span><br><span class="line"><span class="keyword">import</span> base64</span><br><span class="line"><span class="keyword">import</span> binascii</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> platform</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> http.cookiejar <span class="keyword">import</span> Cookie</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> Crypto.Cipher <span class="keyword">import</span> AES</span><br><span class="line"><span class="keyword">from</span> future.builtins <span class="keyword">import</span> <span class="built_in">int</span>, <span class="built_in">pow</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># API</span></span><br><span class="line">DEFAULT_TIMEOUT = <span class="number">10</span></span><br><span class="line"></span><br><span class="line">BASE_URL = <span class="string">&quot;http://music.163.com&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">NetEase</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        self.header = &#123;</span><br><span class="line">            <span class="string">&quot;Accept&quot;</span>: <span class="string">&quot;*/*&quot;</span>,</span><br><span class="line">            <span class="string">&quot;Accept-Encoding&quot;</span>: <span class="string">&quot;gzip,deflate,sdch&quot;</span>,</span><br><span class="line">            <span class="string">&quot;Accept-Language&quot;</span>: <span class="string">&quot;zh-CN,zh;q=0.8,gl;q=0.6,zh-TW;q=0.4&quot;</span>,</span><br><span class="line">            <span class="string">&quot;Connection&quot;</span>: <span class="string">&quot;keep-alive&quot;</span>,</span><br><span class="line">            <span class="string">&quot;Content-Type&quot;</span>: <span class="string">&quot;application/x-www-form-urlencoded&quot;</span>,</span><br><span class="line">            <span class="string">&quot;Host&quot;</span>: <span class="string">&quot;music.163.com&quot;</span>,</span><br><span class="line">            <span class="string">&quot;Referer&quot;</span>: <span class="string">&quot;http://music.163.com&quot;</span>,</span><br><span class="line">            <span class="string">&quot;User-Agent&quot;</span>: <span class="string">&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/59.0.3071.115 Safari/537.36&quot;</span>,</span><br><span class="line">        &#125;</span><br><span class="line">        self.session = requests.Session()</span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">toplists</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> [l[<span class="number">0</span>] <span class="keyword">for</span> l <span class="keyword">in</span> TOP_LIST_ALL.values()]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_raw_request</span>(<span class="params">self, method, endpoint, data=<span class="literal">None</span></span>):</span><br><span class="line">        <span class="keyword">if</span> method == <span class="string">&quot;GET&quot;</span>:</span><br><span class="line">            resp = self.session.get(</span><br><span class="line">                endpoint, params=data, headers=self.header, timeout=DEFAULT_TIMEOUT</span><br><span class="line">            )</span><br><span class="line">        <span class="keyword">elif</span> method == <span class="string">&quot;POST&quot;</span>:</span><br><span class="line">            resp = self.session.post(</span><br><span class="line">                endpoint, data=data, headers=self.header, timeout=DEFAULT_TIMEOUT</span><br><span class="line">            )</span><br><span class="line">        <span class="keyword">return</span> resp</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 生成Cookie对象</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">make_cookie</span>(<span class="params">self, name, value</span>):</span><br><span class="line">        <span class="keyword">return</span> Cookie(</span><br><span class="line">            version=<span class="number">0</span>,</span><br><span class="line">            name=name,</span><br><span class="line">            value=value,</span><br><span class="line">            port=<span class="literal">None</span>,</span><br><span class="line">            port_specified=<span class="literal">False</span>,</span><br><span class="line">            domain=<span class="string">&quot;music.163.com&quot;</span>,</span><br><span class="line">            domain_specified=<span class="literal">True</span>,</span><br><span class="line">            domain_initial_dot=<span class="literal">False</span>,</span><br><span class="line">            path=<span class="string">&quot;/&quot;</span>,</span><br><span class="line">            path_specified=<span class="literal">True</span>,</span><br><span class="line">            secure=<span class="literal">False</span>,</span><br><span class="line">            expires=<span class="literal">None</span>,</span><br><span class="line">            discard=<span class="literal">False</span>,</span><br><span class="line">            comment=<span class="literal">None</span>,</span><br><span class="line">            comment_url=<span class="literal">None</span>,</span><br><span class="line">            rest=&#123;&#125;,</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">request</span>(<span class="params">self, method, path, params=&#123;&#125;, default=&#123;<span class="string">&quot;code&quot;</span>: -<span class="number">1</span>&#125;, custom_cookies=&#123;<span class="string">&#x27;os&#x27;</span>:<span class="string">&#x27;pc&#x27;</span>&#125;</span>):</span><br><span class="line">        endpoint = <span class="string">&quot;&#123;&#125;&#123;&#125;&quot;</span>.<span class="built_in">format</span>(BASE_URL, path)</span><br><span class="line">        csrf_token = <span class="string">&quot;&quot;</span></span><br><span class="line">        <span class="keyword">for</span> cookie <span class="keyword">in</span> self.session.cookies:</span><br><span class="line">            <span class="keyword">if</span> cookie.name == <span class="string">&quot;__csrf&quot;</span>:</span><br><span class="line">                csrf_token = cookie.value</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">        params.update(&#123;<span class="string">&quot;csrf_token&quot;</span>: csrf_token&#125;)</span><br><span class="line">        data = default</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> key, value <span class="keyword">in</span> custom_cookies.items():</span><br><span class="line">            cookie = self.make_cookie(key, value)</span><br><span class="line">            self.session.cookies.set_cookie(cookie)</span><br><span class="line"></span><br><span class="line">        params = encrypted_request(params)</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            resp = self._raw_request(method, endpoint, params)</span><br><span class="line">            data = resp.json()</span><br><span class="line">        <span class="keyword">except</span> requests.exceptions.RequestException <span class="keyword">as</span> e:</span><br><span class="line">            log.error(e)</span><br><span class="line">        <span class="keyword">except</span> ValueError <span class="keyword">as</span> e:</span><br><span class="line">            log.error(<span class="string">&quot;Path: &#123;&#125;, response: &#123;&#125;&quot;</span>.<span class="built_in">format</span>(path, resp.text[:<span class="number">200</span>]))</span><br><span class="line">        <span class="keyword">finally</span>:</span><br><span class="line">            <span class="keyword">return</span> data</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">login</span>(<span class="params">self, username, password</span>):</span><br><span class="line">        <span class="comment">#self.session.cookies.load()</span></span><br><span class="line">        <span class="keyword">if</span> username.isdigit():</span><br><span class="line">            path = <span class="string">&quot;/weapi/login/cellphone&quot;</span></span><br><span class="line">            params = <span class="built_in">dict</span>(phone=username, password=password, rememberLogin=<span class="string">&quot;true&quot;</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="comment"># magic token for login</span></span><br><span class="line">            <span class="comment"># see https://github.com/Binaryify/NeteaseCloudMusicApi/blob/master/router/login.js#L15</span></span><br><span class="line">            client_token = (</span><br><span class="line">                <span class="string">&quot;1_jVUMqWEPke0/1/Vu56xCmJpo5vP1grjn_SOVVDzOc78w8OKLVZ2JH7IfkjSXqgfmh&quot;</span></span><br><span class="line">            )</span><br><span class="line">            path = <span class="string">&quot;/weapi/login&quot;</span></span><br><span class="line">            params = <span class="built_in">dict</span>(</span><br><span class="line">                username=username,</span><br><span class="line">                password=password,</span><br><span class="line">                rememberLogin=<span class="string">&quot;true&quot;</span>,</span><br><span class="line">                clientToken=client_token,</span><br><span class="line">            )</span><br><span class="line">        data = self.request(<span class="string">&quot;POST&quot;</span>, path, params)</span><br><span class="line">        <span class="keyword">if</span> data[<span class="string">&#x27;code&#x27;</span>] == <span class="number">200</span>:</span><br><span class="line">            self.uid = data[<span class="string">&#x27;account&#x27;</span>][<span class="string">&#x27;id&#x27;</span>]</span><br><span class="line">            <span class="built_in">print</span>(username+<span class="string">&#x27;登录成功！&#x27;</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            self.uid = <span class="number">0</span>            </span><br><span class="line">        <span class="keyword">return</span> data</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 每日签到</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">daily_task</span>(<span class="params">self, is_mobile=<span class="literal">True</span></span>):</span><br><span class="line">        path = <span class="string">&quot;/weapi/point/dailyTask&quot;</span></span><br><span class="line">        params = <span class="built_in">dict</span>(<span class="built_in">type</span>=<span class="number">0</span> <span class="keyword">if</span> is_mobile <span class="keyword">else</span> <span class="number">1</span>)</span><br><span class="line">        <span class="keyword">return</span> self.request(<span class="string">&quot;POST&quot;</span>, path, params)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 用户歌单</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">user_playlist</span>(<span class="params">self, uid, offset=<span class="number">0</span>, limit=<span class="number">50</span></span>):</span><br><span class="line">        path = <span class="string">&quot;/weapi/user/playlist&quot;</span></span><br><span class="line">        params = <span class="built_in">dict</span>(uid=uid, offset=offset, limit=limit, csrf_token=<span class="string">&quot;&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> self.request(<span class="string">&quot;POST&quot;</span>, path, params).get(<span class="string">&quot;playlist&quot;</span>, [])</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 每日推荐歌单</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">recommend_resource</span>(<span class="params">self</span>):</span><br><span class="line">        path = <span class="string">&quot;/weapi/v1/discovery/recommend/resource&quot;</span></span><br><span class="line">        <span class="keyword">return</span> self.request(<span class="string">&quot;POST&quot;</span>, path).get(<span class="string">&quot;recommend&quot;</span>, [])</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 每日推荐歌曲</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">recommend_playlist</span>(<span class="params">self, total=<span class="literal">True</span>, offset=<span class="number">0</span>, limit=<span class="number">20</span></span>):</span><br><span class="line">        path = <span class="string">&quot;/weapi/v1/discovery/recommend/songs&quot;</span>  <span class="comment"># NOQA</span></span><br><span class="line">        params = <span class="built_in">dict</span>(total=total, offset=offset, limit=limit, csrf_token=<span class="string">&quot;&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> self.request(<span class="string">&quot;POST&quot;</span>, path, params).get(<span class="string">&quot;recommend&quot;</span>, [])</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 私人FM</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">personal_fm</span>(<span class="params">self</span>):</span><br><span class="line">        path = <span class="string">&quot;/weapi/v1/radio/get&quot;</span></span><br><span class="line">        <span class="keyword">return</span> self.request(<span class="string">&quot;POST&quot;</span>, path).get(<span class="string">&quot;data&quot;</span>, [])</span><br><span class="line"></span><br><span class="line">    <span class="comment"># like</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">fm_like</span>(<span class="params">self, songid, like=<span class="literal">True</span>, time=<span class="number">25</span>, alg=<span class="string">&quot;itembased&quot;</span></span>):</span><br><span class="line">        path = <span class="string">&quot;/weapi/radio/like&quot;</span></span><br><span class="line">        params = <span class="built_in">dict</span>(</span><br><span class="line">            alg=alg, trackId=songid, like=<span class="string">&quot;true&quot;</span> <span class="keyword">if</span> like <span class="keyword">else</span> <span class="string">&quot;false&quot;</span>, time=time</span><br><span class="line">        )</span><br><span class="line">        <span class="keyword">return</span> self.request(<span class="string">&quot;POST&quot;</span>, path, params)[<span class="string">&quot;code&quot;</span>] == <span class="number">200</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># FM trash</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">fm_trash</span>(<span class="params">self, songid, time=<span class="number">25</span>, alg=<span class="string">&quot;RT&quot;</span></span>):</span><br><span class="line">        path = <span class="string">&quot;/weapi/radio/trash/add&quot;</span></span><br><span class="line">        params = <span class="built_in">dict</span>(songId=songid, alg=alg, time=time)</span><br><span class="line">        <span class="keyword">return</span> self.request(<span class="string">&quot;POST&quot;</span>, path, params)[<span class="string">&quot;code&quot;</span>] == <span class="number">200</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 搜索单曲(1)，歌手(100)，专辑(10)，歌单(1000)，用户(1002) *(type)*</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">search</span>(<span class="params">self, keywords, stype=<span class="number">1</span>, offset=<span class="number">0</span>, total=<span class="string">&quot;true&quot;</span>, limit=<span class="number">50</span></span>):</span><br><span class="line">        path = <span class="string">&quot;/weapi/search/get&quot;</span></span><br><span class="line">        params = <span class="built_in">dict</span>(s=keywords, <span class="built_in">type</span>=stype, offset=offset, total=total, limit=limit)</span><br><span class="line">        <span class="keyword">return</span> self.request(<span class="string">&quot;POST&quot;</span>, path, params).get(<span class="string">&quot;result&quot;</span>, &#123;&#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 新碟上架</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">new_albums</span>(<span class="params">self, offset=<span class="number">0</span>, limit=<span class="number">50</span></span>):</span><br><span class="line">        path = <span class="string">&quot;/weapi/album/new&quot;</span></span><br><span class="line">        params = <span class="built_in">dict</span>(area=<span class="string">&quot;ALL&quot;</span>, offset=offset, total=<span class="literal">True</span>, limit=limit)</span><br><span class="line">        <span class="keyword">return</span> self.request(<span class="string">&quot;POST&quot;</span>, path, params).get(<span class="string">&quot;albums&quot;</span>, [])</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 歌单（网友精选碟） hot||new http://music.163.com/#/discover/playlist/</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">top_playlists</span>(<span class="params">self, category=<span class="string">&quot;全部&quot;</span>, order=<span class="string">&quot;hot&quot;</span>, offset=<span class="number">0</span>, limit=<span class="number">50</span></span>):</span><br><span class="line">        path = <span class="string">&quot;/weapi/playlist/list&quot;</span></span><br><span class="line">        params = <span class="built_in">dict</span>(</span><br><span class="line">            cat=category, order=order, offset=offset, total=<span class="string">&quot;true&quot;</span>, limit=limit</span><br><span class="line">        )</span><br><span class="line">        <span class="keyword">return</span> self.request(<span class="string">&quot;POST&quot;</span>, path, params).get(<span class="string">&quot;playlists&quot;</span>, [])</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">playlist_catelogs</span>(<span class="params">self</span>):</span><br><span class="line">        path = <span class="string">&quot;/weapi/playlist/catalogue&quot;</span></span><br><span class="line">        <span class="keyword">return</span> self.request(<span class="string">&quot;POST&quot;</span>, path)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 歌单详情</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">playlist_detail</span>(<span class="params">self, playlist_id</span>):</span><br><span class="line">        path = <span class="string">&quot;/weapi/v3/playlist/detail&quot;</span></span><br><span class="line">        params = <span class="built_in">dict</span>(<span class="built_in">id</span>=playlist_id, total=<span class="string">&quot;true&quot;</span>, limit=<span class="number">1000</span>, n=<span class="number">1000</span>, offest=<span class="number">0</span>)</span><br><span class="line">        <span class="comment"># cookie添加os字段</span></span><br><span class="line">        custom_cookies = <span class="built_in">dict</span>(os=platform.system())</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            self.request(<span class="string">&quot;POST&quot;</span>, path, params, &#123;<span class="string">&quot;code&quot;</span>: -<span class="number">1</span>&#125;, custom_cookies)</span><br><span class="line">            <span class="comment">#.get(&quot;playlist&quot;, &#123;&#125;)</span></span><br><span class="line">            <span class="comment">#.get(&quot;tracks&quot;, [])</span></span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 热门歌手 http://music.163.com/#/discover/artist/</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">top_artists</span>(<span class="params">self, offset=<span class="number">0</span>, limit=<span class="number">100</span></span>):</span><br><span class="line">        path = <span class="string">&quot;/weapi/artist/top&quot;</span></span><br><span class="line">        params = <span class="built_in">dict</span>(offset=offset, total=<span class="literal">True</span>, limit=limit)</span><br><span class="line">        <span class="keyword">return</span> self.request(<span class="string">&quot;POST&quot;</span>, path, params).get(<span class="string">&quot;artists&quot;</span>, [])</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 热门单曲 http://music.163.com/discover/toplist?id=</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">top_songlist</span>(<span class="params">self, idx=<span class="number">0</span>, offset=<span class="number">0</span>, limit=<span class="number">100</span></span>):</span><br><span class="line">        playlist_id = TOP_LIST_ALL[idx][<span class="number">1</span>]</span><br><span class="line">        <span class="keyword">return</span> self.playlist_detail(playlist_id)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 歌手热门歌曲</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">artists</span>(<span class="params">self, artist_id</span>):</span><br><span class="line">        path = <span class="string">&quot;/weapi/v1/artist/&#123;&#125;&quot;</span>.<span class="built_in">format</span>(artist_id)</span><br><span class="line">        <span class="keyword">return</span> self.request(<span class="string">&quot;POST&quot;</span>, path).get(<span class="string">&quot;hotSongs&quot;</span>, [])</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_artist_album</span>(<span class="params">self, artist_id, offset=<span class="number">0</span>, limit=<span class="number">50</span></span>):</span><br><span class="line">        path = <span class="string">&quot;/weapi/artist/albums/&#123;&#125;&quot;</span>.<span class="built_in">format</span>(artist_id)</span><br><span class="line">        params = <span class="built_in">dict</span>(offset=offset, total=<span class="literal">True</span>, limit=limit)</span><br><span class="line">        <span class="keyword">return</span> self.request(<span class="string">&quot;POST&quot;</span>, path, params).get(<span class="string">&quot;hotAlbums&quot;</span>, [])</span><br><span class="line"></span><br><span class="line">    <span class="comment"># album id --&gt; song id set</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">album</span>(<span class="params">self, album_id</span>):</span><br><span class="line">        path = <span class="string">&quot;/weapi/v1/album/&#123;&#125;&quot;</span>.<span class="built_in">format</span>(album_id)</span><br><span class="line">        <span class="keyword">return</span> self.request(<span class="string">&quot;POST&quot;</span>, path)<span class="comment">#.get(&quot;songs&quot;, [])</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">song_comments</span>(<span class="params">self, music_id, offset=<span class="number">0</span>, total=<span class="string">&quot;false&quot;</span>, limit=<span class="number">100</span></span>):</span><br><span class="line">        path = <span class="string">&quot;/weapi/v1/resource/comments/R_SO_4_&#123;&#125;/&quot;</span>.<span class="built_in">format</span>(music_id)</span><br><span class="line">        params = <span class="built_in">dict</span>(rid=music_id, offset=offset, total=total, limit=limit)</span><br><span class="line">        <span class="keyword">return</span> self.request(<span class="string">&quot;POST&quot;</span>, path, params)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># song ids --&gt; song urls ( details )</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">songs_detail</span>(<span class="params">self, ids</span>):</span><br><span class="line">        path = <span class="string">&quot;/weapi/v3/song/detail&quot;</span></span><br><span class="line">        params = <span class="built_in">dict</span>(c=json.dumps([&#123;<span class="string">&quot;id&quot;</span>: _<span class="built_in">id</span>&#125; <span class="keyword">for</span> _<span class="built_in">id</span> <span class="keyword">in</span> ids]), ids=json.dumps(ids))</span><br><span class="line">        <span class="keyword">return</span> self.request(<span class="string">&quot;POST&quot;</span>, path, params).get(<span class="string">&quot;songs&quot;</span>, [])</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">songs_url</span>(<span class="params">self, ids</span>):</span><br><span class="line">        quality = Config().get(<span class="string">&quot;music_quality&quot;</span>)</span><br><span class="line">        rate_map = &#123;<span class="number">0</span>: <span class="number">320000</span>, <span class="number">1</span>: <span class="number">192000</span>, <span class="number">2</span>: <span class="number">128000</span>&#125;</span><br><span class="line"></span><br><span class="line">        path = <span class="string">&quot;/weapi/song/enhance/player/url&quot;</span></span><br><span class="line">        params = <span class="built_in">dict</span>(ids=ids, br=rate_map[quality])</span><br><span class="line">        <span class="keyword">return</span> self.request(<span class="string">&quot;POST&quot;</span>, path, params).get(<span class="string">&quot;data&quot;</span>, [])</span><br><span class="line"></span><br><span class="line">    <span class="comment"># lyric http://music.163.com/api/song/lyric?os=osx&amp;id= &amp;lv=-1&amp;kv=-1&amp;tv=-1</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">song_lyric</span>(<span class="params">self, music_id</span>):</span><br><span class="line">        path = <span class="string">&quot;/weapi/song/lyric&quot;</span></span><br><span class="line">        params = <span class="built_in">dict</span>(os=<span class="string">&quot;osx&quot;</span>, <span class="built_in">id</span>=music_id, lv=-<span class="number">1</span>, kv=-<span class="number">1</span>, tv=-<span class="number">1</span>)</span><br><span class="line">        lyric = self.request(<span class="string">&quot;POST&quot;</span>, path, params).get(<span class="string">&quot;lrc&quot;</span>, &#123;&#125;).get(<span class="string">&quot;lyric&quot;</span>, [])</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> lyric:</span><br><span class="line">            <span class="keyword">return</span> []</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> lyric.split(<span class="string">&quot;\n&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">song_tlyric</span>(<span class="params">self, music_id</span>):</span><br><span class="line">        path = <span class="string">&quot;/weapi/song/lyric&quot;</span></span><br><span class="line">        params = <span class="built_in">dict</span>(os=<span class="string">&quot;osx&quot;</span>, <span class="built_in">id</span>=music_id, lv=-<span class="number">1</span>, kv=-<span class="number">1</span>, tv=-<span class="number">1</span>)</span><br><span class="line">        lyric = self.request(<span class="string">&quot;POST&quot;</span>, path, params).get(<span class="string">&quot;tlyric&quot;</span>, &#123;&#125;).get(<span class="string">&quot;lyric&quot;</span>, [])</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> lyric:</span><br><span class="line">            <span class="keyword">return</span> []</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> lyric.split(<span class="string">&quot;\n&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 今日最热（0）, 本周最热（10），历史最热（20），最新节目（30）</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">djchannels</span>(<span class="params">self, offset=<span class="number">0</span>, limit=<span class="number">50</span></span>):</span><br><span class="line">        path = <span class="string">&quot;/weapi/djradio/hot/v1&quot;</span></span><br><span class="line">        params = <span class="built_in">dict</span>(limit=limit, offset=offset)</span><br><span class="line">        channels = self.request(<span class="string">&quot;POST&quot;</span>, path, params).get(<span class="string">&quot;djRadios&quot;</span>, [])</span><br><span class="line">        <span class="keyword">return</span> channels</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">djprograms</span>(<span class="params">self, radio_id, asc=<span class="literal">False</span>, offset=<span class="number">0</span>, limit=<span class="number">50</span></span>):</span><br><span class="line">        path = <span class="string">&quot;/weapi/dj/program/byradio&quot;</span></span><br><span class="line">        params = <span class="built_in">dict</span>(asc=asc, radioId=radio_id, offset=offset, limit=limit)</span><br><span class="line">        programs = self.request(<span class="string">&quot;POST&quot;</span>, path, params).get(<span class="string">&quot;programs&quot;</span>, [])</span><br><span class="line">        <span class="keyword">return</span> [p[<span class="string">&quot;mainSong&quot;</span>] <span class="keyword">for</span> p <span class="keyword">in</span> programs]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">yunpan_songlist</span>(<span class="params">self, offset=<span class="number">0</span>, limit=<span class="number">50</span></span>):</span><br><span class="line">        path = <span class="string">&quot;/weapi/v1/cloud/get&quot;</span>  <span class="comment"># NOQA</span></span><br><span class="line">        params = <span class="built_in">dict</span>(offset=offset, limit=limit, csrf_token=<span class="string">&quot;&quot;</span>)       </span><br><span class="line">        <span class="keyword">return</span> self.request(<span class="string">&quot;POST&quot;</span>, path, params)<span class="comment">#.get(&quot;data&quot;, [])</span></span><br><span class="line">    <span class="comment"># 歌手信息</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">artist_info</span>(<span class="params">self, artist_id</span>):</span><br><span class="line">        path = <span class="string">&quot;/weapi/v1/artist/&#123;&#125;&quot;</span>.<span class="built_in">format</span>(artist_id)</span><br><span class="line">        <span class="keyword">return</span> self.request(<span class="string">&quot;POST&quot;</span>, path).get(<span class="string">&quot;artist&quot;</span>, &#123;&#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">mv_url</span>(<span class="params">self, <span class="built_in">id</span></span>):</span><br><span class="line">        path = <span class="string">&quot;/weapi/song/enhance/play/mv/url&quot;</span></span><br><span class="line">        params = <span class="built_in">dict</span>(<span class="built_in">id</span>=<span class="built_in">id</span>, r=<span class="number">1080</span>)</span><br><span class="line">        <span class="keyword">return</span> self.request(<span class="string">&quot;POST&quot;</span>, path, params).get(<span class="string">&quot;data&quot;</span>, []) </span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">artist_sublist</span>(<span class="params">self, offset=<span class="number">0</span>,limit=<span class="number">50</span>,total=<span class="literal">True</span></span>):</span><br><span class="line">        path = <span class="string">&quot;/weapi/artist/sublist&quot;</span></span><br><span class="line">        params = <span class="built_in">dict</span>(offset=offset,limit=limit,total=total)</span><br><span class="line">        <span class="keyword">return</span> self.request(<span class="string">&quot;POST&quot;</span>, path, params).get(<span class="string">&quot;data&quot;</span>, [])       </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">album_sublist</span>(<span class="params">self, offset=<span class="number">0</span>,limit=<span class="number">50</span>,total=<span class="literal">True</span></span>):</span><br><span class="line">        path = <span class="string">&quot;/weapi/album/sublist&quot;</span></span><br><span class="line">        params = <span class="built_in">dict</span>(offset=offset,limit=limit,total=total)</span><br><span class="line">        <span class="keyword">return</span> self.request(<span class="string">&quot;POST&quot;</span>, path, params).get(<span class="string">&quot;data&quot;</span>, [])        </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">video_sublist</span>(<span class="params">self, offset=<span class="number">0</span>,limit=<span class="number">50</span>,total=<span class="literal">True</span></span>):</span><br><span class="line">        path = <span class="string">&quot;/weapi/cloudvideo/allvideo/sublist&quot;</span></span><br><span class="line">        params = <span class="built_in">dict</span>(offset=offset,limit=limit,total=total)</span><br><span class="line">        <span class="keyword">return</span> self.request(<span class="string">&quot;POST&quot;</span>, path, params).get(<span class="string">&quot;data&quot;</span>, [])     </span><br><span class="line"></span><br><span class="line">    <span class="comment"># 获取视频url</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">video_url</span>(<span class="params">self, <span class="built_in">id</span>, resolution=<span class="number">1080</span></span>):</span><br><span class="line">        path = <span class="string">&quot;/weapi/cloudvideo/playurl&quot;</span></span><br><span class="line">        params = <span class="built_in">dict</span>(ids=<span class="string">&#x27;[&quot;&#x27;</span> + <span class="built_in">id</span> + <span class="string">&#x27;&quot;]&#x27;</span>,resolution = resolution)</span><br><span class="line">        <span class="keyword">return</span> self.request(<span class="string">&quot;POST&quot;</span>, path, params)<span class="comment">#.get(&quot;urls&quot;, [])    </span></span><br><span class="line">    <span class="comment"># 我的数字专辑</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">digitalAlbum_purchased</span>(<span class="params">self, offset=<span class="number">0</span>,limit=<span class="number">50</span>,total=<span class="literal">True</span></span>):</span><br><span class="line">        path = <span class="string">&quot;/api/digitalAlbum/purchased&quot;</span></span><br><span class="line">        params = <span class="built_in">dict</span>(offset=offset,limit=limit,total=total)</span><br><span class="line">        <span class="keyword">return</span> self.request(<span class="string">&quot;POST&quot;</span>, path, params).get(<span class="string">&quot;paidAlbums&quot;</span>, []) </span><br><span class="line"></span><br><span class="line">   <span class="comment"># 热门歌手</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">artist_top</span>(<span class="params">self, offset=<span class="number">0</span>,limit=<span class="number">50</span>,total=<span class="literal">True</span></span>):</span><br><span class="line">        path = <span class="string">&quot;/weapi/artist/top&quot;</span></span><br><span class="line">        params = <span class="built_in">dict</span>(offset=offset,limit=limit,total=total)</span><br><span class="line">        <span class="keyword">return</span> self.request(<span class="string">&quot;POST&quot;</span>, path, params).get(<span class="string">&quot;artists&quot;</span>, [])     </span><br><span class="line">    <span class="comment"># 歌手MV</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">artist_mvs</span>(<span class="params">self, <span class="built_in">id</span>, offset=<span class="number">0</span>,limit=<span class="number">50</span>,total=<span class="literal">True</span></span>):</span><br><span class="line">        path = <span class="string">&quot;/weapi/artist/mvs&quot;</span></span><br><span class="line">        params = <span class="built_in">dict</span>(artistId=<span class="built_in">id</span>,offset=offset,limit=limit,total=total)</span><br><span class="line">        <span class="keyword">return</span> self.request(<span class="string">&quot;POST&quot;</span>, path, params).get(<span class="string">&quot;mvs&quot;</span>, [])         </span><br><span class="line">    <span class="comment"># 新歌速递 全部:0 华语:7 欧美:96 日本:8 韩国:16</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">new_songs</span>(<span class="params">self, areaId=<span class="number">0</span>, total=<span class="literal">True</span></span>):</span><br><span class="line">        path = <span class="string">&quot;/weapi/v1/discovery/new/songs&quot;</span></span><br><span class="line">        params = <span class="built_in">dict</span>(areaId=areaId, total=total)</span><br><span class="line">        <span class="keyword">return</span> self.request(<span class="string">&quot;POST&quot;</span>, path, params).get(<span class="string">&quot;data&quot;</span>, [])  </span><br><span class="line">    <span class="comment"># 相似歌手</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">similar_artist</span>(<span class="params">self, artistid</span>):</span><br><span class="line">        path = <span class="string">&quot;/weapi/discovery/simiArtist&quot;</span></span><br><span class="line">        params = <span class="built_in">dict</span>(artistid=artistid)</span><br><span class="line">        <span class="keyword">return</span> self.request(<span class="string">&quot;POST&quot;</span>, path, params).get(<span class="string">&quot;artists&quot;</span>, [])    </span><br><span class="line">    <span class="comment">#关注用户</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">user_follow</span>(<span class="params">self, <span class="built_in">id</span></span>):</span><br><span class="line">        path = <span class="string">&quot;/weapi/user/follow/&#123;&#125;&quot;</span>.<span class="built_in">format</span>(<span class="built_in">id</span>)</span><br><span class="line">        <span class="keyword">return</span> self.request(<span class="string">&quot;POST&quot;</span>, path)      </span><br><span class="line">    <span class="comment"># 用户关注列表</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">user_getfollows</span>(<span class="params">self, <span class="built_in">id</span>, offset=<span class="number">0</span>,limit=<span class="number">50</span>,order=<span class="literal">True</span></span>):</span><br><span class="line">        path = <span class="string">&quot;/weapi/user/getfollows/&#123;&#125;&quot;</span>.<span class="built_in">format</span>(<span class="built_in">id</span>)</span><br><span class="line">        params = <span class="built_in">dict</span>(offset=offset,limit=limit,order=order)</span><br><span class="line">        <span class="keyword">return</span> self.request(<span class="string">&quot;POST&quot;</span>, path, params).get(<span class="string">&quot;follow&quot;</span>, [])       </span><br><span class="line">    <span class="comment"># 用户粉丝列表</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">user_getfolloweds</span>(<span class="params">self, <span class="built_in">id</span>, time=-<span class="number">1</span>,limit=<span class="number">50</span></span>):</span><br><span class="line">        path = <span class="string">&quot;/weapi/user/getfolloweds/&#123;&#125;&quot;</span>.<span class="built_in">format</span>(<span class="built_in">id</span>)</span><br><span class="line">        params = <span class="built_in">dict</span>(time=time,limit=limit)</span><br><span class="line">        <span class="keyword">return</span> self.request(<span class="string">&quot;POST&quot;</span>, path, params)<span class="comment">#.get(&quot;followeds&quot;, [])         </span></span><br><span class="line">    <span class="comment"># 听歌排行 type: 0 全部时间 1最近一周</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">play_record</span>(<span class="params">self, uid, time_type=<span class="number">0</span>,limit=<span class="number">1000</span>,offset=<span class="number">0</span>,total=<span class="literal">True</span></span>):</span><br><span class="line">        path = <span class="string">&quot;/weapi/v1/play/record&quot;</span></span><br><span class="line">        params = <span class="built_in">dict</span>(uid=uid,<span class="built_in">type</span>=time_type,limit=limit,offset=offset,total=total)</span><br><span class="line">        <span class="keyword">return</span> self.request(<span class="string">&quot;POST&quot;</span>, path, params)<span class="comment">#.get(&quot;allData&quot;, [])   #weekData      </span></span><br><span class="line">    <span class="comment"># 推荐mv </span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">recommend_mv</span>(<span class="params">self</span>):</span><br><span class="line">        path = <span class="string">&quot;/weapi/personalized/mv&quot;</span></span><br><span class="line">        <span class="keyword">return</span> self.request(<span class="string">&quot;POST&quot;</span>, path).get(<span class="string">&quot;result&quot;</span>, [])     </span><br><span class="line"></span><br><span class="line">    <span class="comment"># MV排行榜 area: 地区,可选值为内地,港台,欧美,日本,韩国,不填则为全部</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">top_mv</span>(<span class="params">self, area=<span class="string">&#x27;&#x27;</span>, limit=<span class="number">50</span>, offset=<span class="number">0</span>, total=<span class="literal">True</span></span>):</span><br><span class="line">        path = <span class="string">&quot;/weapi/mv/toplist&quot;</span></span><br><span class="line">        params = <span class="built_in">dict</span>(area=area,limit=limit,offset=offset,total=total)</span><br><span class="line">        <span class="keyword">return</span> self.request(<span class="string">&quot;POST&quot;</span>, path, params).get(<span class="string">&quot;data&quot;</span>, [])   <span class="comment">#weekData                                         </span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 创建歌单 privacy:0 为普通歌单，10 为隐私歌单；type:NORMAL|VIDEO</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">playlist_creat</span>(<span class="params">self, name, privacy=<span class="number">0</span>, ptype=<span class="string">&#x27;NORMAL&#x27;</span></span>):</span><br><span class="line">        path = <span class="string">&quot;/weapi/playlist/create&quot;</span></span><br><span class="line">        params = <span class="built_in">dict</span>(name=name,privacy=privacy,<span class="built_in">type</span>=ptype)</span><br><span class="line">        <span class="keyword">return</span> self.request(<span class="string">&quot;POST&quot;</span>, path, params)        </span><br><span class="line"></span><br><span class="line">    <span class="comment"># 添加MV到视频歌单中</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">playlist_add</span>(<span class="params">self, pid, ids</span>):</span><br><span class="line">        path = <span class="string">&quot;/weapi/playlist/track/add&quot;</span></span><br><span class="line">        ids = [&#123;<span class="string">&#x27;type&#x27;</span>:<span class="number">3</span>,<span class="string">&#x27;id&#x27;</span>:song_id&#125; <span class="keyword">for</span> song_id <span class="keyword">in</span> ids]</span><br><span class="line">        params = &#123;<span class="string">&#x27;id&#x27;</span>:pid,<span class="string">&#x27;tracks&#x27;</span>: json.dumps(ids)&#125;</span><br><span class="line">        <span class="keyword">return</span> self.request(<span class="string">&quot;POST&quot;</span>, path, params)    </span><br><span class="line"></span><br><span class="line">    <span class="comment"># 添加/删除单曲到歌单</span></span><br><span class="line">    <span class="comment"># op:&#x27;add&#x27;|&#x27;del&#x27;</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">playlist_tracks</span>(<span class="params">self, pid, ids,op=<span class="string">&#x27;add&#x27;</span></span>):</span><br><span class="line">        path = <span class="string">&quot;/weapi/playlist/manipulate/tracks&quot;</span>        </span><br><span class="line">        params = &#123;<span class="string">&#x27;op&#x27;</span>:op,<span class="string">&#x27;pid&#x27;</span>:pid,<span class="string">&#x27;trackIds&#x27;</span>: json.dumps(ids),<span class="string">&#x27;imme&#x27;</span>:<span class="string">&#x27;true&#x27;</span>&#125;</span><br><span class="line">        <span class="keyword">return</span> self.request(<span class="string">&quot;POST&quot;</span>, path, params) </span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">artist_songs</span>(<span class="params">self, <span class="built_in">id</span>, limit=<span class="number">50</span>, offset=<span class="number">0</span></span>):</span><br><span class="line">        path = <span class="string">&quot;/weapi/v1/artist/songs&quot;</span></span><br><span class="line">        params = <span class="built_in">dict</span>(<span class="built_in">id</span>=<span class="built_in">id</span>,limit=limit,offset=offset,private_cloud=<span class="literal">True</span>,work_type=<span class="number">1</span>,order=<span class="string">&#x27;hot&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span> self.request(<span class="string">&quot;POST&quot;</span>, path, params)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 打卡</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">daka</span>(<span class="params">self, song_datas</span>):</span><br><span class="line">        path = <span class="string">&quot;/weapi/feedback/weblog&quot;</span></span><br><span class="line">        songs = []</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(song_datas)):</span><br><span class="line">            song = &#123;</span><br><span class="line">                <span class="string">&#x27;action&#x27;</span>: <span class="string">&#x27;play&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;json&#x27;</span>: song_datas[i]</span><br><span class="line">            &#125;</span><br><span class="line">            songs.append(song)</span><br><span class="line">        params = &#123;<span class="string">&#x27;logs&#x27;</span>: json.dumps(songs)&#125;</span><br><span class="line">        <span class="keyword">return</span> self.request(<span class="string">&quot;POST&quot;</span>, path, params)</span><br><span class="line">    <span class="comment"># 用户信息</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">user_detail</span>(<span class="params">self, uid</span>):  </span><br><span class="line">        path = <span class="string">&quot;/weapi/v1/user/detail/&#123;&#125;&quot;</span>.<span class="built_in">format</span>(uid)</span><br><span class="line">        <span class="keyword">return</span> self.request(<span class="string">&quot;POST&quot;</span>, path)         </span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">user_level</span>(<span class="params">self</span>):</span><br><span class="line">        path = <span class="string">&quot;/weapi/user/level&quot;</span></span><br><span class="line">        <span class="keyword">return</span> self.request(<span class="string">&quot;POST&quot;</span>, path)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 连续签到天数、第二天可获得的云贝数</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">yunbei</span>(<span class="params">self</span>):</span><br><span class="line">        path = <span class="string">&quot;/weapi/point/today/get&quot;</span></span><br><span class="line">        <span class="keyword">return</span> self.request(<span class="string">&quot;POST&quot;</span>, path).get(<span class="string">&quot;data&quot;</span>, []) </span><br><span class="line">        <span class="comment">#signed_days=resp[&#x27;data&#x27;][&#x27;days&#x27;]</span></span><br><span class="line">        <span class="comment">#yunbei=resp[&#x27;data&#x27;][&#x27;shells&#x27;]</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 今日签到可获得的云贝数</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">yunbei_today</span>(<span class="params">self</span>):</span><br><span class="line">        path = <span class="string">&quot;/weapi/point/today/get&quot;</span></span><br><span class="line">        <span class="keyword">return</span> self.request(<span class="string">&quot;POST&quot;</span>, path).get(<span class="string">&quot;data&quot;</span>, []) </span><br><span class="line">        <span class="comment">#yunbei=resp[&#x27;data&#x27;][&#x27;shells&#x27;]</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 账号云贝数</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">yunbei_info</span>(<span class="params">self</span>):</span><br><span class="line">        path = <span class="string">&quot;/weapi/v1/user/info&quot;</span></span><br><span class="line">        <span class="keyword">return</span> self.request(<span class="string">&quot;POST&quot;</span>, path).get(<span class="string">&quot;userPoint&quot;</span>, [])</span><br><span class="line">        <span class="comment">#yunbei=resp[&#x27;userPoint&#x27;][&#x27;balance&#x27;]   </span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 云贝所有任务</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">yunbei_task</span>(<span class="params">self</span>):</span><br><span class="line">        path = <span class="string">&quot;/weapi/usertool/task/list/all&quot;</span></span><br><span class="line">        <span class="keyword">return</span> self.request(<span class="string">&quot;POST&quot;</span>, path)<span class="comment">#.get(&quot;data&quot;, [])</span></span><br><span class="line">        <span class="comment">#tasks=[&#123;&#x27;userTaskId&#x27;:task[&#x27;userTaskId&#x27;],&#x27;taskName&#x27;:task[&#x27;taskName&#x27;],&#x27;taskPoint&#x27;:task[&#x27;taskPoint&#x27;],&#x27;completed&#x27;:task[&#x27;completed&#x27;],&#x27;taskDescription&#x27;:task[&#x27;taskDescription&#x27;]&#125; for task in resp[&#x27;data&#x27;]]</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 云贝todo任务</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">yunbei_task_todo</span>(<span class="params">self</span>):</span><br><span class="line">        path = <span class="string">&quot;/weapi/usertool/task/todo/query&quot;</span></span><br><span class="line">        <span class="keyword">return</span> self.request(<span class="string">&quot;POST&quot;</span>, path)<span class="comment">#.get(&quot;data&quot;, [])</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 完成云贝任务</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">yunbei_task_finish</span>(<span class="params">self, userTaskId, depositCode</span>):</span><br><span class="line">        path = <span class="string">&quot;/weapi/usertool/task/point/receive&quot;</span>        </span><br><span class="line">        params = <span class="built_in">dict</span>(userTaskId=userTaskId,depositCode=depositCode)</span><br><span class="line">        <span class="keyword">return</span> self.request(<span class="string">&quot;POST&quot;</span>, path, params) </span><br><span class="line">        <span class="comment"># &#123;&#x27;code&#x27;: 200, &#x27;message&#x27;: &#x27;SUCCESS&#x27;, &#x27;data&#x27;: True&#125;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 云贝收入</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">yunbei_receipt</span>(<span class="params">self, limit=<span class="number">10</span>,offset=<span class="number">0</span></span>):</span><br><span class="line">        path = <span class="string">&quot;/store/api/point/receipt&quot;</span>        </span><br><span class="line">        params = <span class="built_in">dict</span>(limit=limit,offset=offset)</span><br><span class="line">        <span class="keyword">return</span> self.request(<span class="string">&quot;POST&quot;</span>, path, params)    </span><br><span class="line"></span><br><span class="line">    <span class="comment"># 云贝支出</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">yunbei_expense</span>(<span class="params">self, limit=<span class="number">10</span>,offset=<span class="number">0</span></span>):</span><br><span class="line">        path = <span class="string">&quot;/store/api/point/expense&quot;</span>        </span><br><span class="line">        params = <span class="built_in">dict</span>(limit=limit,offset=offset)</span><br><span class="line">        <span class="keyword">return</span> self.request(<span class="string">&quot;POST&quot;</span>, path, params)     </span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">share_resource</span>(<span class="params">self, <span class="built_in">type</span>=<span class="string">&#x27;playlist&#x27;</span>,msg=<span class="string">&#x27;&#x27;</span>,<span class="built_in">id</span>=<span class="string">&#x27;&#x27;</span></span>):</span><br><span class="line">        path = <span class="string">&quot;/weapi/share/friends/resource&quot;</span>        </span><br><span class="line">        params = <span class="built_in">dict</span>(<span class="built_in">type</span>=<span class="built_in">type</span>,msg=msg,<span class="built_in">id</span>=<span class="built_in">id</span>)</span><br><span class="line">        <span class="keyword">return</span> self.request(<span class="string">&quot;POST&quot;</span>, path, params)     </span><br><span class="line">        <span class="comment"># if resp[&#x27;code&#x27;] == 200:</span></span><br><span class="line">        <span class="comment">#     event_id = resp[&#x27;id&#x27;]</span></span><br><span class="line">        </span><br><span class="line">    <span class="comment"># 获取用户动态</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">user_event</span>(<span class="params">self, uid,limit=<span class="number">30</span>,time=-<span class="number">1</span></span>):</span><br><span class="line">        path = <span class="string">&quot;/weapi/event/get/&#123;&#125;&quot;</span>.<span class="built_in">format</span>(uid)        </span><br><span class="line">        params = <span class="built_in">dict</span>(getcounts=<span class="literal">True</span>,time=time,limit=limit,total=<span class="literal">False</span>)</span><br><span class="line">        <span class="keyword">return</span> self.request(<span class="string">&quot;POST&quot;</span>, path, params)  </span><br><span class="line">        <span class="comment"># event_ids = [event[&#x27;id&#x27;] for event in resp[&#x27;events&#x27;]]</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 删除动态</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">event_delete</span>(<span class="params">self, <span class="built_in">id</span></span>):</span><br><span class="line">        path = <span class="string">&quot;/weapi/event/delete&quot;</span>        </span><br><span class="line">        params = <span class="built_in">dict</span>(<span class="built_in">id</span>=<span class="built_in">id</span>)</span><br><span class="line">        <span class="keyword">return</span> self.request(<span class="string">&quot;POST&quot;</span>, path, params)</span><br><span class="line">        <span class="comment"># &#123;&#x27;code&#x27;: 200&#125;          </span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 删除歌单</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">playlist_delete</span>(<span class="params">self, ids</span>):</span><br><span class="line">        path = <span class="string">&quot;/weapi/playlist/remove&quot;</span>        </span><br><span class="line">        params = <span class="built_in">dict</span>(ids=ids)</span><br><span class="line">        <span class="keyword">return</span> self.request(<span class="string">&quot;POST&quot;</span>, path, params)</span><br><span class="line">        <span class="comment"># &#123;&#x27;code&#x27;: 200&#125;  </span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">user_homepage</span>(<span class="params">self,userId</span>):</span><br><span class="line">        path=<span class="string">&quot;/weapi/personal/home/page/user&quot;</span></span><br><span class="line">        params=<span class="built_in">dict</span>(userId=userId)</span><br><span class="line">        <span class="keyword">return</span> self.request(<span class="string">&quot;POST&quot;</span>, path,params)    </span><br><span class="line"></span><br><span class="line">    <span class="comment">###########################</span></span><br><span class="line">    <span class="comment"># 音乐人</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 概况</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">musician_data</span>(<span class="params">self</span>):        </span><br><span class="line">        path=<span class="string">&#x27;/weapi/creator/musician/statistic/data/overview/get&#x27;</span></span><br><span class="line">        <span class="keyword">return</span> self.request(<span class="string">&quot;POST&quot;</span>, path)     </span><br><span class="line"></span><br><span class="line">    <span class="comment"># 获取任务</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">mission_cycle_get</span>(<span class="params">self,actionType=<span class="string">&#x27;&#x27;</span>,platform=<span class="string">&#x27;&#x27;</span></span>):        </span><br><span class="line">        path=<span class="string">&#x27;/weapi/nmusician/workbench/mission/cycle/list&#x27;</span></span><br><span class="line">        <span class="keyword">if</span> actionType==<span class="string">&#x27;&#x27;</span> <span class="keyword">and</span> platform == <span class="string">&#x27;&#x27;</span>:</span><br><span class="line">            <span class="keyword">return</span> self.request(<span class="string">&quot;POST&quot;</span>, path)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            params=<span class="built_in">dict</span>(actionType=actionType,platform=platform)</span><br><span class="line">            <span class="keyword">return</span> self.request(<span class="string">&quot;POST&quot;</span>, path,params)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 领取云豆</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">reward_obtain</span>(<span class="params">self,userMissionId,period</span>):        </span><br><span class="line">        path=<span class="string">&#x27;/weapi/nmusician/workbench/mission/reward/obtain/new&#x27;</span></span><br><span class="line">        params=<span class="built_in">dict</span>(userMissionId=userMissionId,period=period)</span><br><span class="line">        <span class="keyword">return</span> self.request(<span class="string">&quot;POST&quot;</span>, path,params)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 账号云豆数</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">cloudbean</span>(<span class="params">self</span>):</span><br><span class="line">        path = <span class="string">&quot;/weapi/cloudbean/get&quot;</span></span><br><span class="line">        <span class="keyword">return</span> self.request(<span class="string">&quot;POST&quot;</span>, path)      </span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">user_access</span>(<span class="params">self</span>):        </span><br><span class="line">        path=<span class="string">&#x27;/weapi/creator/user/access&#x27;</span></span><br><span class="line">        <span class="keyword">return</span> self.request(<span class="string">&quot;POST&quot;</span>, path)         </span><br><span class="line"><span class="comment"># API end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># jiemi</span></span><br><span class="line">__all__ = [<span class="string">&quot;encrypted_id&quot;</span>, <span class="string">&quot;encrypted_request&quot;</span>]</span><br><span class="line"></span><br><span class="line">MODULUS = (</span><br><span class="line">    <span class="string">&quot;00e0b509f6259df8642dbc35662901477df22677ec152b5ff68ace615bb7&quot;</span></span><br><span class="line">    <span class="string">&quot;b725152b3ab17a876aea8a5aa76d2e417629ec4ee341f56135fccf695280&quot;</span></span><br><span class="line">    <span class="string">&quot;104e0312ecbda92557c93870114af6c9d05c4f7f0c3685b7a46bee255932&quot;</span></span><br><span class="line">    <span class="string">&quot;575cce10b424d813cfe4875d3e82047b97ddef52741d546b8e289dc6935b&quot;</span></span><br><span class="line">    <span class="string">&quot;3ece0462db0a22b8e7&quot;</span></span><br><span class="line">)</span><br><span class="line">PUBKEY = <span class="string">&quot;010001&quot;</span></span><br><span class="line">NONCE = <span class="string">b&quot;0CoJUm6Qyw8W8jud&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 歌曲加密算法, 基于https://github.com/yanunon/NeteaseCloudMusic</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">encrypted_id</span>(<span class="params"><span class="built_in">id</span></span>):</span><br><span class="line">    magic = <span class="built_in">bytearray</span>(<span class="string">&quot;3go8&amp;$8*3*3h0k(2)2&quot;</span>, <span class="string">&quot;u8&quot;</span>)</span><br><span class="line">    song_id = <span class="built_in">bytearray</span>(<span class="built_in">id</span>, <span class="string">&quot;u8&quot;</span>)</span><br><span class="line">    magic_len = <span class="built_in">len</span>(magic)</span><br><span class="line">    <span class="keyword">for</span> i, sid <span class="keyword">in</span> <span class="built_in">enumerate</span>(song_id):</span><br><span class="line">        song_id[i] = sid ^ magic[i % magic_len]</span><br><span class="line">    m = hashlib.md5(song_id)</span><br><span class="line">    result = m.digest()</span><br><span class="line">    result = base64.b64encode(result).replace(<span class="string">b&quot;/&quot;</span>, <span class="string">b&quot;_&quot;</span>).replace(<span class="string">b&quot;+&quot;</span>, <span class="string">b&quot;-&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> result.decode(<span class="string">&quot;utf-8&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 登录加密算法, 基于https://github.com/stkevintan/nw_musicbox</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">encrypted_request</span>(<span class="params">text</span>):</span><br><span class="line">    <span class="comment"># type: (<span class="built_in">str</span>) -&gt; <span class="built_in">dict</span></span></span><br><span class="line">    data = json.dumps(text).encode(<span class="string">&quot;utf-8&quot;</span>)</span><br><span class="line">    secret = create_key(<span class="number">16</span>)</span><br><span class="line">    params = aes(aes(data, NONCE), secret)</span><br><span class="line">    encseckey = rsa(secret, PUBKEY, MODULUS)</span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="string">&quot;params&quot;</span>: params, <span class="string">&quot;encSecKey&quot;</span>: encseckey&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">aes</span>(<span class="params">text, key</span>):</span><br><span class="line">    pad = <span class="number">16</span> - <span class="built_in">len</span>(text) % <span class="number">16</span></span><br><span class="line">    text = text + <span class="built_in">bytearray</span>([pad] * pad)</span><br><span class="line">    encryptor = AES.new(key, <span class="number">2</span>, <span class="string">b&quot;0102030405060708&quot;</span>)</span><br><span class="line">    ciphertext = encryptor.encrypt(text)</span><br><span class="line">    <span class="keyword">return</span> base64.b64encode(ciphertext)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">rsa</span>(<span class="params">text, pubkey, modulus</span>):</span><br><span class="line">    text = text[::-<span class="number">1</span>]</span><br><span class="line">    rs = <span class="built_in">pow</span>(<span class="built_in">int</span>(binascii.hexlify(text), <span class="number">16</span>), <span class="built_in">int</span>(pubkey, <span class="number">16</span>), <span class="built_in">int</span>(modulus, <span class="number">16</span>))</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">format</span>(rs, <span class="string">&quot;x&quot;</span>).zfill(<span class="number">256</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">create_key</span>(<span class="params">size</span>):</span><br><span class="line">    <span class="keyword">return</span> binascii.hexlify(os.urandom(size))[:<span class="number">16</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># jiemi end </span></span><br><span class="line"></span><br><span class="line">msg = <span class="string">&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">title = <span class="string">&quot;网易云音乐&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 账号信息</span></span><br><span class="line">config = &#123;</span><br><span class="line">    <span class="string">&quot;users&quot;</span>:[</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">&quot;username&quot;</span>:<span class="string">&quot;17156087896&quot;</span>,            </span><br><span class="line">            <span class="string">&quot;md5&quot;</span>:<span class="literal">False</span>,</span><br><span class="line">            <span class="string">&quot;password&quot;</span>:<span class="string">&quot;abc211314&quot;</span></span><br><span class="line"></span><br><span class="line">        &#125;,&#123;</span><br><span class="line">            <span class="string">&quot;username&quot;</span>:<span class="string">&quot;17806275268&quot;</span>,</span><br><span class="line">            <span class="string">&quot;md5&quot;</span>:<span class="literal">False</span>,</span><br><span class="line">            <span class="string">&quot;password&quot;</span>:<span class="string">&quot;abc211314&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    ],</span><br><span class="line">        </span><br><span class="line">    <span class="string">&quot;setting&quot;</span>:&#123;</span><br><span class="line">        </span><br><span class="line">        <span class="string">&quot;serverChan&quot;</span>:&#123; </span><br><span class="line">            <span class="string">&quot;on&quot;</span>:<span class="literal">False</span>,   </span><br><span class="line">            <span class="string">&quot;SCKEY&quot;</span>:<span class="string">&quot;SCU155663T250c7c2cfb1ed174cfd9dfbb93f9edc4601166eb99dec&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">&quot;CoolPush&quot;</span>:&#123;</span><br><span class="line">            <span class="string">&quot;on&quot;</span>:<span class="literal">False</span>,</span><br><span class="line">            <span class="string">&quot;method&quot;</span>:[<span class="string">&quot;send&quot;</span>],</span><br><span class="line">            <span class="string">&quot;Skey&quot;</span>:<span class="string">&quot;&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">&quot;sign&quot;</span>:<span class="literal">True</span>,</span><br><span class="line">        <span class="string">&quot;musician_sign&quot;</span>:<span class="literal">True</span>,</span><br><span class="line">        <span class="string">&quot;daka&quot;</span>:&#123;</span><br><span class="line">            <span class="string">&quot;on&quot;</span>:<span class="literal">True</span>,</span><br><span class="line">            <span class="string">&quot;full_stop&quot;</span>:<span class="literal">True</span>,     </span><br><span class="line">            <span class="string">&quot;song_number&quot;</span>:<span class="number">1000</span>,</span><br><span class="line">            <span class="string">&quot;sleep_time&quot;</span>:<span class="number">15</span>,</span><br><span class="line">            <span class="string">&quot;upload_num&quot;</span>:<span class="number">300</span>    </span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">&quot;yunbei&quot;</span>:&#123;</span><br><span class="line">            <span class="string">&quot;share&quot;</span>:&#123;</span><br><span class="line">                <span class="string">&quot;on&quot;</span>:<span class="literal">False</span>,</span><br><span class="line">                <span class="string">&quot;id&quot;</span>:[],</span><br><span class="line">                <span class="string">&quot;msg&quot;</span>:[<span class="string">&quot;每日分享&quot;</span>,<span class="string">&quot;今日分享&quot;</span>,<span class="string">&quot;分享歌单&quot;</span>],</span><br><span class="line">                <span class="string">&quot;delete&quot;</span>:<span class="literal">True</span>,</span><br><span class="line">                <span class="string">&quot;taskName&quot;</span>:<span class="string">&quot;发布动态&quot;</span></span><br><span class="line">            &#125;          </span><br><span class="line">        &#125;, </span><br><span class="line">        <span class="string">&quot;other&quot;</span>:&#123;</span><br><span class="line">            <span class="string">&quot;play_playlists&quot;</span>:&#123;</span><br><span class="line">                <span class="string">&quot;on&quot;</span>:<span class="literal">False</span>,</span><br><span class="line">                <span class="string">&quot;playlist_ids&quot;</span>:[],</span><br><span class="line">                <span class="string">&quot;times&quot;</span>:<span class="number">1</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="string">&quot;play_albums&quot;</span>:&#123;</span><br><span class="line">                <span class="string">&quot;on&quot;</span>:<span class="literal">False</span>,</span><br><span class="line">                <span class="string">&quot;album_ids&quot;</span>:[],</span><br><span class="line">                <span class="string">&quot;times&quot;</span>:<span class="number">1</span>                    </span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="string">&quot;play_songs&quot;</span>:&#123;</span><br><span class="line">                <span class="string">&quot;on&quot;</span>:<span class="literal">False</span>,</span><br><span class="line">                <span class="string">&quot;song_ids&quot;</span>:[],</span><br><span class="line">                <span class="string">&quot;times&quot;</span>:<span class="number">30</span>                      </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,       </span><br><span class="line">        <span class="string">&quot;follow&quot;</span>:<span class="literal">True</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#print(config)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">weChatPush</span>(<span class="params">txt</span>):</span><br><span class="line">    Secret = <span class="string">&quot;GuabRMpWYTIeIkk_Dc-sX5LJi59M_7JfCk9KJrtn8Bs&quot;</span></span><br><span class="line">    corpid = <span class="string">&#x27;ww41560323f54f5b7b&#x27;</span></span><br><span class="line">    url = <span class="string">&#x27;https://qyapi.weixin.qq.com/cgi-bin/gettoken?corpid=&#123;&#125;&amp;corpsecret=&#123;&#125;&#x27;</span></span><br><span class="line">    getr = requests.get(url=url.<span class="built_in">format</span>(corpid, Secret))</span><br><span class="line">    access_token = getr.json().get(<span class="string">&#x27;access_token&#x27;</span>)</span><br><span class="line">    data = &#123;</span><br><span class="line">            <span class="string">&quot;touser&quot;</span>: <span class="string">&quot;@all&quot;</span>,</span><br><span class="line">            <span class="string">&quot;msgtype&quot;</span>: <span class="string">&quot;text&quot;</span>,</span><br><span class="line">            <span class="string">&quot;agentid&quot;</span>: <span class="number">1000003</span>,</span><br><span class="line">            <span class="string">&quot;text&quot;</span>: &#123;</span><br><span class="line">                <span class="string">&quot;content&quot;</span>: <span class="string">&quot;网易云音乐信息\n&quot;</span> + txt</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="string">&quot;safe&quot;</span>: <span class="number">0</span>,</span><br><span class="line">            &#125;</span><br><span class="line">    requests.post(url=<span class="string">&quot;https://qyapi.weixin.qq.com/cgi-bin/message/send?access_token=&#123;&#125;&quot;</span>.<span class="built_in">format</span>(access_token),data=json.dumps(data))</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">start</span>():</span><br><span class="line">    <span class="keyword">global</span> msg</span><br><span class="line">    <span class="keyword">global</span> title</span><br><span class="line">    title = <span class="string">&quot;网易云音乐&quot;</span></span><br><span class="line">    msg = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;开始登录：&#x27;</span>)</span><br><span class="line">    setting = config[<span class="string">&#x27;setting&#x27;</span>]</span><br><span class="line">    <span class="comment">#serverChan_url = &#x27;https://sc.ftqq.com/&#x27;+setting[&#x27;serverChan&#x27;][&#x27;SCKEY&#x27;]+&#x27;.send&#x27;</span></span><br><span class="line">    <span class="comment">#serverChan_url2 = &#x27;https://sctapi.ftqq.com/SCT10915TrbGLdfzI6Cwuy6HqOTS4JaW1.send&#x27;</span></span><br><span class="line">    </span><br><span class="line">    user_count = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> user <span class="keyword">in</span> config[<span class="string">&#x27;users&#x27;</span>]:</span><br><span class="line">        user_count += <span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> <span class="string">&quot;setting&quot;</span> <span class="keyword">in</span> user:</span><br><span class="line">            user_setting = user[<span class="string">&#x27;setting&#x27;</span>]</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            user_setting = setting</span><br><span class="line"></span><br><span class="line">        username = user[<span class="string">&#x27;username&#x27;</span>]</span><br><span class="line">        <span class="keyword">if</span> user[<span class="string">&#x27;md5&#x27;</span>]:</span><br><span class="line">            md5_pwd = user[<span class="string">&#x27;password&#x27;</span>]</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            pwd = user[<span class="string">&#x27;password&#x27;</span>]</span><br><span class="line">            md5_pwd = hashlib.md5(pwd.encode(encoding=<span class="string">&#x27;UTF-8&#x27;</span>)).hexdigest()</span><br><span class="line">    </span><br><span class="line">        <span class="comment">#登录</span></span><br><span class="line">        music = NetEase()</span><br><span class="line">        login = music.login(username,md5_pwd)        </span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> login[<span class="string">&quot;code&quot;</span>] == <span class="number">200</span>:    </span><br><span class="line">            music.user_setting = user_setting  </span><br><span class="line">            userType = login[<span class="string">&#x27;profile&#x27;</span>][<span class="string">&#x27;userType&#x27;</span>]</span><br><span class="line">            user_info(music)</span><br><span class="line">            <span class="keyword">if</span> user_setting[<span class="string">&#x27;follow&#x27;</span>]:</span><br><span class="line">                follow(music)</span><br><span class="line">            <span class="keyword">if</span> user_setting[<span class="string">&#x27;sign&#x27;</span>]:</span><br><span class="line">                sign(music)</span><br><span class="line">            <span class="keyword">if</span> user_setting[<span class="string">&#x27;musician_sign&#x27;</span>] <span class="keyword">and</span> userType == <span class="number">4</span>:</span><br><span class="line">                musician_sign(music)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> user_setting[<span class="string">&#x27;daka&#x27;</span>][<span class="string">&#x27;on&#x27;</span>]:</span><br><span class="line">                daka(music,user_setting)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> user_setting[<span class="string">&#x27;other&#x27;</span>][<span class="string">&#x27;play_playlists&#x27;</span>][<span class="string">&#x27;on&#x27;</span>]:</span><br><span class="line">                play_playlists(music,user_setting)</span><br><span class="line">            <span class="keyword">if</span> user_setting[<span class="string">&#x27;other&#x27;</span>][<span class="string">&#x27;play_albums&#x27;</span>][<span class="string">&#x27;on&#x27;</span>]:</span><br><span class="line">                play_albums(music,user_setting)</span><br><span class="line">            <span class="keyword">if</span> user_setting[<span class="string">&#x27;other&#x27;</span>][<span class="string">&#x27;play_songs&#x27;</span>][<span class="string">&#x27;on&#x27;</span>]:</span><br><span class="line">                play_songs(music,user_setting)</span><br><span class="line"></span><br><span class="line">            yunbei_task(music,user_setting) </span><br><span class="line">            get_yunbei(music)            </span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            title += <span class="string">&#x27;: 登录失败,请检查账号、密码&#x27;</span></span><br><span class="line">            msg += <span class="string">&#x27;用户信息\n- 登录失败，请检查账号、密码\n\n&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#print(msg) </span></span><br><span class="line">    weChatPush(msg)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">user_info</span>(<span class="params">music</span>):</span><br><span class="line">    <span class="keyword">global</span> msg</span><br><span class="line">    resp = music.user_detail(music.uid)</span><br><span class="line">    music.listenSongs = resp[<span class="string">&#x27;listenSongs&#x27;</span>]</span><br><span class="line">    msg += <span class="string">&#x27;用户信息\n- 用户名称:&#x27;</span>+resp[<span class="string">&#x27;profile&#x27;</span>][<span class="string">&#x27;nickname&#x27;</span>]+<span class="string">&#x27;\n- 用户ID:&#x27;</span>+<span class="built_in">str</span>(music.uid)+<span class="string">&#x27;\n- 用户等级：&#x27;</span>+<span class="built_in">str</span>(resp[<span class="string">&#x27;level&#x27;</span>])+<span class="string">&#x27;\n- 云贝数量:&#x27;</span>+<span class="built_in">str</span>(resp[<span class="string">&#x27;userPoint&#x27;</span>][<span class="string">&#x27;balance&#x27;</span>])+<span class="string">&#x27;\n- 粉丝数量:&#x27;</span>+<span class="built_in">str</span>(resp[<span class="string">&#x27;profile&#x27;</span>][<span class="string">&#x27;followeds&#x27;</span>])+<span class="string">&#x27;\n- 听歌总数:&#x27;</span>+<span class="built_in">str</span>(music.listenSongs)</span><br><span class="line">    resp = music.user_level()</span><br><span class="line">    music.full=resp[<span class="string">&#x27;full&#x27;</span>]</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> resp[<span class="string">&#x27;full&#x27;</span>]:</span><br><span class="line">        msg += <span class="string">&#x27;\n- 距离下级还需&#x27;</span>+<span class="built_in">str</span>(resp[<span class="string">&#x27;data&#x27;</span>][<span class="string">&#x27;nextPlayCount&#x27;</span>]-resp[<span class="string">&#x27;data&#x27;</span>][<span class="string">&#x27;nowPlayCount&#x27;</span>])+<span class="string">&#x27;首歌\n- 登录天数:&#x27;</span>+<span class="built_in">str</span>(resp[<span class="string">&#x27;data&#x27;</span>][<span class="string">&#x27;nowLoginCount&#x27;</span>])+<span class="string">&#x27;\n- 距离下级还需登录&#x27;</span>+<span class="built_in">str</span>(resp[<span class="string">&#x27;data&#x27;</span>][<span class="string">&#x27;nextLoginCount&#x27;</span>]-resp[<span class="string">&#x27;data&#x27;</span>][<span class="string">&#x27;nowLoginCount&#x27;</span>])+<span class="string">&#x27;天\n\n&#x27;</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        msg += <span class="string">&#x27;\n\n&#x27;</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">daka</span>(<span class="params">music,user_setting</span>):</span><br><span class="line">    <span class="keyword">global</span> msg</span><br><span class="line">    <span class="keyword">global</span> title</span><br><span class="line">    msg +=  <span class="string">&quot;打卡信息\n&quot;</span>  </span><br><span class="line">    <span class="comment"># msg +=  &#x27;- 预计打卡&#x27;+str(total)+&#x27;首\n&#x27;</span></span><br><span class="line">    resp = music.user_level()</span><br><span class="line">    <span class="keyword">if</span> user_setting[<span class="string">&#x27;daka&#x27;</span>][<span class="string">&#x27;full_stop&#x27;</span>] <span class="keyword">and</span> music.full:</span><br><span class="line">        msg +=  <span class="string">&#x27;- 您的等级已经爆表了，无需再打卡\n\n&#x27;</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="comment">#---------------开始打卡---------------</span></span><br><span class="line">        playlists = music.recommend_resource()</span><br><span class="line">        <span class="comment">#推荐歌单id列表</span></span><br><span class="line">        playlist_ids = [playlist[<span class="string">&quot;id&quot;</span>] <span class="keyword">for</span> playlist <span class="keyword">in</span>  playlists]</span><br><span class="line">                </span><br><span class="line">        total = user_setting[<span class="string">&#x27;daka&#x27;</span>][<span class="string">&#x27;song_number&#x27;</span>]</span><br><span class="line"></span><br><span class="line">        <span class="comment"># for i in range(user_setting[&#x27;daka&#x27;][&#x27;loop_count&#x27;]):</span></span><br><span class="line">        <span class="comment"># msg +=  &#x27;- 第&#x27;+str(i+1)+&#x27;次打卡\n&#x27;</span></span><br><span class="line">        song_datas = []</span><br><span class="line">        <span class="comment">#打乱歌单id</span></span><br><span class="line">        random.shuffle(playlist_ids)  </span><br><span class="line">        <span class="keyword">for</span> playlist_id <span class="keyword">in</span> playlist_ids:</span><br><span class="line">            <span class="comment">#获得歌单中歌曲的信息</span></span><br><span class="line">            songs = music.playlist_detail(playlist_id).get(<span class="string">&quot;playlist&quot;</span>, &#123;&#125;).get(<span class="string">&quot;tracks&quot;</span>, [])</span><br><span class="line">            <span class="keyword">for</span> song <span class="keyword">in</span> songs:</span><br><span class="line">                song_data=&#123;</span><br><span class="line">                            <span class="string">&quot;type&quot;</span>: <span class="string">&#x27;song&#x27;</span>,</span><br><span class="line">                            <span class="string">&quot;wifi&quot;</span>: <span class="number">0</span>,</span><br><span class="line">                            <span class="string">&quot;download&quot;</span>: <span class="number">0</span>,</span><br><span class="line">                            <span class="string">&quot;id&quot;</span>: song[<span class="string">&#x27;id&#x27;</span>],</span><br><span class="line">                            <span class="string">&quot;time&quot;</span>: math.ceil(song[<span class="string">&#x27;dt&#x27;</span>]/<span class="number">1000</span>),</span><br><span class="line">                            <span class="string">&quot;end&quot;</span>: <span class="string">&#x27;ui&#x27;</span>,<span class="comment">#playend                    </span></span><br><span class="line">                            <span class="string">&quot;source&quot;</span>:<span class="string">&#x27;list&#x27;</span>,</span><br><span class="line">                            <span class="string">&quot;sourceId&quot;</span>: playlist_id,                                                </span><br><span class="line">                        &#125;</span><br><span class="line">                song_datas.append(song_data)</span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">len</span>(song_datas)&gt;=total:</span><br><span class="line">                song_datas = song_datas[<span class="number">0</span>:total]</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">        num = music.user_setting[<span class="string">&#x27;daka&#x27;</span>][<span class="string">&#x27;upload_num&#x27;</span>]</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="built_in">len</span>(song_datas), num):</span><br><span class="line">            music.daka(song_datas[i:i+num])</span><br><span class="line">            time.sleep(user_setting[<span class="string">&#x27;daka&#x27;</span>][<span class="string">&#x27;sleep_time&#x27;</span>])</span><br><span class="line">            resp = music.user_detail(music.uid)</span><br><span class="line">            <span class="keyword">if</span> (resp[<span class="string">&#x27;listenSongs&#x27;</span>]-music.listenSongs)&gt;=<span class="number">300</span>:</span><br><span class="line">                title = title + <span class="string">&#x27;本次听歌&#x27;</span>+<span class="built_in">str</span>(resp[<span class="string">&#x27;listenSongs&#x27;</span>]-music.listenSongs)+<span class="string">&#x27;首，累计听歌&#x27;</span>+<span class="built_in">str</span>(resp[<span class="string">&#x27;listenSongs&#x27;</span>])+<span class="string">&#x27;首&#x27;</span></span><br><span class="line">                msg += <span class="string">&#x27;- 听歌总数:&#x27;</span>+<span class="built_in">str</span>(resp[<span class="string">&#x27;listenSongs&#x27;</span>])+<span class="string">&#x27;首\n- 本次打卡:&#x27;</span>+<span class="built_in">str</span>(resp[<span class="string">&#x27;listenSongs&#x27;</span>]-music.listenSongs)+<span class="string">&#x27;首\n- 打卡数据更新有延时，请到网易云音乐APP中查看准确信息\n\n&#x27;</span>  </span><br><span class="line">                <span class="keyword">return</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">#---------------结束打卡---------------</span></span><br><span class="line">        time.sleep(user_setting[<span class="string">&#x27;daka&#x27;</span>][<span class="string">&#x27;sleep_time&#x27;</span>]+<span class="number">5</span>)</span><br><span class="line">        resp = music.user_detail(music.uid)</span><br><span class="line">        title = title + <span class="string">&#x27;本次听歌&#x27;</span>+<span class="built_in">str</span>(resp[<span class="string">&#x27;listenSongs&#x27;</span>]-music.listenSongs)+<span class="string">&#x27;首，累计听歌&#x27;</span>+<span class="built_in">str</span>(resp[<span class="string">&#x27;listenSongs&#x27;</span>])+<span class="string">&#x27;首&#x27;</span></span><br><span class="line">        msg += <span class="string">&#x27;- 听歌总数:&#x27;</span>+<span class="built_in">str</span>(resp[<span class="string">&#x27;listenSongs&#x27;</span>])+<span class="string">&#x27;首\n- 本次打卡:&#x27;</span>+<span class="built_in">str</span>(resp[<span class="string">&#x27;listenSongs&#x27;</span>]-music.listenSongs)+<span class="string">&#x27;首\n- 打卡数据更新有延时，请到网易云音乐APP中查看准确信息\n\n&#x27;</span>   </span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">play_playlists</span>(<span class="params">music,user_setting</span>):</span><br><span class="line">    <span class="keyword">global</span> msg</span><br><span class="line">    msg +=  <span class="string">&quot;播放歌单\n&quot;</span></span><br><span class="line">    playlist_ids = user_setting[<span class="string">&#x27;other&#x27;</span>][<span class="string">&#x27;play_playlists&#x27;</span>][<span class="string">&#x27;playlist_ids&#x27;</span>]</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(playlist_ids) == <span class="number">0</span>:</span><br><span class="line">        msg += <span class="string">&#x27;- 无可播放歌单\n\n&#x27;</span></span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    count = user_setting[<span class="string">&#x27;other&#x27;</span>][<span class="string">&#x27;play_playlists&#x27;</span>][<span class="string">&#x27;times&#x27;</span>]</span><br><span class="line">      </span><br><span class="line">    msg +=  <span class="string">&#x27;- 正在播放以下歌单\n&#x27;</span>   </span><br><span class="line">    song_datas = [] </span><br><span class="line">    <span class="keyword">for</span> playlist_id <span class="keyword">in</span> playlist_ids:</span><br><span class="line">        <span class="comment">#获得歌单中歌曲的信息</span></span><br><span class="line">        result = music.playlist_detail(playlist_id)</span><br><span class="line">        <span class="keyword">if</span> result[<span class="string">&#x27;code&#x27;</span>] != <span class="number">200</span>:</span><br><span class="line">            msg += <span class="string">&#x27;    - 歌单id: &#123;&#125; 错误\n&#x27;</span>.<span class="built_in">format</span>(playlist_id)</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        songs = result.get(<span class="string">&quot;playlist&quot;</span>, &#123;&#125;).get(<span class="string">&quot;tracks&quot;</span>, [])</span><br><span class="line"></span><br><span class="line">        msg += <span class="string">&#x27;    - &#x27;</span>+result[<span class="string">&quot;playlist&quot;</span>][<span class="string">&#x27;name&#x27;</span>]+<span class="string">&#x27;\n&#x27;</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> song <span class="keyword">in</span> songs:</span><br><span class="line">            song_data=&#123;</span><br><span class="line">                        <span class="string">&quot;type&quot;</span>: <span class="string">&#x27;song&#x27;</span>,</span><br><span class="line">                        <span class="string">&quot;wifi&quot;</span>: <span class="number">0</span>,</span><br><span class="line">                        <span class="string">&quot;download&quot;</span>: <span class="number">0</span>,</span><br><span class="line">                        <span class="string">&quot;id&quot;</span>: song[<span class="string">&#x27;id&#x27;</span>],</span><br><span class="line">                        <span class="string">&quot;time&quot;</span>: math.ceil(song[<span class="string">&#x27;dt&#x27;</span>]/<span class="number">1000</span>),</span><br><span class="line">                        <span class="string">&quot;end&quot;</span>: <span class="string">&#x27;ui&#x27;</span>,<span class="comment">#playend                    </span></span><br><span class="line">                        <span class="string">&quot;source&quot;</span>:<span class="string">&#x27;list&#x27;</span>,</span><br><span class="line">                        <span class="string">&quot;sourceId&quot;</span>: playlist_id,                                                </span><br><span class="line">                    &#125;</span><br><span class="line">            song_datas.append(song_data)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(count): </span><br><span class="line">        play(music,song_datas)   </span><br><span class="line">        time.sleep(<span class="number">1</span>)        </span><br><span class="line">    <span class="comment">#---------------结束播放--------------- </span></span><br><span class="line">    msg += <span class="string">&#x27;- 歌单已播放&#x27;</span>+<span class="built_in">str</span>(count)+<span class="string">&#x27;次\n\n&#x27;</span>     </span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">play_albums</span>(<span class="params">music,user_setting</span>):</span><br><span class="line">    <span class="keyword">global</span> msg</span><br><span class="line">    msg +=  <span class="string">&quot;播放专辑\n&quot;</span></span><br><span class="line">    album_ids = user_setting[<span class="string">&#x27;other&#x27;</span>][<span class="string">&#x27;play_albums&#x27;</span>][<span class="string">&#x27;album_ids&#x27;</span>]</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(album_ids) == <span class="number">0</span>:</span><br><span class="line">        msg += <span class="string">&#x27;- 无可播放专辑\n\n&#x27;</span></span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    count = user_setting[<span class="string">&#x27;other&#x27;</span>][<span class="string">&#x27;play_albums&#x27;</span>][<span class="string">&#x27;times&#x27;</span>]</span><br><span class="line">      </span><br><span class="line">    msg +=  <span class="string">&#x27;- 正在播放以下专辑\n&#x27;</span>  </span><br><span class="line">    song_datas = []</span><br><span class="line">    <span class="keyword">for</span> album_id <span class="keyword">in</span> album_ids:</span><br><span class="line">        <span class="comment">#获得专辑中歌曲的信息</span></span><br><span class="line">        result = music.album(album_id)</span><br><span class="line">        <span class="keyword">if</span> result[<span class="string">&#x27;code&#x27;</span>] != <span class="number">200</span>:</span><br><span class="line">            msg += <span class="string">&#x27;    - 专辑id: &#123;&#125; 错误\n&#x27;</span>.<span class="built_in">format</span>(album_id)</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        songs = result.get(<span class="string">&quot;songs&quot;</span>, [])</span><br><span class="line"></span><br><span class="line">        msg += <span class="string">&#x27;    - &#x27;</span>+result[<span class="string">&#x27;album&#x27;</span>][<span class="string">&#x27;name&#x27;</span>]+<span class="string">&#x27;\n&#x27;</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> song <span class="keyword">in</span> songs:</span><br><span class="line">            song_data=&#123;</span><br><span class="line">                        <span class="string">&quot;type&quot;</span>: <span class="string">&#x27;song&#x27;</span>,</span><br><span class="line">                        <span class="string">&quot;wifi&quot;</span>: <span class="number">0</span>,</span><br><span class="line">                        <span class="string">&quot;download&quot;</span>: <span class="number">0</span>,</span><br><span class="line">                        <span class="string">&quot;id&quot;</span>: song[<span class="string">&#x27;id&#x27;</span>],</span><br><span class="line">                        <span class="string">&quot;time&quot;</span>: math.ceil(song[<span class="string">&#x27;dt&#x27;</span>]/<span class="number">1000</span>),</span><br><span class="line">                        <span class="string">&quot;end&quot;</span>: <span class="string">&#x27;ui&#x27;</span>,<span class="comment">#playend                    </span></span><br><span class="line">                        <span class="string">&quot;source&quot;</span>:<span class="string">&#x27;album&#x27;</span>,</span><br><span class="line">                        <span class="string">&quot;sourceId&quot;</span>: album_id,                                                </span><br><span class="line">                    &#125;</span><br><span class="line">            song_datas.append(song_data)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(count):           </span><br><span class="line">        play(music,song_datas)   </span><br><span class="line">        time.sleep(<span class="number">0.1</span>)        </span><br><span class="line">    <span class="comment">#---------------结束播放--------------- </span></span><br><span class="line">    msg += <span class="string">&#x27;- 专辑已播放&#x27;</span>+<span class="built_in">str</span>(count)+<span class="string">&#x27;次\n\n&#x27;</span>     </span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">play_songs</span>(<span class="params">music,user_setting</span>):</span><br><span class="line">    <span class="keyword">global</span> msg</span><br><span class="line">    msg +=  <span class="string">&quot;播放歌曲\n&quot;</span>  </span><br><span class="line">    song_ids = user_setting[<span class="string">&#x27;other&#x27;</span>][<span class="string">&#x27;play_songs&#x27;</span>][<span class="string">&#x27;song_ids&#x27;</span>]</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(song_ids) == <span class="number">0</span>:</span><br><span class="line">        msg += <span class="string">&#x27;- 无可播放歌曲\n\n&#x27;</span></span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    count = user_setting[<span class="string">&#x27;other&#x27;</span>][<span class="string">&#x27;play_songs&#x27;</span>][<span class="string">&#x27;times&#x27;</span>]</span><br><span class="line">    </span><br><span class="line">    msg +=  <span class="string">&#x27;- 正在播放以下歌曲\n&#x27;</span>  </span><br><span class="line">    song_datas = []</span><br><span class="line">    </span><br><span class="line">    temp_datas = []</span><br><span class="line">    <span class="comment">#获得歌曲的信息</span></span><br><span class="line">    songs = music.songs_detail(song_ids)</span><br><span class="line">    <span class="keyword">for</span> song <span class="keyword">in</span> songs:</span><br><span class="line">        msg += <span class="string">&#x27;    - &#x27;</span>+song[<span class="string">&#x27;name&#x27;</span>]+<span class="string">&#x27;\n&#x27;</span></span><br><span class="line">        song_data=&#123;</span><br><span class="line">                    <span class="string">&quot;type&quot;</span>: <span class="string">&#x27;song&#x27;</span>,</span><br><span class="line">                    <span class="string">&quot;wifi&quot;</span>: <span class="number">0</span>,</span><br><span class="line">                    <span class="string">&quot;download&quot;</span>: <span class="number">0</span>,</span><br><span class="line">                    <span class="string">&quot;id&quot;</span>: song[<span class="string">&#x27;id&#x27;</span>],</span><br><span class="line">                    <span class="string">&quot;time&quot;</span>: math.ceil(song[<span class="string">&#x27;dt&#x27;</span>]/<span class="number">1000</span>),</span><br><span class="line">                    <span class="string">&quot;end&quot;</span>: <span class="string">&#x27;ui&#x27;</span>,<span class="comment">#playend                                                                   </span></span><br><span class="line">                &#125;</span><br><span class="line">        temp_datas.append(song_data)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(count): </span><br><span class="line">        song_datas.extend(temp_datas)  </span><br><span class="line">    play(music,song_datas)   </span><br><span class="line">          </span><br><span class="line">    <span class="comment">#---------------结束播放--------------- </span></span><br><span class="line">    <span class="comment">#account_info = music.user_detail(uid)</span></span><br><span class="line">    msg += <span class="string">&#x27;- 歌曲已播放&#x27;</span>+<span class="built_in">str</span>(count)+<span class="string">&#x27;次\n\n&#x27;</span>         </span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">yunbei_task</span>(<span class="params">music,user_setting</span>):</span><br><span class="line">    <span class="keyword">global</span> msg</span><br><span class="line">    msg +=  <span class="string">&quot;云贝任务\n&quot;</span></span><br><span class="line">    count = <span class="number">0</span></span><br><span class="line">    resp = music.yunbei_task()</span><br><span class="line">    <span class="keyword">for</span> task <span class="keyword">in</span> resp[<span class="string">&#x27;data&#x27;</span>]:</span><br><span class="line">        <span class="keyword">if</span> task[<span class="string">&#x27;userTaskId&#x27;</span>]==<span class="number">0</span>:</span><br><span class="line">            <span class="keyword">if</span> user_setting[<span class="string">&#x27;yunbei&#x27;</span>][<span class="string">&#x27;share&#x27;</span>][<span class="string">&#x27;taskName&#x27;</span>]==task[<span class="string">&#x27;taskName&#x27;</span>] <span class="keyword">and</span> user_setting[<span class="string">&#x27;yunbei&#x27;</span>][<span class="string">&#x27;share&#x27;</span>][<span class="string">&#x27;on&#x27;</span>]:</span><br><span class="line">                count += <span class="number">1</span></span><br><span class="line">                <span class="keyword">if</span> <span class="built_in">len</span>(user_setting[<span class="string">&#x27;yunbei&#x27;</span>][<span class="string">&#x27;share&#x27;</span>][<span class="string">&#x27;id&#x27;</span>])&gt;<span class="number">0</span>:</span><br><span class="line">                    playlist_id = random.choice(user_setting[<span class="string">&#x27;yunbei&#x27;</span>][<span class="string">&#x27;share&#x27;</span>][<span class="string">&#x27;id&#x27;</span>])</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    playlists = music.recommend_resource()</span><br><span class="line">                    playlist_ids = [playlist[<span class="string">&quot;id&quot;</span>] <span class="keyword">for</span> playlist <span class="keyword">in</span>  playlists]</span><br><span class="line">                    playlist_id = random.choice(playlist_ids)</span><br><span class="line">                </span><br><span class="line">                <span class="keyword">if</span> <span class="built_in">len</span>(user_setting[<span class="string">&#x27;yunbei&#x27;</span>][<span class="string">&#x27;share&#x27;</span>][<span class="string">&#x27;msg&#x27;</span>])&gt;<span class="number">0</span>:</span><br><span class="line">                    event_msg = random.choice(user_setting[<span class="string">&#x27;yunbei&#x27;</span>][<span class="string">&#x27;share&#x27;</span>][<span class="string">&#x27;msg&#x27;</span>])</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    event_msg = <span class="string">&#x27;每日分享&#x27;</span></span><br><span class="line"></span><br><span class="line">                result = music.share_resource(<span class="built_in">type</span>=<span class="string">&#x27;playlist&#x27;</span>,msg=event_msg,<span class="built_in">id</span>=playlist_id)</span><br><span class="line">                <span class="keyword">if</span> result[<span class="string">&#x27;code&#x27;</span>]==<span class="number">200</span>:</span><br><span class="line">                    event_id = result[<span class="string">&#x27;id&#x27;</span>]</span><br><span class="line">                    <span class="keyword">if</span> user_setting[<span class="string">&#x27;yunbei&#x27;</span>][<span class="string">&#x27;share&#x27;</span>][<span class="string">&#x27;delete&#x27;</span>]:</span><br><span class="line">                        time.sleep(<span class="number">0.5</span>)</span><br><span class="line">                        delete_result = music.event_delete(event_id)</span><br><span class="line">                        msg +=  <span class="string">&#x27;- 分享成功，已删除动态\n&#x27;</span> </span><br><span class="line">                    <span class="keyword">else</span>:</span><br><span class="line">                        msg +=  <span class="string">&#x27;- 分享成功\n&#x27;</span> </span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    msg +=  <span class="string">&#x27;- 分享失败:&#123;&#125;\n&#x27;</span>.<span class="built_in">format</span>(result)    </span><br><span class="line"></span><br><span class="line">                time.sleep(<span class="number">2</span>)       </span><br><span class="line">              </span><br><span class="line">    <span class="keyword">if</span> count &gt; <span class="number">0</span>:</span><br><span class="line">        msg += <span class="string">&#x27;\n&#x27;</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        msg += <span class="string">&#x27;- 无可执行的任务\n\n&#x27;</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_yunbei</span>(<span class="params">music</span>):</span><br><span class="line">    <span class="keyword">global</span> msg</span><br><span class="line">    msg +=  <span class="string">&quot;领取云贝\n&quot;</span></span><br><span class="line">    resp = music.yunbei_task_todo()</span><br><span class="line">    count = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> task <span class="keyword">in</span> resp[<span class="string">&#x27;data&#x27;</span>]:</span><br><span class="line">        <span class="keyword">if</span> task[<span class="string">&#x27;userTaskId&#x27;</span>]&gt;<span class="number">0</span>:</span><br><span class="line">            music.yunbei_task_finish(task[<span class="string">&#x27;userTaskId&#x27;</span>], task[<span class="string">&#x27;depositCode&#x27;</span>])</span><br><span class="line">            msg += <span class="string">&#x27;- &#123;&#125;:云贝+&#123;&#125;\n&#x27;</span>.<span class="built_in">format</span>(task[<span class="string">&#x27;taskName&#x27;</span>],task[<span class="string">&#x27;taskPoint&#x27;</span>])</span><br><span class="line">            count += <span class="number">1</span></span><br><span class="line">    <span class="keyword">if</span> count &gt; <span class="number">0</span>:</span><br><span class="line">        msg += <span class="string">&#x27;\n&#x27;</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        msg += <span class="string">&#x27;- 无可领取的云贝\n\n&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">play</span>(<span class="params">music,song_datas,sleep_time=<span class="number">0.4</span></span>):</span><br><span class="line">    <span class="keyword">if</span> <span class="string">&quot;upload_num&quot;</span> <span class="keyword">in</span> music.user_setting[<span class="string">&#x27;daka&#x27;</span>]:</span><br><span class="line">        num = music.user_setting[<span class="string">&#x27;daka&#x27;</span>][<span class="string">&#x27;upload_num&#x27;</span>]</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        num = <span class="number">300</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="built_in">len</span>(song_datas), num):</span><br><span class="line">        music.daka(song_datas[i:i+num])</span><br><span class="line">        time.sleep(sleep_time)</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">follow</span>(<span class="params">music</span>):</span><br><span class="line">    author_uid = <span class="number">347837981</span></span><br><span class="line">    result = music.user_detail(author_uid)</span><br><span class="line">    <span class="keyword">if</span> music.uid != author_uid <span class="keyword">and</span> <span class="keyword">not</span> result[<span class="string">&#x27;profile&#x27;</span>][<span class="string">&#x27;followed&#x27;</span>]:</span><br><span class="line">        <span class="built_in">print</span>(music.user_follow(author_uid))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">sign</span>(<span class="params">music</span>):</span><br><span class="line">    <span class="keyword">global</span> msg</span><br><span class="line">    msg+=<span class="string">&#x27;签到信息\n&#x27;</span></span><br><span class="line">    <span class="comment">#---------------开始签到---------------</span></span><br><span class="line">    <span class="comment">#手机端签到</span></span><br><span class="line">    sign_phone = music.daily_task(<span class="literal">True</span>)</span><br><span class="line">    code_phone = sign_phone[<span class="string">&quot;code&quot;</span>]</span><br><span class="line">    <span class="keyword">if</span> code_phone == <span class="number">200</span>:</span><br><span class="line">        msg += <span class="string">&quot;- 手机端:签到成功，云贝+&quot;</span> + <span class="built_in">str</span>(sign_phone[<span class="string">&quot;point&quot;</span>])</span><br><span class="line">    <span class="keyword">elif</span> code_phone == -<span class="number">2</span>:</span><br><span class="line">        msg += <span class="string">&quot;- 手机端:重复签到&quot;</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        msg += <span class="string">&quot;- 手机端:未登录&quot;</span>  </span><br><span class="line">    msg += <span class="string">&#x27;\n&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#桌面端签到</span></span><br><span class="line">    sign_pc = music.daily_task(<span class="literal">False</span>)</span><br><span class="line">    code_pc = sign_pc[<span class="string">&quot;code&quot;</span>]</span><br><span class="line">    <span class="keyword">if</span> code_pc == <span class="number">200</span>:</span><br><span class="line">        msg += <span class="string">&quot;- PC端:签到成功，云贝+&quot;</span> + <span class="built_in">str</span>(sign_pc[<span class="string">&quot;point&quot;</span>])</span><br><span class="line">    <span class="keyword">elif</span> code_pc == -<span class="number">2</span>:</span><br><span class="line">        msg += <span class="string">&quot;- PC端:重复签到&quot;</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        msg += <span class="string">&quot;- PC端:未登录&quot;</span> </span><br><span class="line">    msg += <span class="string">&#x27;\n\n&#x27;</span></span><br><span class="line">    <span class="comment">#---------------结束签到---------------</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">musician_sign</span>(<span class="params">music</span>):</span><br><span class="line">    <span class="keyword">global</span> msg</span><br><span class="line">    msg+=<span class="string">&#x27;音乐人信息\n&#x27;</span></span><br><span class="line"></span><br><span class="line">    access_result = music.user_access()</span><br><span class="line">    result = music.mission_cycle_get()</span><br><span class="line">    <span class="keyword">if</span> result[<span class="string">&#x27;code&#x27;</span>] == <span class="number">200</span>:</span><br><span class="line">        mission_list = result.get(<span class="string">&#x27;data&#x27;</span>,&#123;&#125;).get(<span class="string">&#x27;list&#x27;</span>,[])</span><br><span class="line">        <span class="keyword">for</span> mission <span class="keyword">in</span> mission_list:</span><br><span class="line">            <span class="keyword">if</span> mission[<span class="string">&#x27;status&#x27;</span>] == <span class="number">20</span>:</span><br><span class="line">                description = mission[<span class="string">&#x27;description&#x27;</span>]</span><br><span class="line">                userMissionId = mission[<span class="string">&#x27;userMissionId&#x27;</span>]</span><br><span class="line">                period = mission[<span class="string">&#x27;period&#x27;</span>]</span><br><span class="line">                rewardWorth = mission[<span class="string">&#x27;rewardWorth&#x27;</span>]</span><br><span class="line">                    </span><br><span class="line">                reward_result = music.reward_obtain(userMissionId=userMissionId,period=period)</span><br><span class="line">                <span class="keyword">if</span> reward_result[<span class="string">&#x27;code&#x27;</span>] == <span class="number">200</span>:</span><br><span class="line">                    msg += <span class="string">&quot;- &quot;</span> + description + <span class="string">&quot;:云豆+&quot;</span>+<span class="built_in">str</span>(rewardWorth) + <span class="string">&quot;\n&quot;</span></span><br><span class="line">                                </span><br><span class="line">            <span class="keyword">elif</span> mission[<span class="string">&#x27;description&#x27;</span>] == <span class="string">&#x27;每日登录音乐人中心&#x27;</span> <span class="keyword">and</span> mission[<span class="string">&#x27;status&#x27;</span>] == <span class="number">100</span>:</span><br><span class="line">                msg += <span class="string">&quot;- 每日登录音乐人中心:已领取\n&quot;</span></span><br><span class="line"></span><br><span class="line">        info_result = music.musician_data()      </span><br><span class="line">        data = info_result.get(<span class="string">&#x27;data&#x27;</span>,&#123;&#125;)  </span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> data[<span class="string">&#x27;playCount&#x27;</span>] <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            msg += <span class="string">&quot;- 昨日播放量: -- \n&quot;</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            msg += <span class="string">&quot;- 昨日播放量:&quot;</span>+<span class="built_in">str</span>(data[<span class="string">&#x27;playCount&#x27;</span>]) + <span class="string">&quot;\n&quot;</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> data[<span class="string">&#x27;followerCountIncrement&#x27;</span>] <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            msg += <span class="string">&quot;- 昨日新增粉丝(人): -- \n&quot;</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            msg += <span class="string">&quot;- 昨日新增粉丝(人):&quot;</span>+<span class="built_in">str</span>(data[<span class="string">&#x27;followerCountIncrement&#x27;</span>]) + <span class="string">&quot;\n&quot;</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> data[<span class="string">&#x27;productionTotal&#x27;</span>] <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            msg += <span class="string">&quot;- 作品(首): -- \n&quot;</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            msg += <span class="string">&quot;- 作品(首):&quot;</span>+<span class="built_in">str</span>(data[<span class="string">&#x27;productionTotal&#x27;</span>]) + <span class="string">&quot;\n&quot;</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> data[<span class="string">&#x27;availableExtractIncomeTotal&#x27;</span>] <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            msg += <span class="string">&quot;- 可提现余额: -- \n&quot;</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            msg += <span class="string">&quot;- 可提现余额:&quot;</span>+<span class="built_in">str</span>(data[<span class="string">&#x27;availableExtractIncomeTotal&#x27;</span>]) + <span class="string">&quot;\n&quot;</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> data[<span class="string">&#x27;musicianLevelScore&#x27;</span>] <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            msg += <span class="string">&quot;- 音乐人指数: -- \n&quot;</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            msg += <span class="string">&quot;- 音乐人指数:&quot;</span>+<span class="built_in">str</span>(data[<span class="string">&#x27;musicianLevelScore&#x27;</span>]) + <span class="string">&quot;\n&quot;</span></span><br><span class="line"></span><br><span class="line">        msg += <span class="string">&#x27;\n&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    start()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="WPS"><a href="#WPS" class="headerlink" title="WPS"></a>WPS</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf8 -*-</span></span><br><span class="line"><span class="comment">#-*- codeing =utf-8 -*-</span></span><br><span class="line"><span class="comment">#@Time : 2021/2/8 10:42</span></span><br><span class="line"><span class="comment">#@File : wps签到领空间.py</span></span><br><span class="line"><span class="comment">#@Software : PyCharm</span></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line">wps_sid=<span class="string">&quot;wps_sid=V02SecH4GwO7-a9BOK7-INGAA04c1bo00aaefe2000435d4e79&quot;</span>	</span><br><span class="line"><span class="comment">#SCKEY = &#x27;SCU155663T250c7c2cfb1ed174cfd9dfbb93f9edc4601166eb99dec&#x27;</span></span><br><span class="line"><span class="comment">#SCKEY2 = &#x27;SCT10915TrbGLdfzI6Cwuy6HqOTS4JaW1&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 微信推送</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">weChatPush</span>(<span class="params">txt</span>):</span><br><span class="line">    Secret = <span class="string">&quot;GuabRMpWYTIeIkk_Dc-sX5LJi59M_7JfCk9KJrtn8Bs&quot;</span></span><br><span class="line">    corpid = <span class="string">&#x27;ww41560323f54f5b7b&#x27;</span></span><br><span class="line">    url = <span class="string">&#x27;https://qyapi.weixin.qq.com/cgi-bin/gettoken?corpid=&#123;&#125;&amp;corpsecret=&#123;&#125;&#x27;</span></span><br><span class="line">    getr = requests.get(url=url.<span class="built_in">format</span>(corpid, Secret))</span><br><span class="line">    access_token = getr.json().get(<span class="string">&#x27;access_token&#x27;</span>)</span><br><span class="line">    data = &#123;</span><br><span class="line">            <span class="string">&quot;touser&quot;</span>: <span class="string">&quot;@all&quot;</span>,</span><br><span class="line">            <span class="string">&quot;msgtype&quot;</span>: <span class="string">&quot;text&quot;</span>,</span><br><span class="line">            <span class="string">&quot;agentid&quot;</span>: <span class="number">1000003</span>,</span><br><span class="line">            <span class="string">&quot;text&quot;</span>: &#123;</span><br><span class="line">                <span class="string">&quot;content&quot;</span>: <span class="string">&quot;WPS签到领空间\n&quot;</span> + txt</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="string">&quot;safe&quot;</span>: <span class="number">0</span>,</span><br><span class="line">            &#125;</span><br><span class="line">    requests.post(url=<span class="string">&quot;https://qyapi.weixin.qq.com/cgi-bin/message/send?access_token=&#123;&#125;&quot;</span>.<span class="built_in">format</span>(access_token),data=json.dumps(data))</span><br><span class="line"><span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">wps</span>():</span><br><span class="line">    url=<span class="string">&quot;https://vip.wps.cn/sign/v2&quot;</span></span><br><span class="line">    headers=&#123;</span><br><span class="line">        <span class="string">&quot;Cookie&quot;</span>:wps_sid,</span><br><span class="line">        <span class="string">&quot;User-Agent&quot;</span>:<span class="string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/46.0.2486.0 Safari/537.36 Edge/13.10586&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">    data=&#123;<span class="string">&quot;platform&quot;</span>:<span class="string">&quot;8&quot;</span>,</span><br><span class="line">        <span class="string">&quot;captcha_pos&quot;</span>:<span class="string">&quot;137.00431974731889, 36.00431593261568&quot;</span>,</span><br><span class="line">        <span class="string">&quot;img_witdh&quot;</span>:<span class="string">&quot;275.164&quot;</span>,</span><br><span class="line">        <span class="string">&quot;img_height&quot;</span>:<span class="string">&quot;69.184&quot;</span></span><br><span class="line">    &#125;	</span><br><span class="line">    data0=&#123;<span class="string">&quot;platform&quot;</span>:<span class="string">&quot;8&quot;</span>&#125;		</span><br><span class="line">    yz_url=<span class="string">&quot;https://vip.wps.cn/checkcode/signin/captcha.png?platform=8&amp;encode=0&amp;img_witdh=275.164&amp;img_height=69.184&quot;</span></span><br><span class="line"></span><br><span class="line">    req=requests.post(url=url,headers=headers,data=data0)</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> (<span class="string">&quot;msg&quot;</span> <span class="keyword">in</span> req.text):		</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;wps_sid无效&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;wps_sid无效&quot;</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        sus=json.loads(req.text)[<span class="string">&quot;result&quot;</span>]		</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;免验证签到--&gt;&quot;</span>+sus)		</span><br><span class="line">        <span class="keyword">if</span> sus == <span class="string">&quot;error&quot;</span>:</span><br><span class="line">            <span class="keyword">for</span> n <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">60</span>):</span><br><span class="line">                requests.get(url=yz_url,headers=headers)</span><br><span class="line">                req=requests.post(url=url,headers=headers,data=data)</span><br><span class="line">                sus=json.loads(req.text)[<span class="string">&quot;result&quot;</span>]</span><br><span class="line">                <span class="comment">#print(str(n+1)+&quot;尝试验证签到--&gt;&quot;+sus)</span></span><br><span class="line">                time.sleep(random.randint(<span class="number">0</span>,<span class="number">5</span>)/<span class="number">10</span>)</span><br><span class="line">                <span class="keyword">if</span> sus==<span class="string">&quot;ok&quot;</span>:</span><br><span class="line">                    sus=<span class="string">&quot;成功！&quot;</span></span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line">            sus=<span class="string">&quot;失败，请手动签到！&quot;</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;最终签到结果--&gt;&quot;</span>+sus)</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;最终签到结果:&quot;</span>+sus</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    s=wps()</span><br><span class="line">    weChatPush(s)</span><br><span class="line">    <span class="built_in">print</span>(s)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    main()</span><br><span class="line"></span><br></pre></td></tr></table></figure>











<h4 id="GPU查看显卡显存"><a href="#GPU查看显卡显存" class="headerlink" title="GPU查看显卡显存"></a>GPU查看显卡显存</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">查看GPU01显卡状态</span></span><br><span class="line">jsub -q normal -n 1 -e error.%J -o output.%J -J my_job -m gpu01 nvidia-smi</span><br><span class="line"><span class="meta"># </span><span class="language-bash"><span class="built_in">cat</span> output.作业号</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">查看GPU02显卡状态</span></span><br><span class="line">jsub -q normal -n 1 -e error.%J -o output.%J -J my_job -m gpu02 nvidia-smi</span><br><span class="line"><span class="meta"># </span><span class="language-bash"><span class="built_in">cat</span> output.作业号</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

















<h4 id="linux用户sudo不输密码-Linux-sudo操作免密码"><a href="#linux用户sudo不输密码-Linux-sudo操作免密码" class="headerlink" title="linux用户sudo不输密码 Linux sudo操作免密码"></a>linux用户sudo不输密码 Linux sudo操作免密码</h4><p>sudo是以管理员权限进行操作，但是需要输入密码，如果想在用sudo时不用输入密码，需要修改<code>/etc/sudoers</code> 文件。</p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/82f65fb1fde0">https://www.jianshu.com/p/82f65fb1fde0</a></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">sudo vi /etc/sudoers</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">在最下面一行加上，下面的username需要改成自己的用户名：</span> </span><br><span class="line"></span><br><span class="line">username ALL=(ALL:ALL) NOPASSWD: ALL</span><br></pre></td></tr></table></figure>





<h4 id="Miniconda-安装"><a href="#Miniconda-安装" class="headerlink" title="Miniconda 安装"></a>Miniconda 安装</h4><p>地址 <a target="_blank" rel="noopener" href="https://mirrors.tuna.tsinghua.edu.cn/anaconda/miniconda/?C=M&amp;O=D">https://mirrors.tuna.tsinghua.edu.cn/anaconda/miniconda/?C=M&amp;O=D</a></p>
<h4 id="限制root用户远程登录-只能登录普通用户在登录"><a href="#限制root用户远程登录-只能登录普通用户在登录" class="headerlink" title="限制root用户远程登录 只能登录普通用户在登录"></a>限制root用户远程登录 只能登录普通用户在登录</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">vim /etc/ssh/sshd_config</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">将</span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">PermitRootLogin <span class="built_in">yes</span></span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">改为</span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">PermitRootLogin no</span></span><br><span class="line"></span><br><span class="line">systemctl restart sshd</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h4 id="查看jhappform密码"><a href="#查看jhappform密码" class="headerlink" title="查看jhappform密码"></a>查看jhappform密码</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">cd /apps/jhinno/appform/etc/base/</span><br><span class="line"></span><br><span class="line">cat /apps/jhinno/appform/conf/execproxy/jhlogon/jhlogon.qyf</span><br><span class="line"></span><br><span class="line">./jhencrypt -d mima</span><br></pre></td></tr></table></figure>

































<h4 id="为vscode配置LaTex"><a href="#为vscode配置LaTex" class="headerlink" title="为vscode配置LaTex"></a>为vscode配置LaTex</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># 获取ISO文件</span></span><br><span class="line">https://tug.org/texlive/acquire-iso.html</span><br><span class="line">    </span><br><span class="line"><span class="comment"># 下载ISO文件后安装</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p><img src="https://pic-20201016.oss-cn-qingdao.aliyuncs.com/img/image-20220520143728677.png" alt="image-20220520143728677"></p>
<p><img src="https://pic-20201016.oss-cn-qingdao.aliyuncs.com/img/image-20220520143747575.png" alt="image-20220520143747575"></p>
<p><img src="https://pic-20201016.oss-cn-qingdao.aliyuncs.com/img/image-20220520143926471.png" alt="image-20220520143926471"></p>
<p><img src="https://pic-20201016.oss-cn-qingdao.aliyuncs.com/img/v2-c52fd778b93f735d04d71a5df602d2a8_720w.jpg" alt="img"></p>
<p><img src="https://pic-20201016.oss-cn-qingdao.aliyuncs.com/img/image-20220520144032928.png" alt="image-20220520144032928"></p>
<h4 id="安装VScode插件"><a href="#安装VScode插件" class="headerlink" title="安装VScode插件"></a>安装VScode插件</h4><p>输入**”latex workshop”**，选择第一个LaTeX Workshop插件；</p>
<h4 id="按Ctrl-，进入设置页面。"><a href="#按Ctrl-，进入设置页面。" class="headerlink" title="按Ctrl + ，进入设置页面。"></a>按<strong>Ctrl + ，</strong>进入设置页面。</h4><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;latex-workshop.latex.autoBuild.run&quot;</span><span class="punctuation">:</span> <span class="string">&quot;never&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;latex-workshop.showContextMenu&quot;</span><span class="punctuation">:</span> <span class="keyword">true</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;latex-workshop.intellisense.package.enabled&quot;</span><span class="punctuation">:</span> <span class="keyword">true</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;latex-workshop.message.error.show&quot;</span><span class="punctuation">:</span> <span class="keyword">false</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;latex-workshop.message.warning.show&quot;</span><span class="punctuation">:</span> <span class="keyword">false</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;latex-workshop.latex.tools&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;xelatex&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;xelatex&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;args&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                <span class="string">&quot;-synctex=1&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;-interaction=nonstopmode&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;-file-line-error&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;%DOCFILE%&quot;</span></span><br><span class="line">            <span class="punctuation">]</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pdflatex&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pdflatex&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;args&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                <span class="string">&quot;-synctex=1&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;-interaction=nonstopmode&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;-file-line-error&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;%DOCFILE%&quot;</span></span><br><span class="line">            <span class="punctuation">]</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;latexmk&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;latexmk&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;args&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                <span class="string">&quot;-synctex=1&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;-interaction=nonstopmode&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;-file-line-error&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;-pdf&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;-outdir=%OUTDIR%&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;%DOCFILE%&quot;</span></span><br><span class="line">            <span class="punctuation">]</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;bibtex&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;bibtex&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;args&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                <span class="string">&quot;%DOCFILE%&quot;</span></span><br><span class="line">            <span class="punctuation">]</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;latex-workshop.latex.recipes&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;XeLaTeX&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;tools&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                <span class="string">&quot;xelatex&quot;</span></span><br><span class="line">            <span class="punctuation">]</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;PDFLaTeX&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;tools&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                <span class="string">&quot;pdflatex&quot;</span></span><br><span class="line">            <span class="punctuation">]</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;BibTeX&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;tools&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                <span class="string">&quot;bibtex&quot;</span></span><br><span class="line">            <span class="punctuation">]</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;LaTeXmk&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;tools&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                <span class="string">&quot;latexmk&quot;</span></span><br><span class="line">            <span class="punctuation">]</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;xelatex -&gt; bibtex -&gt; xelatex*2&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;tools&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                <span class="string">&quot;xelatex&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;bibtex&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;xelatex&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;xelatex&quot;</span></span><br><span class="line">            <span class="punctuation">]</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pdflatex -&gt; bibtex -&gt; pdflatex*2&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;tools&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                <span class="string">&quot;pdflatex&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;bibtex&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;pdflatex&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;pdflatex&quot;</span></span><br><span class="line">            <span class="punctuation">]</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;latex-workshop.latex.clean.fileTypes&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="string">&quot;*.aux&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;*.bbl&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;*.blg&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;*.idx&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;*.ind&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;*.lof&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;*.lot&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;*.out&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;*.toc&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;*.acn&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;*.acr&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;*.alg&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;*.glg&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;*.glo&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;*.gls&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;*.ist&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;*.fls&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;*.log&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;*.fdb_latexmk&quot;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;latex-workshop.latex.autoClean.run&quot;</span><span class="punctuation">:</span> <span class="string">&quot;onFailed&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;latex-workshop.latex.recipe.default&quot;</span><span class="punctuation">:</span> <span class="string">&quot;lastUsed&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;latex-workshop.view.pdf.internal.synctex.keybinding&quot;</span><span class="punctuation">:</span> <span class="string">&quot;double-click&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h4 id="测试文件"><a href="#测试文件" class="headerlink" title="测试文件"></a>测试文件</h4><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">\documentclass</span>[a4paper]&#123;article&#125;</span><br><span class="line"><span class="keyword">\usepackage</span>[margin=1in]&#123;geometry&#125; <span class="comment">% 设置边距，符合Word设定</span></span><br><span class="line"><span class="keyword">\usepackage</span>&#123;ctex&#125;</span><br><span class="line"><span class="keyword">\usepackage</span>&#123;lipsum&#125;</span><br><span class="line"><span class="keyword">\title</span>&#123;<span class="keyword">\heiti</span><span class="keyword">\zihao</span>&#123;2&#125; This is a test for vscode&#125;</span><br><span class="line"><span class="keyword">\author</span>&#123;<span class="keyword">\songti</span> Ali-loner&#125;</span><br><span class="line"><span class="keyword">\date</span>&#123;2020.08.02&#125;</span><br><span class="line"><span class="keyword">\begin</span>&#123;document&#125;</span><br><span class="line">    <span class="keyword">\maketitle</span></span><br><span class="line"><span class="keyword">\begin</span>&#123;abstract&#125;</span><br><span class="line">    <span class="keyword">\lipsum</span>[2]</span><br><span class="line"><span class="keyword">\end</span>&#123;abstract&#125;</span><br><span class="line"><span class="keyword">\tableofcontents</span></span><br><span class="line"><span class="keyword">\section</span>&#123;This is a section&#125;</span><br><span class="line">Hello world! 你好，世界 ！</span><br><span class="line"><span class="keyword">\end</span>&#123;document&#125;</span><br></pre></td></tr></table></figure>

































<h4 id="服务器上安装配置jupyter"><a href="#服务器上安装配置jupyter" class="headerlink" title="服务器上安装配置jupyter"></a>服务器上安装配置jupyter</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># </span><span class="language-bash">更新 pip 安装 jupyter</span></span><br><span class="line">pip install --upgrade pip</span><br><span class="line">pip install jupyter</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">配置一下 参数 生成一个配置文件 几下文件位置 ex：/home/peak/.jupyter/jupyter_notebook_config.py</span></span><br><span class="line">jupyter notebook --generate-config</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">运行python 设置一个密码 登录密码 Qyf9999.</span></span><br><span class="line">from notebook.auth import passwd</span><br><span class="line">passwd()</span><br><span class="line"><span class="meta"> </span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">输入2次密码用来登录你的jupyter notebook 此时会生成一个密钥 ex: <span class="string">&#x27;sha1:43b95b731276:5d330ee6f6054613b3ab4cc59c5048ff7c70f549&#x27;</span></span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">修改配置文件 删除前面的<span class="comment">#注释</span></span></span><br><span class="line">vim /home/peak/.jupyter/jupyter_notebook_config.py</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">修改项 允许所有IP访问 前面密码的密钥 默认启动时不打开浏览器 修改端口为8889</span></span><br><span class="line">c.NotebookApp.ip=&#x27;0.0.0.0&#x27;</span><br><span class="line">c.NotebookApp.password = &#x27;sha1:43b95b731276:5d330ee6f6054613b3ab4cc59c5048ff7c70f549&#x27;</span><br><span class="line">c.NotebookApp.open_browser = False</span><br><span class="line">c.NotebookApp.port = 8889</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">保存好后启动 加载配置文件 并把日志保存到指定位置 输入<span class="built_in">exit</span> 退出即可</span></span><br><span class="line">jupyter notebook --config /home/peak/.jupyter/jupyter_notebook_config.py --allow-root &gt; /home/peak/log/log.log &amp; exit</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">如果想要停止 查到进程号后 可以直接 <span class="built_in">kill</span> -9 进程号</span></span><br><span class="line">ps -ef | grep &#x27;jupyter&#x27;</span><br><span class="line">kill -9 进程号</span><br></pre></td></tr></table></figure>



<h4 id="Jupyter-notebook-指定-Python-解释器"><a href="#Jupyter-notebook-指定-Python-解释器" class="headerlink" title="Jupyter notebook 指定 Python 解释器"></a><strong>Jupyter notebook 指定 Python 解释器</strong></h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># </span><span class="language-bash">创建并进入conda环境 安装ipykernel</span></span><br><span class="line">conda activate Dpt</span><br><span class="line">pip install ipykernel</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">将当前conda环境加入到jupyter中 /opt/miniconda3/envs/Dpt/bin/python是Dpt环境的目录</span></span><br><span class="line">sudo /opt/miniconda3/envs/Dpt/bin/python -m ipykernel install --name Dpt</span><br></pre></td></tr></table></figure>















<h4 id="Python-文件读写与动态输出"><a href="#Python-文件读写与动态输出" class="headerlink" title="Python 文件读写与动态输出"></a>Python 文件读写与动态输出</h4><p>追加文件内容到文件中</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">import time</span><br><span class="line"></span><br><span class="line"># 打开文件 以追加的形式打开</span><br><span class="line">time1  = time.strftime(&#x27;%Y-%m-%d %H:%M:%S&#x27;,time.localtime(time.time()))</span><br><span class="line">file = open(&quot;/home/abc.log&quot;, &quot;a&quot;)</span><br><span class="line">str = &quot;the log file created in &quot; + time1</span><br><span class="line"></span><br><span class="line"># 写入文件缓冲区 + &#x27;\n&#x27;表示换行</span><br><span class="line">file.write( str + &#x27;\n&#x27; )</span><br><span class="line"></span><br><span class="line"># 写入文件中</span><br><span class="line">file.flush()</span><br></pre></td></tr></table></figure>

<p>读取文件并输出，监控文件变化并输出</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">tail -f -n 20 file.txt</span><br></pre></td></tr></table></figure>























<h3 id="建好的环境进行注册，通过gym的标准形式进行调用"><a href="#建好的环境进行注册，通过gym的标准形式进行调用" class="headerlink" title="建好的环境进行注册，通过gym的标准形式进行调用"></a>建好的环境进行注册，通过gym的标准形式进行调用</h3><ol>
<li><p>将我们自己的环境文件（我创建的文件名为grid_mdp.py)拷贝到你<strong>的gym安装目录</strong>&#x2F;gym&#x2F;gym&#x2F;envs&#x2F;classic_control文件夹中。（拷贝在这个文件夹中因为要使用rendering模块。当然，也有其他办法。该方法不唯一）</p>
<p>&#x2F;opt&#x2F;miniconda3&#x2F;envs&#x2F;Dpt&#x2F;lib&#x2F;python3.7&#x2F;site-packages&#x2F;gym</p>
</li>
<li><p>打开该文件夹（第一步中的文件夹）下的__init__.py文件，在文件末尾加入语句：</p>
</li>
</ol>
   <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">from</span> gym.envs.classic_control.grid_mdp <span class="keyword">import</span> GridEnv</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>进入文件夹你的gym安装目录&#x2F;gym&#x2F;gym&#x2F;envs，打开该文件夹下的__init__.py文件，添加代码：</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">register(</span><br><span class="line"></span><br><span class="line">	<span class="built_in">id</span>=<span class="string">&#x27;GridWorld-v0&#x27;</span>,</span><br><span class="line"></span><br><span class="line">	entry_point=<span class="string">&#x27;gym.envs.classic_control:GridEnv&#x27;</span>,</span><br><span class="line"></span><br><span class="line">	max_episode_steps=<span class="number">200</span>,</span><br><span class="line"></span><br><span class="line">	reward_threshold=<span class="number">100.0</span>,</span><br><span class="line"></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 可以通过该id 来调用该环境 env = gym.make(&#x27;GridWorld-v0&#x27;)</span></span><br></pre></td></tr></table></figure>











<h4 id="VSCode-remote连接服务器"><a href="#VSCode-remote连接服务器" class="headerlink" title="VSCode remote连接服务器"></a>VSCode remote连接服务器</h4><ol>
<li><p>安装remote development插件</p>
</li>
<li><p>配置公玥登录</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">在本地的 user/xxx/.ssh/ 下执行生成公玥命令</span></span><br><span class="line"></span><br><span class="line">ssh-keygen -t rsa </span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">上传到服务器 并添加到密钥登录</span></span><br><span class="line"></span><br><span class="line">scp id_rs.pub 用户名@IP地址:/tmp</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">配置 并修改权限</span></span><br><span class="line"> </span><br><span class="line">cat /tmp/id_rs.pub &gt;&gt; ~/.ssh/authorized_keys</span><br><span class="line">chmod 600 ~/.ssh/authorized_keys</span><br><span class="line">sudo systemctl restart sshd</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
<li><p>在VSCode中修改配置</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Host 名称</span><br><span class="line">    HostName IP</span><br><span class="line">    User 用户名</span><br><span class="line">    IdentityFile &quot;C:\Users\yufen\.ssh\id_rsa&quot; # 公玥文件地址</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Host 3090</span><br><span class="line">  HostName 172.19.163.234</span><br><span class="line">  User peak</span><br><span class="line">  port 22</span><br><span class="line">  IdentityFile &quot;C:\\Users\\yufen\\.ssh\\id_rsa&quot;</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="在VSCode中配置conda"><a href="#在VSCode中配置conda" class="headerlink" title="在VSCode中配置conda"></a>在VSCode中配置conda</h4><ol>
<li>安装 python 插件</li>
<li>按“shift+ctrl+p”,搜索 Select Interpreter: 选择并重启VS code 即可。</li>
<li></li>
</ol>
<h4 id="权限相关"><a href="#权限相关" class="headerlink" title="权限相关"></a>权限相关</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># </span><span class="language-bash">创建用户组</span> </span><br><span class="line">sudo groupadd 组名</span><br><span class="line"><span class="meta">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"></span><span class="meta"></span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">更改文件的所属用户组</span></span><br><span class="line">sudo chgrp -R 组名 目录</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">更改文件夹的权限 -R 递归</span></span><br><span class="line">sudo chmod 770 -R 目录/文件名</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">为用户添加用户组</span></span><br><span class="line">sudo usermod -a -G 用户名 用户组</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">新建用户并加入用户组</span></span><br><span class="line">sudo adduser -u 用户名 -G 用户组</span><br><span class="line"></span><br></pre></td></tr></table></figure>



























<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#查看torch版本，cuda是否可用</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="built_in">print</span>(torch.__version__)</span><br><span class="line"><span class="built_in">print</span>(torch.cuda.is_available())</span><br></pre></td></tr></table></figure>





















<h4 id="UPC-GPU账号认证服务没有开启，"><a href="#UPC-GPU账号认证服务没有开启，" class="headerlink" title="UPC GPU账号认证服务没有开启，"></a>UPC GPU账号认证服务没有开启，</h4><p>开启方法是：使用root登录master，</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ssh -X io01</span><br><span class="line">vmware</span><br></pre></td></tr></table></figure>
<p>开启服务，关闭界面（后台运行vmware）</p>
<h4 id="SH"><a href="#SH" class="headerlink" title="SH"></a>SH</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">亮屏状态下：screen=`dumpsys window policy | grep mIsShowing | grep <span class="string">&#x27;false&#x27;</span>`   亮屏下有返回值mIsShowing=<span class="literal">false</span></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">返回</span></span><br><span class="line">input keyevent BACK</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">am force-stop com.eg.android.AlipayGphone</span><br><span class="line">sleep 3</span><br><span class="line">am start com.eg.android.AlipayGphone/.FastStartActivity</span><br><span class="line">sleep 3</span><br><span class="line">am startservice com.eg.android.AlipayGphone/com.alipay.android.launcher.service.LauncherService</span><br><span class="line">sleep 1</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">启动与停止服务</span></span><br><span class="line">am startservice com.eg.android.AlipayGphone/com.alipay.android.launcher.service.LauncherService</span><br><span class="line">am stopservice com.eg.android.AlipayGphone/com.alipay.android.launcher.service.LauncherService</span><br><span class="line"></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">!/system/bin/sh</span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">唤醒屏幕的脚本</span></span><br><span class="line">LogDir=&quot;/sdcard/Android/Peak/run.log&quot;</span><br><span class="line">startTime=$(date +%m/%d-%H:%M:%S) </span><br><span class="line">echo $startTime&quot; : Start Keep Screen ON &quot; &gt;&gt; $LogDir</span><br><span class="line">screen=`dumpsys window policy | grep mIsShowing | grep &#x27;false&#x27;`   </span><br><span class="line"></span><br><span class="line">if [ -z $screen ]</span><br><span class="line">then</span><br><span class="line">  echo &quot; Now screen is OFF,try to start！&quot; &gt;&gt; $LogDir</span><br><span class="line">  input keyevent 26</span><br><span class="line">  sleep 1</span><br><span class="line">  input swipe 800 2000 800 1200</span><br><span class="line">  sleep 1</span><br><span class="line">else</span><br><span class="line">  echo &quot; Now screen is On,it&#x27;s OK! &quot; &gt;&gt; $LogDir</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">com.eg.android.AlipayGphone</span><br><span class="line"></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">!/system/bin/sh</span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">唤起支付宝脚本</span></span><br><span class="line">LogDir=&quot;/sdcard/Android/Peak/run.log&quot;</span><br><span class="line">startTime=$(date +%m/%d-%H:%M:%S) </span><br><span class="line">echo $startTime&quot; : Start Ali Now &quot; &gt;&gt; $LogDir</span><br><span class="line">COUNT=$(ps -ef |grep payGphone |grep -v &quot;grep&quot; |wc -l)</span><br><span class="line">screen=`dumpsys window policy | grep mIsShowing | grep &#x27;false&#x27;`   </span><br><span class="line"></span><br><span class="line">if [ -z $screen ]</span><br><span class="line">then</span><br><span class="line">  echo &quot; Now screen is OFF,try to start！&quot; &gt;&gt; $LogDir</span><br><span class="line">  input keyevent 26</span><br><span class="line">  sleep 1</span><br><span class="line">  input swipe 800 2000 800 1200</span><br><span class="line">  sleep 1</span><br><span class="line">else</span><br><span class="line">  echo &quot; Now screen is On,it&#x27;s OK! &quot; &gt;&gt; $LogDir</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">if [ $COUNT -ne 0 ] ;then</span><br><span class="line">    echo &quot; Ali is runing!&quot; &gt;&gt; $LogDir</span><br><span class="line">    am stopservice com.eg.android.AlipayGphone/com.alipay.android.launcher.service.LauncherService</span><br><span class="line">    sleep 1</span><br><span class="line">    am startservice com.eg.android.AlipayGphone/com.alipay.android.launcher.service.LauncherService</span><br><span class="line">else</span><br><span class="line">    echo &quot; Ali is not run, try to start！&quot; &gt;&gt; $LogDir</span><br><span class="line">    am start com.eg.android.AlipayGphone/.FastStartActivity</span><br><span class="line">    sleep 1</span><br><span class="line">    input keyevent BACK</span><br><span class="line">    am startservice com.eg.android.AlipayGphone/com.alipay.android.launcher.service.LauncherService</span><br><span class="line">    sleep 1</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">!/system/bin/sh</span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">关闭耗电应用 准备睡觉 QQ 微信 音乐 支付宝 并清理垃圾</span></span><br><span class="line">LogDir=&quot;/sdcard/Android/Peak/run.log&quot;</span><br><span class="line">startTime=$(date +%m/%d-%H:%M:%S) </span><br><span class="line">echo $startTime&quot; : Start Sleep to stop APP&quot; &gt;&gt; $LogDir</span><br><span class="line"></span><br><span class="line">am force-stop com.eg.android.AlipayGphone</span><br><span class="line">am force-stop com.tencent.mm</span><br><span class="line">am force-stop com.tencent.mobileqq</span><br><span class="line">am force-stop com.netease.cloudmusic</span><br><span class="line"></span><br><span class="line">LogDir=&quot;/sdcard/Android/Peak/run.log&quot;</span><br><span class="line">startTime=$(date +%m/%d-%H:%M:%S) </span><br><span class="line">echo $startTime&quot; : Fuck file&quot; &gt;&gt; $LogDir</span><br><span class="line"><span class="meta"># </span><span class="language-bash"> 加载配置文件</span></span><br><span class="line">source /data/adb/modules/CrondStart/sh/FUCK-XXX.conf</span><br><span class="line"><span class="meta"># </span><span class="language-bash"> 读取配置文件</span></span><br><span class="line">for i in $sdcard $Download $Android $SelfDefinition; do</span><br><span class="line"> rm -rf $i ; </span><br><span class="line">done</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">!/system/bin/sh</span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">启动常用软件放到后台并锁屏</span></span><br><span class="line">LogDir=&quot;/sdcard/Android/Peak/run.log&quot;</span><br><span class="line">startTime=$(date +%m/%d-%H:%M:%S) </span><br><span class="line">echo $startTime&quot; : Start some APP to background &quot; &gt;&gt; $LogDir</span><br><span class="line">screen=`dumpsys window policy | grep mIsShowing | grep &#x27;false&#x27;`   </span><br><span class="line">am start com.tencent.mm/.ui.LauncherUI</span><br><span class="line">sleep 10</span><br><span class="line">input keyevent BACK</span><br><span class="line">am start com.netease.cloudmusic/.activity.LoadingActivity</span><br><span class="line">sleep 10</span><br><span class="line">input keyevent BACK</span><br><span class="line">am force-stop com.netease.cloudmusic</span><br><span class="line">am force-stop com.eg.android.AlipayGphone</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if [ -z $screen ]</span><br><span class="line">then</span><br><span class="line">  echo &quot; Now screen is OFF,done！&quot; &gt;&gt; $LogDir</span><br><span class="line">else</span><br><span class="line">  echo &quot; Now screen is On,take it OFF! &quot; &gt;&gt; $LogDir</span><br><span class="line">  input keyevent 26</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
















<h4 id="Win11关闭小组件"><a href="#Win11关闭小组件" class="headerlink" title="Win11关闭小组件"></a>Win11关闭小组件</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="language-bash">管理员权限打开powershell，输入以下命令：</span></span><br><span class="line">Get-AppxPackage -Name &quot;MicrosoftWindows.Client.WebExperience&quot; -AllUsers | Remove-AppxPackage -AllUsers</span><br></pre></td></tr></table></figure>




























<h3 id="ssh远程链接服务器，避免因断网而中断训练de-方法"><a href="#ssh远程链接服务器，避免因断网而中断训练de-方法" class="headerlink" title="ssh远程链接服务器，避免因断网而中断训练de 方法"></a>ssh远程链接服务器，避免因断网而中断训练de 方法</h3><hr>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="language-bash">1 链接服务器.</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">2 利用screen 命令 ，重起一个新的screen.</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">新screen的名字，可以任起</span></span><br><span class="line"></span><br><span class="line">screen -S name </span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">3 开始训练.</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">4 可以断开terminal，此时训练不受影响</span> </span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">恢复</span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">1 启动terminal，查看存在的screen的命令.</span></span><br><span class="line"></span><br><span class="line">screen -ls</span><br><span class="line"></span><br><span class="line">screen -r 30362</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">2 断开当前的screen.</span></span><br><span class="line">按 Ctrl + A， 然后 K 键 然后 y 键</span><br></pre></td></tr></table></figure>


































<h3 id="杀掉端口"><a href="#杀掉端口" class="headerlink" title="杀掉端口"></a>杀掉端口</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo fuser -k -n tcp 5000</span><br></pre></td></tr></table></figure>



















<h3 id="Vmware-workstation-16许可证"><a href="#Vmware-workstation-16许可证" class="headerlink" title="Vmware workstation 16许可证"></a>Vmware workstation 16许可证</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ZF3R0-FHED2-M80TY-8QYGC-NPKYF</span><br><span class="line">YF390-0HF8P-M81RQ-2DXQE-M2UT6</span><br><span class="line">ZF71R-DMX85-08DQY-8YMNC-PPHV8</span><br><span class="line"></span><br><span class="line">前面的如果已经失效，用下面的</span><br><span class="line"></span><br><span class="line">FA1M0-89YE3-081TQ-AFNX9-NKUC0</span><br></pre></td></tr></table></figure>























<h4 id="CentOS-8安装docker"><a href="#CentOS-8安装docker" class="headerlink" title="CentOS 8安装docker"></a>CentOS 8安装docker</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="language-bash">更新yum 安装依赖</span></span><br><span class="line">yum install -y yum-utils device-mapper-persistent-data lvm2</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">添加yum源</span></span><br><span class="line">yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">安装</span></span><br><span class="line">yum install docker-ce</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">启动并设置开机自启动</span></span><br><span class="line">systemctl start docker</span><br><span class="line">systemctl enable docker</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">验证</span></span><br><span class="line">docker version</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">安装青龙面板</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">安装nvjdc   目录之间映射关系</span></span><br><span class="line">docker run   --name nvjdc -p 5702:80 -d  -v  /home/qyf/workspace/nvjdc/Config.json:/app/Config/Config.json:ro \-v /home/qyf/workspace/nvjdc/.local-chromium:/app/.local-chromium  \-it --privileged=true  nolanhzy/nvjdc:0.8</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">安装chromium</span></span><br><span class="line">docker container ls -a</span><br><span class="line"> yum install unzip</span><br><span class="line"> cd /home/qyf/workspace/nvjdc/</span><br><span class="line"> mkdir -p  .local-chromium/Linux-884014 &amp;&amp; cd .local-chromium/Linux-884014</span><br><span class="line"> wget https://mirrors.huaweicloud.com/chromium-browser-snapshots/Linux_x64/884014/chrome-linux.zip &amp;&amp; unzip chrome-linux.zip</span><br><span class="line"> unzip chrome-linux.zip</span><br><span class="line"> docker restart nvjdc</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">reboot后如何重新启用青龙面板</span> </span><br><span class="line">docker exec -it qinglong bash</span><br><span class="line">cd /ql/ninja/backend</span><br><span class="line">pm2 start</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">docker exec -it qinglong nginx -c /etc/nginx/nginx.conf</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>





<h4 id="防火墙"><a href="#防火墙" class="headerlink" title="防火墙"></a>防火墙</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">查看</span></span><br><span class="line"></span><br><span class="line">防火墙某个端口是否开放</span><br><span class="line"></span><br><span class="line">firewall-cmd --query-port=3306/tcp</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">开放防火墙端口3306</span></span><br><span class="line"></span><br><span class="line">firewall-cmd --zone=public --add-port=3306/tcp --permanent</span><br><span class="line"></span><br><span class="line">firewall-cmd --zone=public --add-port=8889/tcp --permanent</span><br><span class="line">firewall-cmd --zone=public --add-port=5000/tcp --permanent</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">注意：开放端口后要重启防火墙生效</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">重启防火墙</span></span><br><span class="line"></span><br><span class="line">systemctl restart firewalld</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">关闭防火墙端口</span></span><br><span class="line"></span><br><span class="line">firewall-cmd --remove-port=3306/tcp --permanent</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">查看防火墙状态</span></span><br><span class="line"></span><br><span class="line">systemctl status firewalld</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">关闭防火墙</span></span><br><span class="line"></span><br><span class="line">systemctl stop firewalld</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">打开防火墙</span></span><br><span class="line"></span><br><span class="line">systemctl start firewalld</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">开放一段端口</span></span><br><span class="line"></span><br><span class="line">firewall-cmd --zone=public --add-port=40000-45000/tcp --permanent</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">查看开放的端口列表</span></span><br><span class="line"></span><br><span class="line">firewall-cmd --zone=public --list-ports</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">查看被监听(Listen)的端口</span></span><br><span class="line"></span><br><span class="line">netstat -lntp</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">检查端口被哪个进程占用</span></span><br><span class="line"></span><br><span class="line">netstat -lnp|grep 3306</span><br></pre></td></tr></table></figure>

























<h3 id="UPC-1"><a href="#UPC-1" class="headerlink" title="UPC"></a>UPC</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="language-bash">监控服务启动  status状态</span></span><br><span class="line">/etc/init.d/jhinsight-jhdc start</span><br></pre></td></tr></table></figure>





<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 1 Linux 安装Conda环境</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># https://mirrors.tuna.tsinghua.edu.cn/anaconda/miniconda/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#下载</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2 上传到服务器</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 3 安装 </span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看torch版本，cuda是否可用</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="built_in">print</span>(torch.__version__)</span><br><span class="line"><span class="built_in">print</span>(torch.cuda.is_available())</span><br></pre></td></tr></table></figure>















<h4 id="Conda-迁移"><a href="#Conda-迁移" class="headerlink" title="Conda 迁移"></a>Conda 迁移</h4><p>Step1：在想要迁移的虚拟环境sample中安装conda-pack工具包</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">source activate sample</span><br><span class="line">conda install conda-pack</span><br><span class="line">conda install -c conda-forge conda-pack</span><br></pre></td></tr></table></figure>

<p>或者采用pip安装</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install conda-pack  #pip install git+https://github.com/conda/conda-pack.git</span><br></pre></td></tr></table></figure>

<p>Step2：将当前虚拟环境sample打包</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">conda-pack</span><br><span class="line">ls</span><br><span class="line"><span class="meta"># </span><span class="language-bash">example.tar.gz 即为打包完成的输出文件</span></span><br><span class="line">source deactivate</span><br></pre></td></tr></table></figure>

<p>Step3：将example.tar.gz迁移到其他路径或其他机器</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mv example.tar.gz ~/computer_two</span><br></pre></td></tr></table></figure>

<p>Step4：在另一台机器上解包</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cd ~/computer_two/</span><br><span class="line"><span class="meta"># </span><span class="language-bash">example.tar.gz 即为迁移过来的环境包</span></span><br><span class="line">mkdir myenv</span><br><span class="line">tar -xf example.tar.gz -C myenv</span><br><span class="line">ls</span><br><span class="line"><span class="meta"># </span><span class="language-bash">example.tar.gz myenv</span></span><br></pre></td></tr></table></figure>

<p>Step5：激活虚拟环境</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source myenv/bin/activate</span><br></pre></td></tr></table></figure>





















<h2 id="修改IP地址"><a href="#修改IP地址" class="headerlink" title="修改IP地址"></a>修改IP地址</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">ip addr  #查看当前网卡名</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">- 修改网卡配置文件</span></span><br><span class="line"></span><br><span class="line">vi /etc/sysconfig/network-scripts/ifcfg-ens192 </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">BOOTPROTO=static 		# 网络模式 -- 固定</span><br><span class="line">ONBOOT=yes 				# 重启更新</span><br><span class="line">IPADDR=192.168.8.75 	# 配置当前节点 IP</span><br><span class="line">NETMASK=255.255.255.0 	# 子网掩码</span><br><span class="line">GATEWAY=192.168.1.1 	# 网关</span><br><span class="line">DNS1=8.8.8.8 			# dns</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">创建用户加入用户组</span></span><br><span class="line"></span><br><span class="line">sudo adduser user1</span><br><span class="line"><span class="meta">#</span><span class="language-bash">为用户创建密码方法如下</span></span><br><span class="line">sudo passwd user1</span><br><span class="line"><span class="meta">#</span><span class="language-bash">删除用户</span></span><br><span class="line">sudo userdel -r user1</span><br><span class="line"><span class="meta">#</span><span class="language-bash">为用户添加sudo</span></span><br><span class="line">sudo usermod -a -G wheel user1</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">重启网卡</span></span><br><span class="line"></span><br><span class="line">systemctl restart network</span><br><span class="line"></span><br></pre></td></tr></table></figure>









<h2 id="版本-内核"><a href="#版本-内核" class="headerlink" title="版本 内核"></a>版本 内核</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">unme -a #查看内核版本</span><br><span class="line"></span><br><span class="line">CentOS Linux release 8.4.2105</span><br><span class="line"></span><br><span class="line">cat /etc/redhat-release</span><br><span class="line"></span><br><span class="line">cat /etc/*release #查看系统版本</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="GPU运行"><a href="#GPU运行" class="headerlink" title="GPU运行"></a>GPU运行</h2><p>nvidia-smi</p>
<h2 id="配置vnc-1"><a href="#配置vnc-1" class="headerlink" title="配置vnc"></a>配置vnc</h2><p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/xuanbjut/p/14289178.html">https://www.cnblogs.com/xuanbjut/p/14289178.html</a></p>
<p>添加用户</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/tigervnc/vncserver.users</span><br><span class="line"></span><br><span class="line">:1=qyf   #对应5901端口</span><br></pre></td></tr></table></figure>

<p>拷贝模板</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo cp /usr/lib/systemd/system/vncserver@.service /etc/systemd/system/vncserver@1.service</span><br><span class="line"><span class="meta"># </span><span class="language-bash">@1.service 对应：1用户</span></span><br></pre></td></tr></table></figure>

<p>设置密码</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">vncpasswd</span><br><span class="line"></span><br><span class="line">sudo systemctl start vncserver@:1  #对应：1用户</span><br><span class="line"></span><br><span class="line">设置开机启动</span><br><span class="line">sudo systemctl enable vncserver@:1</span><br></pre></td></tr></table></figure>

<p>开启服务</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl start vncserver@:1</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">sudo systemctl start vncserver@:1.service</span></span><br></pre></td></tr></table></figure>

<p>查看端口</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo netstat -tulpn | grep vnc</span><br></pre></td></tr></table></figure>

<p>配置防火墙</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo firewall-cmd --permanent --add-service vnc-server</span><br><span class="line">sudo firewall-cmd --reload</span><br></pre></td></tr></table></figure>



<h2 id="miniconda安装"><a href="#miniconda安装" class="headerlink" title="miniconda安装"></a>miniconda安装</h2><p><a target="_blank" rel="noopener" href="https://mirrors.tuna.tsinghua.edu.cn/anaconda/miniconda/">https://mirrors.tuna.tsinghua.edu.cn/anaconda/miniconda/</a></p>
<p>下载conda</p>
<h2 id="查看进程"><a href="#查看进程" class="headerlink" title="查看进程"></a>查看进程</h2><p>jps</p>
<h2 id="关闭防火墙"><a href="#关闭防火墙" class="headerlink" title="关闭防火墙"></a>关闭防火墙</h2><p>sudo systemctl stop firewalld</p>
<p>start开启</p>
<h2 id="windows-minconda安装"><a href="#windows-minconda安装" class="headerlink" title="windows minconda安装"></a>windows minconda安装</h2><p><a target="_blank" rel="noopener" href="https://mirrors.tuna.tsinghua.edu.cn/anaconda/miniconda/">https://mirrors.tuna.tsinghua.edu.cn/anaconda/miniconda/</a></p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/102564715">https://zhuanlan.zhihu.com/p/102564715</a></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">首先在conda的终端激活自己想要迁移的环境</span><br><span class="line"></span><br><span class="line">conda activate your_env</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">然后生成自己的环境文件</span><br><span class="line"></span><br><span class="line">conda env export &gt; your_env.yaml</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">在另一台机器上的conda终端克隆迁移的环境即可</span><br><span class="line"></span><br><span class="line">conda env create -f your_env.yaml</span><br><span class="line">pip导出安装的库到requirements.txt</span><br><span class="line"></span><br><span class="line"> pip freeze &gt; requirements.txt</span><br></pre></td></tr></table></figure>












<h2 id="GPU路径"><a href="#GPU路径" class="headerlink" title="GPU路径"></a>GPU路径</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">currenth = <span class="string">&#x27;/hpcfiles/users/qyf/project/DeepRL_Algorithms-master&#x27;</span></span><br><span class="line">sys.path.append(currenth)</span><br></pre></td></tr></table></figure>


<h2 id="快速跳转到上N层目录"><a href="#快速跳转到上N层目录" class="headerlink" title="快速跳转到上N层目录"></a>快速跳转到上N层目录</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/profile</span><br><span class="line">结尾添加别名</span><br><span class="line">alias cd1=&#x27;cd ..&#x27;</span><br><span class="line">alias cd2=&#x27;cd ../..&#x27;</span><br><span class="line">alias cd3=&#x27;cd ../../..&#x27;</span><br><span class="line">alias cd4=&#x27;cd ../../../..&#x27;</span><br><span class="line">alias cd5=&#x27;cd ../../../../..&#x27;</span><br><span class="line">alias cd6=&#x27;cd ../../../../../..&#x27;</span><br><span class="line">使修改生效</span><br><span class="line">source .bashrc  或 source /etc/profile</span><br></pre></td></tr></table></figure>
















<h2 id="GPU任务"><a href="#GPU任务" class="headerlink" title="GPU任务"></a>GPU任务</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">jhosts attrib -l 查看到所有资源包含cpu、内存、显卡等资源</span><br><span class="line">jjobs 不使用参数，显示目前正在排队或运行的作业 -a 显示最近完成的作业及正在运行或排队的作业 #-l 作业号 显示指定作业的详细信息</span><br><span class="line">jctrl kill &lt;作业号&gt; 强制杀掉指定的作业</span><br><span class="line">&lt;jsub&gt;： 提交作业</span><br><span class="line">&lt;-q normal&gt;： 指定 normal 队列</span><br><span class="line">&lt;-n 1&gt;： 指定该作业所需 1 核</span><br><span class="line">&lt;-e error.%J&gt;： 错误信息输出到 error.%J 文件中</span><br><span class="line">&lt;-o output.%J&gt;： 正确信息输出到 output.%J 文件中</span><br><span class="line">&lt;-J my_job&gt;： 指定作业名字为 my_job</span><br><span class="line">&lt;test&gt;： 执行的脚本</span><br><span class="line">提交任务</span><br><span class="line"><span class="meta">#</span><span class="language-bash">!/bin/sh</span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">JSUB -q normal</span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">JSUB -n 2</span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">JSUB -e error.%J</span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">JSUB -o output.%J</span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">JSUB -J qyf_task</span></span><br><span class="line">source /apps/software/anaconda3/bin/activate torch</span><br><span class="line">python /hpcfiles/users/qyf/project/DeepRL_Algorithms-master/Algorithms/pytorch/PPO/main.py &gt;&gt; train.log</span><br><span class="line"></span><br><span class="line">jsub &lt;./up.sh</span><br></pre></td></tr></table></figure>


<h2 id="gym环境"><a href="#gym环境" class="headerlink" title="gym环境"></a>gym环境</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="language-bash">安装box2d</span></span><br><span class="line">pip install gym </span><br><span class="line">conda install swig</span><br><span class="line">pip install box2d box2d-kengz --user</span><br></pre></td></tr></table></figure>




<h2 id="HTML网页网课加速助手"><a href="#HTML网页网课加速助手" class="headerlink" title="HTML网页网课加速助手"></a>HTML网页网课加速助手</h2><p><strong>document.querySelector(‘video’).playbackRate &#x3D; 4.0;</strong></p>
<h2 id="防火墙-1"><a href="#防火墙-1" class="headerlink" title="防火墙"></a>防火墙</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># </span><span class="language-bash">1.启动防火墙</span> </span><br><span class="line">systemctl start firewalld</span><br><span class="line"><span class="meta"># </span><span class="language-bash">2.禁用防火墙</span> </span><br><span class="line">systemctl stop firewalld</span><br><span class="line"><span class="meta"># </span><span class="language-bash">3.设置开机启动</span></span><br><span class="line">systemctl enable firewalld</span><br><span class="line"><span class="meta"># </span><span class="language-bash">4.停止并禁用开机启动</span> </span><br><span class="line">sytemctl disable firewalld</span><br><span class="line"><span class="meta"># </span><span class="language-bash">5.重启防火墙</span> </span><br><span class="line">firewall-cmd --reload</span><br><span class="line"><span class="meta">#</span><span class="language-bash">end</span></span><br></pre></td></tr></table></figure>






<h2 id="安装JAVA"><a href="#安装JAVA" class="headerlink" title="安装JAVA"></a>安装JAVA</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/lib</span><br><span class="line">sudo mkdir jvm #创建/usr/lib/jvm目录用来存放JDK文件</span><br><span class="line">sudo tar -zxvf ./jdk-8u291-linux-x64.tar.gz -C /usr/lib/jvm #解压</span><br><span class="line">vim ~/.bashrc #系统变量</span><br><span class="line">export JAVA_HOME=/usr/lib/jvm/jdk1.8.0_291</span><br><span class="line">export JRE_HOME=$&#123;JAVA_HOME&#125;/jre</span><br><span class="line">export CLASSPATH=.:$&#123;JAVA_HOME&#125;/lib:$&#123;JRE_HOME&#125;/lib</span><br><span class="line">export PATH=$&#123;JAVA_HOME&#125;/bin:$PATH</span><br><span class="line">source ~/.bashrc	#立即生效</span><br><span class="line"><span class="meta">#</span><span class="language-bash">end</span></span><br></pre></td></tr></table></figure>




<h2 id="ssh-配置免密登录"><a href="#ssh-配置免密登录" class="headerlink" title="ssh 配置免密登录"></a>ssh 配置免密登录</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">cd ~/.ssh/        </span><br><span class="line"><span class="meta"># </span><span class="language-bash">若没有该目录，请先执行一次ssh localhost</span></span><br><span class="line">ssh-keygen -t rsa    </span><br><span class="line"><span class="meta"># </span><span class="language-bash">会有提示，都按回车即可</span></span><br><span class="line">cat ./id_rsa.pub &gt;&gt; ./authorized_keys  </span><br><span class="line"><span class="meta"># </span><span class="language-bash">加入授权</span></span><br><span class="line">chmod g-w ~ </span><br><span class="line"><span class="meta">#</span><span class="language-bash">修改权限SSH不希望home目录和~/.ssh目录对组有写权限</span></span><br><span class="line">chmod 700 ~/.ssh</span><br><span class="line">chmod 600 ~/.ssh/authorized_keys</span><br><span class="line"><span class="meta">#</span><span class="language-bash">结束</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>













<h2 id="linux用户创建"><a href="#linux用户创建" class="headerlink" title="linux用户创建"></a>linux用户创建</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">sudo adduser user1</span><br><span class="line"><span class="meta">#</span><span class="language-bash">为用户创建密码方法如下</span></span><br><span class="line">sudo passwd user1</span><br><span class="line"><span class="meta">#</span><span class="language-bash">删除用户</span></span><br><span class="line">sudo userdel -r user1</span><br><span class="line"><span class="meta">#</span><span class="language-bash">为用户添加sudo</span></span><br><span class="line">sudo usermod -a -G wheel user1</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mkdir a #创建文件夹</span><br><span class="line">rmdir a #删除文件夹</span><br><span class="line">mv a b	#改名，移动</span><br><span class="line">rm a #删除</span><br><span class="line">cp a b #复制文件或目录</span><br><span class="line">cat a #查看文件内容 </span><br><span class="line">touch a #修改文件时间或创建新文件</span><br><span class="line">tac a #反向查看文件内容</span><br><span class="line"></span><br><span class="line">grep -i &#x27;user&#x27; ~/.bashrc	#从文件内查找字符串</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="linux常用命令"><a href="#linux常用命令" class="headerlink" title="linux常用命令"></a>linux常用命令</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">nvcc -V #查看cuda版本</span><br><span class="line">crontab -l #查看当前定时任务</span><br><span class="line">crontab -e #编辑当前定时任务</span><br><span class="line">conda create -n env-name python=2.7  #conda新建一个虚拟环境-n env-name是设置新建环境的名字，特定python版本</span><br><span class="line">conda activate env-name #激活指定虚拟环境</span><br><span class="line">conda deactivate #离开虚拟环境</span><br><span class="line">conda env list #可以列出你所创建的所有环境conda info --envs</span><br><span class="line">conda env remove -n env-name #删除指定的环境 </span><br></pre></td></tr></table></figure>


<p>使用如下Conda命令：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda create -n env2 --clone conda-env1</span><br></pre></td></tr></table></figure>

<p>这里conda-env2是新创建的Conda环境，conda-env1是被复制的Conda环境，<br>复制完成后，两个环境的Python配置是完全相同的；</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">pip install package -i https://pypi.tuna.tsinghua.edu.cn/simple some-package #使用清华下载</span><br><span class="line">conda config --remove-key channels # 换回默认源(清除所有用户添加的镜像源路径，只保留默认的路径)</span><br><span class="line"><span class="meta">#</span><span class="language-bash">配置文件</span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">全局的是在/etc目录下（/etc/profile）/etc/profile</span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">用户个人的是在用户的家目录下（~/.profile）个人：<span class="built_in">cat</span> ~/.bash_profile</span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">用户启动加载文件（~/.bashrc）<span class="built_in">cat</span> ~/.bashrc</span></span><br><span class="line">conda install --channel https://conda.anaconda.org/conda-forge pandas-alive=0.2.3conda install pandas_alive -c conda-forge</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="language-bash"><span class="comment"># 镜像源</span></span></span><br><span class="line">conda config --remove channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main/ #删除镜像源,命令</span><br><span class="line">conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/</span><br><span class="line">conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main/</span><br><span class="line">conda config --set show_channel_urls yes</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="language-bash"><span class="comment"># 找不到模块</span></span></span><br><span class="line"></span><br><span class="line"> ModuleNotFoundError: No module named &#x27;XXX&#x27;  https://www.cnblogs.com/dreamyu/p/7889959.html</span><br><span class="line">import os,sys</span><br><span class="line">curPath = os.path.abspath(os.path.dirname(__file__))</span><br><span class="line">rootPath = os.path.split(curPath)[0]</span><br><span class="line">sys.path.append(rootPath)</span><br></pre></td></tr></table></figure>



<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="language-bash">GPU上传作业</span></span><br><span class="line">jjobs -a	#查看作业</span><br><span class="line">jsub &lt; ./task.sh		#提交作业</span><br><span class="line"><span class="meta">#</span><span class="language-bash">提交作业</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">!/bin/sh</span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">JSUB  -q normal</span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">JSUB -n 32</span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">JSUB -e error.%J</span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">JSUB -o output.%J</span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">JSUB -J qyf_test</span></span><br><span class="line">python /hpcfiles/users/qyf/project/DC-DRL/common_modules/agent.py &gt; log.log</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">显示变量</span></span><br><span class="line">echo $PATH</span><br><span class="line">方法1</span><br><span class="line"><span class="meta">#</span><span class="language-bash">配置完后可以通过<span class="built_in">echo</span> <span class="variable">$PATH</span>查看配置结果。</span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">生效方法：立即生效</span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">有效期限：临时改变，只能在当前的终端窗口中有效，当前窗口关闭后就会恢<span class="comment">#复原有的path配置</span></span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">用户局限：仅对当前用户</span></span><br><span class="line">export PATH=/usr/local/bin:$PATH</span><br><span class="line">方法2</span><br><span class="line"><span class="meta">#</span><span class="language-bash">通过修改.bashrc文件:</span></span><br><span class="line">vim ~/.bashrc </span><br><span class="line"><span class="meta">#</span><span class="language-bash">在最后一行添上：</span></span><br><span class="line">export PATH=/usr/local/eclipse:$PATH</span><br><span class="line"><span class="meta">#</span><span class="language-bash">生效方法：（有以下两种）</span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">1、关闭当前终端窗口，重新打开一个新终端窗口就能生效</span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">2、输入“<span class="built_in">source</span> ~/.bashrc”命令，立即生效</span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">有效期限：永久有效</span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">用户局限：仅对当前用户</span></span><br><span class="line">方法3</span><br><span class="line"><span class="meta">#</span><span class="language-bash">通过修改profile文件:</span></span><br><span class="line">vim /etc/profile</span><br><span class="line">export PATH=/usr/local/bin:$PATH</span><br><span class="line"><span class="meta">#</span><span class="language-bash">生效方法：系统重启</span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">有效期限：永久有效</span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">用户局限：对所有用户</span></span><br><span class="line">方法4</span><br><span class="line"><span class="meta">#</span><span class="language-bash">通过修改environment文件:</span></span><br><span class="line">vim /etc/environment</span><br><span class="line">在PATH=&quot;/usr/local/sbin:/usr/sbin:/usr/bin:/sbin:/bin&quot;中加入 </span><br><span class="line">&quot;:/usr/local/bin&quot;</span><br><span class="line"><span class="meta">#</span><span class="language-bash">生效方法：系统重启</span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">有效期限：永久有效</span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">用户局限：对所有用户</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="language-bash"><span class="comment"># 常使用的tar压缩命令为</span></span>  </span><br><span class="line">tar -zcvf  压缩名.tar.gz  文件/目录</span><br><span class="line"></span><br><span class="line">.tar.gz文件，这种文件是tar文件的压缩文件，可以使用tar命令进行解压。解压：</span><br><span class="line">tar -zxvf pythontab.tar.gz</span><br><span class="line">单纯的.gz文件解压，这种文件不可以使用tar命令解压，需要用gunzip解压，使用命令gzip</span><br><span class="line">解压：gzip -d pythontab.gz</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">使用zip进行压缩的时候命令格式为</span>   </span><br><span class="line">zip -q -r 压缩包名.zip   目录/文件名</span><br><span class="line"><span class="meta">#</span><span class="language-bash">解压</span></span><br><span class="line">unzip</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">解压文件tgz</span><br><span class="line">例如文件名为: yyyy.tgz</span><br><span class="line">先使用GZIP解压为TAR文件</span><br><span class="line">gzip -dv yyyy.tgz</span><br><span class="line">同时解压后生成yyyy.tar文件</span><br><span class="line">再使用tar解压yyyy.tar文件</span><br><span class="line">tar xvf yyyy.tar</span><br><span class="line">解压下边的命令：</span><br><span class="line">gzip -dv R220-ESiVision-WebEnv-X86-Linux.tgz</span><br><span class="line">tar xvf R220-ESiVision-WebEnv-X86-Linux.tar</span><br><span class="line"></span><br><span class="line">压缩：tgz文件。</span><br><span class="line">tar -czvf R220-ESiVision-WebEnv-X86-Linux.tgz apache-tomcat-5.5.23 jdk1.5.0_12 net-snmp-5.1.1</span><br><span class="line">tar -czvf filename.tgz file</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">修改文件权限</span></span><br><span class="line">chmod 777 makePlus.sh</span><br><span class="line"></span><br><span class="line">查看系统版本/os</span><br><span class="line">cat /proc/version</span><br><span class="line">cat /etc/redhat-release</span><br><span class="line">uname -a 显示如下</span><br><span class="line"> uname -r</span><br></pre></td></tr></table></figure>


<h2 id="找不到包"><a href="#找不到包" class="headerlink" title="找不到包"></a>找不到包</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -- coding: utf-8 --</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> os,sys</span><br><span class="line">curPath = os.path.abspath(os.path.dirname(__file__))</span><br><span class="line">sys.path.append(curPath)</span><br><span class="line">rootPath = os.path.split(curPath)[<span class="number">0</span>]</span><br><span class="line">sys.path.append(rootPath)</span><br><span class="line"><span class="comment">#sys.path.append(&#x27;./common&#x27;)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> os,sys</span><br><span class="line">curPath = os.path.abspath(os.path.dirname(__file__))</span><br><span class="line"><span class="built_in">print</span>(curPath)</span><br><span class="line">rootPath1 = os.path.split(curPath)[<span class="number">0</span>]</span><br><span class="line">rootPath2 = os.path.split(rootPath1)[<span class="number">0</span>]</span><br><span class="line"><span class="built_in">print</span>(rootPath2)</span><br><span class="line">pathaa = <span class="string">&#x27;/hpcfiles/users/qyf/test/DeepRL_Algorithms-master&#x27;</span></span><br><span class="line">sys.path.append(pathaa)<span class="comment">#地址</span></span><br></pre></td></tr></table></figure>









</div><div class="tags"><a href="/peaky/tags/Linux/"><i class="fa fa-tag"></i>Linux</a></div><div class="post-nav"><a class="pre" href="/peaky/2021/08/27/87d44b9d.html">MIUI教程</a><a class="next" href="/peaky/2021/05/05/a54293f2.html">Springboot笔记</a></div><div id="vcomment"></div><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//cdn.jsdelivr.net/gh/AshinWang/SimpleValine@v0.1/SimpleValine.min.js"></script><script>var notify = 'false' == 'true' ? true : false;
var verify = 'false' == 'true' ? true : false;
var GUEST_INFO = ['nick','mail','link'];
var guest_info = 'nick,mail,link'.split(',').filter(function(item){
  return GUEST_INFO.indexOf(item) > -1
});
guest_info = guest_info.length == 0 ? GUEST_INFO :guest_info;
window.valine = new Valine({
  el:'#vcomment',
  notify:notify,
  verify:verify,
  appId:'c2tSICknvMNwQOvqeqh8wYoi-9Nh9j0Va',
  appKey:'geSzJMrX46ogsQR590PTiGPF',
  placeholder:'留下你的足迹~',
  avatar:'mm',
  guest_info:guest_info,
  pageSize:'10'
})
</script></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><div class="search-form"><input id="local-search-input" placeholder="Search" type="text" name="q" results="0"/><div id="local-search-result"></div></div></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/peaky/categories/Linux/">Linux</a></li><li class="category-list-item"><a class="category-list-link" href="/peaky/categories/MIUI/">MIUI</a></li><li class="category-list-item"><a class="category-list-link" href="/peaky/categories/MarkDown/">MarkDown</a></li><li class="category-list-item"><a class="category-list-link" href="/peaky/categories/RL/">RL</a></li><li class="category-list-item"><a class="category-list-link" href="/peaky/categories/Study/">Study</a></li><li class="category-list-item"><a class="category-list-link" href="/peaky/categories/paper/">paper</a></li><li class="category-list-item"><a class="category-list-link" href="/peaky/categories/python/">python</a></li><li class="category-list-item"><a class="category-list-link" href="/peaky/categories/%E5%AD%A6%E4%B9%A0/">学习</a></li><li class="category-list-item"><a class="category-list-link" href="/peaky/categories/%E5%AF%BC%E8%88%AA/">导航</a></li><li class="category-list-item"><a class="category-list-link" href="/peaky/categories/%E6%95%99%E7%A8%8B/">教程</a></li><li class="category-list-item"><a class="category-list-link" href="/peaky/categories/%E6%97%A5%E8%BF%B9/">日迹</a></li><li class="category-list-item"><a class="category-list-link" href="/peaky/categories/%E7%94%B5%E8%84%91/">电脑</a></li><li class="category-list-item"><a class="category-list-link" href="/peaky/categories/%E7%BC%96%E7%A8%8B/">编程</a></li><li class="category-list-item"><a class="category-list-link" href="/peaky/categories/%E8%BD%AF%E4%BB%B6/">软件</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/peaky/tags/%E6%B5%8F%E8%A7%88%E5%99%A8/" style="font-size: 15px;">浏览器</a> <a href="/peaky/tags/Study/" style="font-size: 15px;">Study</a> <a href="/peaky/tags/Hexo/" style="font-size: 15px;">Hexo</a> <a href="/peaky/tags/%E6%95%99%E7%A8%8B/" style="font-size: 15px;">教程</a> <a href="/peaky/tags/Linux/" style="font-size: 15px;">Linux</a> <a href="/peaky/tags/%E5%AD%A6%E4%B9%A0/" style="font-size: 15px;">学习</a> <a href="/peaky/tags/MIUI/" style="font-size: 15px;">MIUI</a> <a href="/peaky/tags/MarkDown/" style="font-size: 15px;">MarkDown</a> <a href="/peaky/tags/%E8%AF%AD%E6%B3%95/" style="font-size: 15px;">语法</a> <a href="/peaky/tags/python/" style="font-size: 15px;">python</a> <a href="/peaky/tags/RL/" style="font-size: 15px;">RL</a> <a href="/peaky/tags/%E7%BC%96%E7%A8%8B/" style="font-size: 15px;">编程</a> <a href="/peaky/tags/%E5%AF%BC%E8%88%AA/" style="font-size: 15px;">导航</a> <a href="/peaky/tags/%E8%BD%AF%E4%BB%B6/" style="font-size: 15px;">软件</a> <a href="/peaky/tags/%E6%97%A5%E8%BF%B9/" style="font-size: 15px;">日迹</a> <a href="/peaky/tags/%E7%94%B5%E8%84%91/" style="font-size: 15px;">电脑</a> <a href="/peaky/tags/%E6%97%A5%E5%B8%B8/" style="font-size: 15px;">日常</a> <a href="/peaky/tags/paper/" style="font-size: 15px;">paper</a> <a href="/peaky/tags/springboot/" style="font-size: 15px;">springboot</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/peaky/2022/04/09/1e5d734c.html">日迹</a></li><li class="post-list-item"><a class="post-list-link" href="/peaky/2022/03/28/d285d8df.html">EC Abstract</a></li><li class="post-list-item"><a class="post-list-link" href="/peaky/2022/03/20/9f2153c9.html">论文格式</a></li><li class="post-list-item"><a class="post-list-link" href="/peaky/2022/03/01/8d39085b.html">Linux部署git与Nodejs</a></li><li class="post-list-item"><a class="post-list-link" href="/peaky/2021/08/27/87d44b9d.html">MIUI教程</a></li><li class="post-list-item"><a class="post-list-link" href="/peaky/2021/06/01/9211474f.html">常用的一些命令</a></li><li class="post-list-item"><a class="post-list-link" href="/peaky/2021/05/05/a54293f2.html">Springboot笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/peaky/2021/03/15/217f21be.html">DRL笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/peaky/2021/03/01/514027fa.html">Hexo部署到阿里云OSS上</a></li><li class="post-list-item"><a class="post-list-link" href="/peaky/2021/01/28/ef00c80b.html">LayUI入门</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="https://space.bilibili.com/451761785" title="Bili主页" target="_blank">Bili主页</a><ul></ul><a href="https://peaky2222.github.io/peaky/" title="GitHub" target="_blank">GitHub</a><ul></ul><a href="https://hsrss.vercel.app/" title="RSSHub" target="_blank">RSSHub</a><ul></ul><a href="https://peaky2022.gitee.io/peaky/" title="Gitee" target="_blank">Gitee</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2022 <a href="/peaky/." rel="nofollow">NoteBook.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/peaky/js/totop.js?v=1.0.0" async></script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/peaky/js/fancybox.js?v=1.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.css"><link rel="stylesheet" type="text/css" href="/peaky/css/search.css?v=1.0.0"><script type="text/javascript" src="/peaky/js/search.js?v=1.0.0"></script><script>var search_path = 'search.xml';
if (search_path.length == 0) {
   search_path = 'search.xml';
}
var path = '/peaky/' + search_path;
searchFunc(path, 'local-search-input', 'local-search-result');
</script><script type="text/javascript" src="/peaky/js/codeblock-resizer.js?v=1.0.0"></script><script type="text/javascript" src="/peaky/js/smartresize.js?v=1.0.0"></script></div></body></html>